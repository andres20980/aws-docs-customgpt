Creative Commons Attribution-ShareAlike 4.0 International Public License

By exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-ShareAlike 4.0 International Public License ("Public License"). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.

Section 1 – Definitions.
	
     a.	Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image.
	
     b.	Adapter's License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License.
	
     c.	BY-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses, approved by Creative Commons as essentially the equivalent of this Public License.
	
     d.	Copyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights.
	
     e.	Effective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements.
	
     f.	Exceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material.
	
     g.	License Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution and ShareAlike.
	
     h.	Licensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License.
	
     i.	Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license.
	
     j.	Licensor means the individual(s) or entity(ies) granting rights under this Public License.
	
     k.	Share means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them.
	
     l.	Sui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world.
	
     m.	You means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.

Section 2 – Scope.
	
     a.	License grant.
	
          1. Subject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to:

               A. reproduce and Share the Licensed Material, in whole or in part; and	

               B. produce, reproduce, and Share Adapted Material.
	
          2. Exceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions.
	
          3. Term. The term of this Public License is specified in Section 6(a).
	
          4. Media and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material.
	
          5. Downstream recipients.

               A. Offer from the Licensor – Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License.
	
               B. Additional offer from the Licensor – Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter’s License You apply.
	
               C. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material.
	
          6. No endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i).
	
     b.	Other rights.
	
          1. Moral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise.
	
          2. Patent and trademark rights are not licensed under this Public License.
	
          3. To the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties.

Section 3 – License Conditions.

Your exercise of the Licensed Rights is expressly made subject to the following conditions.
	
     a.	Attribution.
	
          1. If You Share the Licensed Material (including in modified form), You must:

               A. retain the following if it is supplied by the Licensor with the Licensed Material:

                    i.	identification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated);

                    ii.	a copyright notice;

                    iii. a notice that refers to this Public License;

                    iv.	a notice that refers to the disclaimer of warranties;

                    v.	a URI or hyperlink to the Licensed Material to the extent reasonably practicable;

               B. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and

               C. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License.
	
          2. You may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information.
	
          3. If requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable.
	
     b.	ShareAlike.In addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply.
	
          1. The Adapter’s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-SA Compatible License.
	
          2. You must include the text of, or the URI or hyperlink to, the Adapter's License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material.
	
          3. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter's License You apply.

Section 4 – Sui Generis Database Rights.

Where the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material:
	
     a.	for the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database;
	
     b.	if You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and
	
     c.	You must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database.
For the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.

Section 5 – Disclaimer of Warranties and Limitation of Liability.
	
     a.	Unless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You.
	
     b.	To the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You.
	
     c.	The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.

Section 6 – Term and Termination.
	
     a.	This Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically.
	
     b.	Where Your right to use the Licensed Material has terminated under Section 6(a), it reinstates:
	
          1. automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or
	
          2. upon express reinstatement by the Licensor.
	
     c.	For the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License.
	
     d.	For the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License.
	
     e.	Sections 1, 5, 6, 7, and 8 survive termination of this Public License.

Section 7 – Other Terms and Conditions.
	
     a.	The Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed.
	
     b.	Any arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.

Section 8 – Interpretation.
	
     a.	For the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License.
	
     b.	To the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions.
	
     c.	No term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor.
	
     d.	Nothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority.



# Guidelines for contributing

Thank you for your interest in contributing to AWS documentation! We greatly value feedback and contributions from our community.

Please read through this document before you submit any pull requests or issues. It will help us work together more effectively.

## What to expect when you contribute

When you submit a pull request, our team is notified and will respond as quickly as we can. We'll do our best to work with you to ensure that your pull request adheres to our style and standards. If we merge your pull request, we might make additional edits later for style or clarity.

The AWS documentation source files on GitHub aren't published directly to the official documentation website. If we merge your pull request, we'll publish your changes to the documentation website as soon as we can, but they won't appear immediately or automatically.

We look forward to receiving your pull requests for:

* New content you'd like to contribute (such as new code samples or tutorials)
* Inaccuracies in the content
* Information gaps in the content that need more detail to be complete
* Typos or grammatical errors
* Suggested rewrites that improve clarity and reduce confusion

**Note:** We all write differently, and you might not like how we've written or organized something currently. We want that feedback. But please be sure that your request for a rewrite is supported by the previous criteria. If it isn't, we might decline to merge it.

## How to contribute

To contribute, send us a pull request. For small changes, such as fixing a typo or adding a link, you can use the [GitHub Edit Button](https://blog.github.com/2011-04-26-forking-with-the-edit-button/). For larger changes:

1. [Fork the repository](https://help.github.com/articles/fork-a-repo/).
2. In your fork, make your change in a branch that's based on this repo's **master** branch.
3. Commit the change to your fork, using a clear and descriptive commit message.
4. [Create a pull request](https://help.github.com/articles/creating-a-pull-request-from-a-fork/), answering any questions in the pull request form.

Before you send us a pull request, please be sure that:

1. You're working from the latest source on the **master** branch.
2. You check [existing open](https://github.com/awsdocs/aws-ios-developer-guide/pulls), and [recently closed](https://github.com/awsdocs/aws-ios-developer-guide/pulls?q=is%3Apr+is%3Aclosed), pull requests to be sure that someone else hasn't already addressed the problem.
3. You [create an issue](https://github.com/awsdocs/aws-ios-developer-guide/issues/new) before working on a contribution that will take a significant amount of your time.

For contributions that will take a significant amount of time, [open a new issue](https://github.com/awsdocs/aws-ios-developer-guide/issues/new) to pitch your idea before you get started. Explain the problem and describe the content you want to see added to the documentation. Let us know if you'll write it yourself or if you'd like us to help. We'll discuss your proposal with you and let you know whether we're likely to accept it. We don't want you to spend a lot of time on a contribution that might be outside the scope of the documentation or that's already in the works.

## Finding contributions to work on

If you'd like to contribute, but don't have a project in mind, look at the [open issues](https://github.com/awsdocs/aws-ios-developer-guide/issues) in this repository for some ideas. Any issues with the [help wanted](https://github.com/awsdocs/aws-ios-developer-guide/labels/help%20wanted) or [enhancement](https://github.com/awsdocs/aws-ios-developer-guide/labels/enhancement) labels are a great place to start.

In addition to written content, we really appreciate new examples and code samples for our documentation, such as examples for different platforms or environments, and code samples in additional languages.

## Code of conduct

This project has adopted the [Amazon Open Source Code of Conduct](https://aws.github.io/code-of-conduct). For more information, see the [Code of Conduct FAQ](https://aws.github.io/code-of-conduct-faq) or contact [opensource-codeofconduct@amazon.com](mailto:opensource-codeofconduct@amazon.com) with any additional questions or comments.

## Security issue notifications

If you discover a potential security issue, please notify AWS Security via our [vulnerability reporting page](http://aws.amazon.com/security/vulnerability-reporting/). Please do **not** create a public issue on GitHub.

## Licensing

See the [LICENSE](https://github.com/awsdocs/aws-ios-developer-guide/blob/master/LICENSE) file for this project's licensing. We will ask you to confirm the licensing of your contribution. We may ask you to sign a [Contributor License Agreement (CLA)](http://en.wikipedia.org/wiki/Contributor_License_Agreement) for larger changes.



# -*- coding: utf-8 -*-
#
# AWS Sphinx configuration file.
#
# For more information about how to configure this file, see:
#
# https://w.amazon.com/index.php/AWSDevDocs/Sphinx
#

#
# General information about the project.
#

# Optional service/SDK name, typically the three letter acronym (TLA) that
# represents the service, such as 'SWF'. If this is an SDK, you can use 'SDK'
# here.
service_name = u'Mobile SDK'

# The long version of the service or SDK name, such as "Amazon Simple Workflow
# Service", "AWS Flow Framework for Ruby" or "AWS SDK for Java"
service_name_long = u'AWS ' + service_name

# The landing page for the service documentation.
service_docs_home = u'http://aws.amazon.com/documentation/mobile-sdk/'

project = u'iOS Developer Guide'

# A short description of the project.
project_desc = u'%s %s' % (service_name_long, project)

# the output will be generated in latest/<project_basename> and will appear on
# the web using the same basename.
project_basename = 'mobile/sdkforios/developerguide'

# This name is used as the manual / PDF name. Don't include the extension
# (.pdf) here.
man_name = 'aws-ios-dg'

# The language for this version of the docs. Typically 'en'. For a full list of
# values, see: http://sphinx-doc.org/config.html#confval-language
language = u'en'

# Whether or not to show the PDF link. If you generate a PDF for your
# documentation, set this to True.
show_pdf_link = True

# Whether or not to show the language selector
show_lang_selector = True

# The link to the top of the doc source tree on GitHub. This allows generation
# of per-page "Edit on GitHub" links.
github_doc_url = 'https://github.com/awsdocs/aws-ios-developer-guide/tree/master/doc_source'

#
# Version Information
#

# The version info for the project you're documenting, acts as replacement for
# |version| and |release| substitutions in the documentation, and is also used
# in various other places throughout the built documents.

# The short X.Y version.
version = '0.0.3'

# The full version, including alpha/beta/rc tags.
release = '0.0.3'

#
# Forum Information
#

# Optional forum ID. If there's a relevant forum at forums.aws.amazon.com, then
# set the ID here. If not set, then no forum ID link will be generated.
forum_id = '88'

#
# Navlinks
#

# Extra navlinks. You can specify additional links to appear in the top bar here
# as navlink name / url pairs. If extra_navlinks is not set, then no extra
# navlinks will be generated.
#
# extra_navlinks = [
#         ('API Reference', 'http://path/to/api/reference'),
#         ('GitHub', 'http://path/to/github/project'),
#         ]
extra_navlinks = [
        ('API Reference', 'http://docs.aws.amazon.com/AWSiOSSDK/latest/'),
        ('GitHub', 'https://github.com/aws/aws-sdk-ios'),
        ('Samples', 'https://github.com/awslabs/aws-sdk-ios-samples'),
        ('Download SDK',
            'http://sdk-for-ios.amazonwebservices.com/latest/aws-ios-sdk.zip'),
    ]

build_html = True
build_pdf = True #Or False if you don't build a pdf
build_mobi = False #Or the Kindle ASIN if you need a Kindle build

feedback_name = 'Mobile SDK Docs'

# For the url docs.aws.amazon.com/docset-root/version/guide-name
docset_path_slug = 'mobile'
version_path_slug = 'sdkforios'
guide_path_slug = 'developerguide'

#
# EXTRA_CONF_CONTENT -- don't change, move or remove this line!
#
# Any settings *below* this act as overrides for the default config content.
# Declare extlinks <http://sphinx-doc.org/latest/ext/extlinks.html> and
# additional configuration details specific to this documentation set here.

if 'extlinks' not in vars():
    extlinks = {}

# The feedback name is different than the service name...
html_theme_options = {} #['feedback_name'] = u'Mobile SDK Docs'

#-- Intersphinx mappings ------------------------------------------------------

# Mappings are used if you have more than one doc set that you'd like to refer
# to. The syntax is generally::
#
#  intersphinx_mapping = { 'mapname' : ('url', None) }
#
# For more information about intersphinx mappings, see:
#
# * http://sphinx-doc.org/latest/ext/intersphinx.html
#
aws_docs_url = 'http://' + aws_domains['documentation']
intersphinx_mapping = {
        'sdkforandroid': (aws_docs_url + '/mobile/sdkforandroid/developerguide', None),
#        'sdkforios': (aws_docs_url + '/mobile/sdkforios/developerguide', None),
        'sdkforunity': (aws_docs_url + '/mobile/sdkforunity/developerguide', None),
        'sdkforxamarin': (aws_docs_url + '/mobile/sdkforxamarin/developerguide', None),
        }

extlinks.update({
    # links to API pages or other non-standard guide links.
    'pol-dg': (aws_docs_url + '/lex/latest/developerguide/%s.html', ''),
    'lex-dg': (aws_docs_url + '/polly/latest/dg/%s.html', '')
})



## Code of Conduct
This project has adopted the [Amazon Open Source Code of Conduct](https://aws.github.io/code-of-conduct). 
For more information see the [Code of Conduct FAQ](https://aws.github.io/code-of-conduct-faq) or contact 
opensource-codeofconduct@amazon.com with any additional questions or comments.



gitdir: ../../../.git/modules/repos/awsdocs/aws-ios-developer-guide



============
NOTICE
============

**This repository is archived and the content on this branch is out of date.**
You can find up-to-date AWS technical documentation on the `AWS Documentation website <https://docs.aws.amazon.com/>`_, where you can also submit feedback and suggestions for improvement.

============
Announcement
============

This repository will be archived and marked read-only next month (June 2023).
For more information, read `the announcement on the AWS News Blog <https://aws.amazon.com/blogs/aws/retiring-the-aws-documentation-on-github/>`_.

You can find the corresponding content for this repo on `the AWS Documentation website <https://docs.aws.amazon.com>`_.
If you'd like to continue contributing to the quality of AWS documentation, you can submit feedback and suggestions for improvement there.

.. Copyright 2010-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

######################
AWS Mobile SDK for iOS
######################

This content has moved to the `AWS Mobile Developer Guide <https://docs.aws.amazon.com/aws-mobile/latest/developerguide/getting-started.html>`_.

The GitHub repository has moved to `https://github.com/awsdocs/aws-mobile-developer-guide/ <https://github.com/awsdocs/aws-mobile-developer-guide/>`_.





# NOTICE

This repository is archived, read-only, and no longer updated. For more information, read [the announcement on the AWS News Blog](https://aws.amazon.com/blogs/aws/retiring-the-aws-documentation-on-github/).

You can find up-to-date AWS technical documentation on the [AWS Documentation website](https://docs.aws.amazon.com/), where you can also submit feedback and suggestions for improvement.



Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved. 

The documentation is made available under the Creative Commons Attribution-ShareAlike 4.0 International License. See the LICENSE file.

The sample code within this documentation is made available under a modified MIT license. See the LICENSE-SAMPLECODE file.



Copyright 2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

Permission is hereby granted, free of charge, to any person obtaining a copy of this
software and associated documentation files (the "Software"), to deal in the Software
without restriction, including without limitation the rights to use, copy, modify,
merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.



build/
output/
shared-content



*Issue #, if available:*

*Description of changes:*


By submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

============================
What Is the AWS SDK for iOS?
============================

The AWS SDK for iOS is an open-source software development kit, distributed under an Apache Open Source license. The SDK for iOS provides a library, code samples, and documentation to help developers build connected mobile applications using AWS. This guide explains how to get started with the SDK for iOS, how to work with related mobile services such as Amazon Cognito and Amazon Mobile Analytics, and how to use Amazon Web Services effectively in a mobile app.

About the AWS Mobile Services
#############################

The AWS Mobile SDKs include client-side libraries for working with Amazon Web Services. These client libraries provide high-level, mobile-optimized interfaces to services such as Amazon DynamoDB, Amazon Simple Storage Service, and Amazon Kinesis.

The Mobile SDKs also include clients for Amazon Cognito; and Amazon Mobile Analytics |mdash| web services designed specifically for use by mobile developers.

Amazon Cognito
--------------

Amazon Cognito facilitates the delivery of scoped, temporary credentials to mobile
devices or other untrusted environments, and it uniquely identifies a device or user and
supplies the user with a consistent identity throughout the lifetime of an application.
The Amazon Cognito Sync service enables cross-device syncing of application-related user data.
Cognito also persists data locally, so that it's available even if the device is
offline.

After you've set up the SDK, you can start using Amazon Cognito by following the
instructions at :doc:`cognito-auth-aws-identity-for-ios` and :doc:`cognito-sync-data-across-devices-for-ios`.


Amazon Simple Storage Service (S3)
----------------------------------

Amazon Simple Storage Service (S3) provides secure, durable, highly-scalable object storage in the cloud. Using the AWS Mobile SDK, you can directly access Amazon S3 from your mobile app.

After you've set up the SDK, you can start using Amazon S3 by following
the instructions at :doc:`s3-simple-storage-service-for-ios`.

Amazon DynamoDB
---------------

Amazon DynamoDB is a fast, highly scalable, highly available, cost-effective, nonrelational database service. DynamoDB removes traditional scalability limitations on data storage while maintaining low latency and predictable performance.

After you've set up the SDK, you can start using Amazon DynamoDB by following
the instructions at :doc:`dynamodb-nosql-database-for-ios`.

Amazon Kinesis
--------------

Amazon Kinesis is a fully managed service for real-time processing of streaming data at massive scale.

After you've set up the SDK, you can start using Amazon Kinesis by following
the instructions at :doc:`kinesis-data-stream-processing-for-ios`.

AWS Lambda
----------

AWS Lambda is a compute service that runs your code in response to requests or events and automatically manages the compute resources for you, making it easy to build applications that respond quickly to new information.

After you've set up the SDK, you can start using AWS Lambda by following
the instructions at :doc:`lambda-serverless-business-logic-in-the-cloud-for-ios`.

Amazon Lex
----------

Amazon Lex is an AWS service for building  voice and text conversational interfaces into applications. With Amazon Lex, the same deep learning engine that powers Amazon Alexa is now available to any developer, enabling you to build sophisticated, natural language chatbots into your new and existing applications.

After you've set up the SDK, you can start using Amazon Lex by following
the instructions at :doc:`lex-natural-language-interface-for-ios`.

Amazon Polly
------------

Amazon Polly is a service that turns text into lifelike speech, making it easy to develop mobile applications that use high-quality speech to increase engagement and accessibility. With Amazon Polly you can  quickly build speech-enabled apps that work in multiple geographies.

After you've set up the SDK, you can start using Amazon Polly by following
the instructions at :doc:`polly-convert-text-to-speech-for-ios`.

Amazon Pinpoint
---------------

Using Amazon Pinpoint, you can create push notification campaigns that provide your users with timely, relevant, personalized information to encourage them to keep using your mobile app. You can use push notification campaigns to increase app awareness, downloads, and launches; build customer loyalty; and ultimately boost your mobile revenues.

After you've set up the SDK, you can start using Amazon Pinpoint by following
the instructions at :doc:`pinpoint-mobile-analytics-and-user-engagement-for-ios`.

Amazon Mobile Analytics
-----------------------

Amazon Mobile Analytics, which is now being rolled into Amazon Pinpoint, lets you collect, visualize,
and understand app usage for your mobile apps. Reports are available for metrics on active users, sessions,
retention, in-app revenue, and custom events, and can be filtered by platform and date range.

Amazon Pinpoint service offers analytics plus allows you to act programmatically on the data you gather through
customizable push user engagement. Existing Amazon Mobile Analytics objects/configurations are automatically ported to
Amazon Pinpoint. For the time being you can still use Amazon Mobile Analytics by following
the instructions at :doc:`analytics`.

About the SDK for iOS
#####################

The AWS SDK for iOS includes:

- *AWS iOS libraries* – APIs that hide much of
  the lower-level plumbing of the web service interface, including authentication,
  request retries, and error handling. Each service has its own library, so you can
  include libraries for only the services you need.

- *Code samples* – Practical examples of using
  the libraries to build applications.

- *Documentation* – Reference documentation for
  the AWS SDK for iOS.

The SDK is distributed as a :file:`.zip` file containing the following:

- :file:`LICENSE`
- :file:`NOTICE`
- :file:`README.md`
- **frameworks/**

  - :file:`AWSCore.framework`
  - :file:`AWSAutoScaling.framework`
  - :file:`AWSCloudWatch.framework`
  - :file:`AWSDynamoDB.framework`
  - :file:`AWSEC2.framework`
  - :file:`AWSElasticLoadBalancing.framework`
  - :file:`AWSKinesis.framework`
  - :file:`AWSLambda.framework`
  - :file:`AWSLex.framework`
  - :file:`AWSMachineLearning.framework`
  - :file:`AWSMobileAnalytics.framework`
  - :file:`AWSPinpoint.framework`
  - :file:`AWSPolly.framework`
  - :file:`AWSS3.framework`
  - :file:`AWSSES.framework`
  - :file:`AWSSimpleDB.framework`
  - :file:`AWSSNS.framework`
  - :file:`AWSSQS.framework`
- **extras/**

  - :file:`AWSCognito.framework` - The framework for Amazon Cognito sync.
  - :file:`Amazon Software License.txt`
  - :file:`NOTICE`

- **documentation/** – Contains documentation, including a docset, for the AWS SDK for iOS.
- **samples/** – Contains an HTML document that links to samples, which are named based on the services that they demonstrate.
- **src/** – Contains an HTML document that links to source, which contains the implementation and header files for the AWS iOS libraries.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon DynamoDB Low-level Client
################################

On this page:

.. contents::
   :local:
   :depth: 1


`Amazon DynamoDB <http://aws.amazon.com/dynamodb/>`_ is a fast, highly scalable,
highly available, cost-effective, nonrelational database service. Amazon DynamoDB removes traditional
scalability limitations on data storage while maintaining low latency and predictable
performance.

The AWS Mobile SDK for iOS provides both low-level and high-level libraries for working Amazon DynamoDB.

The low-level client described in this section allows the kind of direct access to Amazon DynamoDB tables useful for NoSQL and other non-relational data designs. The low-level client also supports conditional data writes to mitigate simultaneous write conflicts and batch data writes.

The high-level library includes :doc:`dynamodb-object-mapper`, which lets you map client-side classes to access and manipulate Amazon Dynamo tables.

Setup
=====

To set your project up to use the AWS SDK for iOS TransferUtility, take the following steps.

1. Setup the SDK, Credentials, and Services
-------------------------------------------

    Follow the steps described in :doc:`dynamodb-setup-for-ios` to install the AWS Mobile SDK for iOS and configure AWS services, credentials, and permissions.


2. Import the AWSDynamoDB APIs
------------------------------

Add the following import statement to your project.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSDynamoDB


        Objective-C
            .. code-block:: objc

                #import <AWSDynamoDB/AWSDynamoDB.h>

Conditional Writes Using the Low-Level Client
=============================================

In a multi-user environment, multiple clients can access the same item and attempt to modify its attribute values at the same time. To help clients coordinate writes to data items, the Amazon DynamoDB low-level client supports conditional writes for `PutItem`, `DeleteItem`, and `UpdateItem` operations. With a conditional write, an operation succeeds only if the item attributes meet one or more expected conditions; otherwise, it returns an error.

In the following example, we update the price of an item in the ``Books`` table if the ``Price`` attribute of the item has a value of ``999``.

    .. container:: option

        Swift
            .. code-block:: swift

                Amazon DynamoDB = AWSDynamoDB.default()
                let updateInput = AWSDynamoDBUpdateItemInput()

                let hashKeyValue = AWSDynamoDBAttributeValue()
                hashKeyValue?.s = "4567890123"

                updateInput?.tableName = "Books"
                updateInput?.key = ["ISBN": hashKeyValue!]

                let oldPrice = AWSDynamoDBAttributeValue()
                oldPrice?.n = "999"

                let expectedValue = AWSDynamoDBExpectedAttributeValue()
                expectedValue?.value = oldPrice

                let newPrice = AWSDynamoDBAttributeValue()
                newPrice?.n = "1199"

                let valueUpdate = AWSDynamoDBAttributeValueUpdate()
                valueUpdate?.value = newPrice
                valueUpdate?.action = .put

                updateInput?.attributeUpdates = ["Price": valueUpdate!]
                updateInput?.expected = ["Price": expectedValue!]
                updateInput?.returnValues = .updatedNew

               Amazon DynamoDB.updateItem(updateInput!).continueWith { (task:AWSTask<AWSDynamoDBUpdateItemOutput>) -> Any? in
                    if let error = task.error as? NSError {
                        print("The request failed. Error: \(error)")
                        return nil
                    }

                    // Do something with task.result

                    return nil
                }


        Objective-C
            .. code-block:: objc

                AWSDynamoDB *dynamoDB = [AWSDynamoDB defaultDynamoDB];
                AWSDynamoDBUpdateItemInput *updateInput = [AWSDynamoDBUpdateItemInput new];

                AWSDynamoDBAttributeValue *hashKeyValue = [AWSDynamoDBAttributeValue new];
                hashKeyValue.S = @"4567890123";

                updateInput.tableName = @"Books";
                updateInput.key = @{ @"ISBN" : hashKeyValue };

                AWSDynamoDBAttributeValue *oldPrice = [AWSDynamoDBAttributeValue new];
                oldPrice.N = @"999";

                AWSDynamoDBExpectedAttributeValue *expectedValue = [AWSDynamoDBExpectedAttributeValue new];
                expectedValue.value = oldPrice;

                AWSDynamoDBAttributeValue *newPrice = [AWSDynamoDBAttributeValue new];
                newPrice.N = @"1199";

                AWSDynamoDBAttributeValueUpdate *valueUpdate = [AWSDynamoDBAttributeValueUpdate new];
                valueUpdate.value = newPrice;
                valueUpdate.action = AWSDynamoDBAttributeActionPut;

                updateInput.attributeUpdates = @{@"Price": valueUpdate};
                updateInput.expected = @{@"Price": expectedValue};
                updateInput.returnValues = AWSDynamoDBReturnValueUpdatedNew;

                [[dynamoDB updateItem:updateInput]
                 continueWithBlock:^id(AWSTask *task) {
                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else {
                         //Do something with task.result.
                     }
                     return nil;
                 }];

Conditional writes are idempotent. In other words, if a conditional write request is made multiple times, the update will be performed only in the first instance unless the content of the request changes. In the preceding example, sending the same request a second time results in a `ConditionalCheckFailedException`, because the expected condition is not met after the first update.

.. _batch-operations:

Batch Operations Using the Low-Level Client
===========================================

The Amazon DynamoDB low-level client provides batch write operations to put items in the database and delete items from the database. You can also use batch get operations to return the attributes of one or more items from one or more tables.

The following example shows a batch write operation.

    .. container:: option

        Swift
            .. code-block:: swift

                Amazon DynamoDB = AWSDynamoDB.default()

                //Write Request 1
                let hashValue1 = AWSDynamoDBAttributeValue()
                hashValue1?.s = "3210987654"
                let otherValue1 = AWSDynamoDBAttributeValue()
                otherValue1?.s = "Some Title"

                let writeRequest = AWSDynamoDBWriteRequest()
                writeRequest?.putRequest = AWSDynamoDBPutRequest()
                writeRequest?.putRequest?.item = ["ISBN": hashValue1!, "Title": otherValue1!]

                //Write Request 2
                let hashValue2 = AWSDynamoDBAttributeValue()
                hashValue2?.s = "8901234567"
                let otherValue2 = AWSDynamoDBAttributeValue()
                otherValue2?.s = "Another Title"

                let writeRequest2 = AWSDynamoDBWriteRequest()
                writeRequest2?.putRequest = AWSDynamoDBPutRequest()
                writeRequest2?.putRequest?.item = ["ISBN": hashValue2!, "Title": otherValue2!]

                let batchWriteItemInput = AWSDynamoDBBatchWriteItemInput()
                batchWriteItemInput?.requestItems = ["Books": [writeRequest!, writeRequest2!]]

               Amazon DynamoDB.batchWriteItem(batchWriteItemInput!).continueWith { (task:AWSTask<AWSDynamoDBBatchWriteItemOutput>) -> Any? in
                    if let error = task.error as? NSError {
                        print("The request failed. Error: \(error)")
                        return nil
                    }

                    // Do something with task.result

                    return nil
                }

        Objective-C
            .. code-block:: objc

                AWSDynamoDB *dynamoDB = [AWSDynamoDB defaultDynamoDB];

                //Write Request 1
                AWSDynamoDBAttributeValue *hashValue1 = [AWSDynamoDBAttributeValue new];
                hashValue1.S = @"3210987654";
                AWSDynamoDBAttributeValue *otherValue1 = [AWSDynamoDBAttributeValue new];
                otherValue1.S = @"Some Title";

                AWSDynamoDBWriteRequest *writeRequest = [AWSDynamoDBWriteRequest new];
                writeRequest.putRequest = [AWSDynamoDBPutRequest new];
                writeRequest.putRequest.item = @{
                                                 @"ISBN" : hashValue1,
                                                 @"Title" : otherValue1
                                                 };

                //Write Request 2
                AWSDynamoDBAttributeValue *hashValue2 = [AWSDynamoDBAttributeValue new];
                hashValue2.S = @"8901234567";
                AWSDynamoDBAttributeValue *otherValue2 = [AWSDynamoDBAttributeValue new];
                otherValue2.S = @"Another Title";

                AWSDynamoDBWriteRequest *writeRequest2 = [AWSDynamoDBWriteRequest new];
                writeRequest2.putRequest = [AWSDynamoDBPutRequest new];
                writeRequest2.putRequest.item = @{
                                                @"ISBN" : hashValue2,
                                                @"Title" : otherValue2
                                                };

                AWSDynamoDBBatchWriteItemInput *batchWriteItemInput = [AWSDynamoDBBatchWriteItemInput new];
                batchWriteItemInput.requestItems = @{@"Books": @[writeRequest,writeRequest2]};

                [[dynamoDB batchWriteItem:batchWriteItemInput]
                 continueWithBlock:^id(AWSTask *task) {
                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else  {
                        //Do something with task.result.
                    }
                    return nil;
                }];

Additional Resources
====================

* `Amazon DynamoDB Developer Guide <http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/>`_
* `Amazon DynamoDB API Reference <http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/>`_




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon S3 Server-Side Encryption Support in iOS
################################################

The AWS Mobile SDK for iOS supports server-side encryption of Amazon S3 data. To learn more about server-side
encryption, see `PUT Object <http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html>`_.

The following properties are available to configure the encryption:

* `SSECustomerAlgorithm <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSS3ReplicateObjectOutput.html#//api/name/SSECustomerAlgorithm>`_
* `SSECustomerKey <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSS3UploadPartRequest.html#//api/name/SSECustomerKey>`_
* `SSECustomerKeyMD5 <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSS3PutObjectOutput.html#//api/name/SSECustomerKeyMD5>`_
* `AWSS3ServerSideEncryption <http://docs.aws.amazon.com/AWSiOSSDK/latest/Constants/AWSS3ServerSideEncryption.html>`_

To use these properties, import the ``AWSSS3Model`` with the following statement.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSS3

        Objective-C
            .. code-block:: objc

                #import <AWSS3/AWSS3.h>

``SSECustomerAlgorithm`` is a property of ``AWSS3ReplicateObjectOutput``. If server-side encryption
with a customer-provided encryption key was requested, the response will include this header,
which confirms the encryption algorithm that was used. Currently, the only valid option is AES256. You can
access ``SSECustomerAlgorithm`` as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                let replicateObjectOutput = AWSS3ReplicateObjectOutput()
                replicateObjectOutput?.sseCustomerAlgorithm = "mySseCustomerAlgorithm

        Objective-C
            .. code-block:: objc

                AWSS3ReplicateObjectOutput *replicateObjectOutput = [AWSS3ReplicateObjectOutput new];
                replicateObjectOutput.SSECustomerAlgorithm = @"mySseCustomerAlgorithm";

``SSECustomerKey``, a property of ``AWSS3UploadPartRequest``, specifies the customer-provided
encryption key for Amazon S3 to use to encrypting data. This value is used to store the object,
and is then discarded; Amazon doesn't store the encryption key. The key must be appropriate for
use with the algorithm specified in the ``x-amz-server-side-encryption-customer-algorithm`` header.
This must be the same encryption key specified in the request to initiate a multipart upload. You
can access SSECustomerKey as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                let uploadPartRequest = AWSS3UploadPartRequest()
                uploadPartRequest?.sseCustomerKey = "customerProvidedEncryptionKey"


        Objective-C
            .. code-block:: objc

                AWSS3UploadPartRequest *uploadPartRequest = [AWSS3UploadPartRequest new];
                uploadPartRequest.SSECustomerKey = @"customerProvidedEncryptionKey";

``SSECustomerKeyMD5`` is a property of ``AWSS3PutObjectOutput``. If server-side encryption
with a customer-provided encryption key is requested, the response will include this
header. The response provides round trip message integrity verification of the customer-provided
encryption key. You can access ``SSECustomerKeyMD5`` as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                let objectOutput = AWSS3PutObjectOutput()
                // Access objectOutput?.sseCustomerKeyMD5 ...

        Objective-C
            .. code-block:: objc

                AWSS3PutObjectOutput *objectOutput = [AWSS3PutObjectOutput new];
                //Access objectOutput.SSECustomerKeyMD5 ...

``AWSS3ServerSideEncryption`` represents the encryption algorithm for storing an object in Amazon S3. You
can access it as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                let objectOutput = AWSS3PutObjectOutput()
                // Access objectOutput?.sseCustomerKeyMD5 ...


        Objective-C
            .. code-block:: objc

                AWSS3ReplicateObjectOutput *replicateObjectOutput = [AWSS3ReplicateObjectOutput new];
                // Access replicateObjectOutput.serverSideEncryption ...

Additional Resources
====================

* `Amazon Simple Storage Service Getting Started Guide <http://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html>`_
* `Amazon Simple Storage Service API Reference <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_
* `Amazon Simple Storage Service Developer Guide <http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html>`_

.. _Identity and Access Management Console: https://console.aws.amazon.com/iam/home
.. _Granting Access to an Amazon S3 Bucket: http://blogs.aws.amazon.com/security/post/Tx3VRSWZ6B3SHAV/Writing-IAM-Policies-How-to-grant-access-to-an-Amazon-S3-bucket



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

About Amazon Web Services
-------------------------

*Amazon Web Services* (AWS) is a collection of digital infrastructure services that developers can
leverage when developing their applications. The services include computing, storage, database, and
application synchronization (messaging and queuing). AWS uses a pay-as-you-go service model: you are
charged only for the services that you |mdash| or your applications |mdash| use. For new AWS users,
a free usage tier is available. On this tier, services are free below a certain level of usage. For
more information about AWS costs and the Free Tier, see `Use the AWS Free Tier`__.  To obtain an AWS
account, visit the `AWS home page`__ and click **Create a Free Account**.

.. __: https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/billing-free-tier.html
.. __: https://aws.amazon.com/




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon S3: Store and Retrieve Files and Data
############################################

`Amazon Simple Storage Service (S3) <http://aws.amazon.com/s3/>`_ provides secure,
durable, highly-scalable object storage in the cloud. Using the AWS Mobile SDK, you can
directly access Amazon S3 from your mobile app.

In this section:

.. toctree::
   :maxdepth: 1
   :titlesonly:

   Setup for Amazon S3 Integration <s3-setup-for-ios>
   TransferManager for File Transfers <s3transfermanager>
   TransferUtility for File and Data Transfers <s3transferutility>
   Presigned URLs for File Access <s3-pre-signed-urls>
   Server-side Encryption for Transfers <s3-server-side-encryption>

.. _manager-or-utility:

Should I Use TransferManager or TransferUtility?
================================================

Both the Amazon S3 TransferManager and TransferUtitliy classes make it easy for you to upload and download files from Amazon S3 while optimizing for performance and reliability. Both hide the complexity of making asynchronous file transfers behind simple APIs. Both provide the ability to pause, resume, and cancel file transfers.

The differences are as follows.

- Use ``TransferUtility`` to:

  - Make background file or data transfers that complete even if the system suspends an app invoking the transfer

  - Transfer binary data to a file with out saving a file at the transfer source location first.

- Use ``TransferManager`` to make file transfers that happen while the app is in the foreground.

  Whenever possible, ``TransferManager`` uploads are broken up into multiple pieces. Several pieces can be sent in parallel to provide better throughput that is resilient to I/O errors.

Additional Resources
====================

For information about Amazon S3 regional availability, see  `AWS Service Region Availability <http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.

* `Amazon Simple Storage Service Getting Started Guide <http://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html>`_
* `Amazon Simple Storage Service API Reference <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_
* `Amazon Simple Storage Service Developer Guide <http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html>`_

.. _Identity and Access Management Console: https://console.aws.amazon.com/iam/home
.. _Granting Access to an Amazon S3 Bucket: http://blogs.aws.amazon.com/security/post/Tx3VRSWZ6B3SHAV/Writing-IAM-Policies-How-to-grant-access-to-an-Amazon-S3-bucket



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon Machine Learning
=======================

Amazon Machine Learning (ML) is a service that makes it easy for developers of all skill levels to use machine learning technology.
The SDK for iOS provides a simple, high-level client designed to help you interface with Amazon Machine Learning service. The client enables you to call Amazon ML's real-time API to retrieve predictions from your models and enables you to build mobile applications that request and take actions on predictions. The client also enables you to retrieve the real-time prediction endpoint URLs for your ML models.

Integrate Amazon Machine Learning
---------------------------------

To use the Amazon Machine Learning mobile client, you’ll need to integrate the SDK for iOS into your app and import the necessary libraries. To do so, follow these steps:

#. Download the SDK and unzip it as described in
`Setup the SDK for iOS <http://docs.aws.amazon.com/mobile/sdkforios/developerguide/setup-aws-sdk-for-ios.html>`_
#. The instructions direct you to import the headers for the services you’ll be using. For Amazon Machine
Learning, you need the following import.

  .. container:: option

        Swift
          .. code-block:: swift

              import AWSMachineLearning

        Objective C
          .. code-block:: objectivec

              #import <AWSMachineLearning/AWSMachineLearning.h>

Configure Credentials
^^^^^^^^^^^^^^^^^^^^^

You can use Amazon Cognito to provide temporary AWS credentials to your application. These credentials let the app access your AWS resources. To create a credentials provider, follow the instructions at `Providing AWS Credentials <http://docs.aws.amazon.com/mobile/sdkforios/developerguide/cognito-auth-aws-identity-for-ios.html#providing-aws-credsentials>`_.

To use Amazon Machine Learning in an application, you must set the proper permissions. The following IAM policy allows the user to perform the actions shown in this tutorial on two actions identified by ARN.

    .. code-block:: json

        {
            "Statement": [{
            "Effect": "Allow",
            "Action": [
                "machinelearning:GetMLModel",
                "machinelearning:Predict"
            ],
            "Resource": "arn:aws:machinelearning:use-east-1:11122233444:mlmodel/example-model-id"
            }]
        }

This policy should be applied to roles assigned to the Amazon Cognito identity pool, but you will need to replace the Resource value with the correct account ID and ML Model ID. You can apply policies at the `IAM console <https://console.aws.amazon.com/iam/home>`_. To learn more about IAM policies, see `Introduction to IAM <http://docs.aws.amazon.com/IAM/latest/UserGuide/IAM_Introduction.html>`_.

Create an Amazon Machine Learning Client
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Once you've imported the necessary libraries and have your credentials object, you can instantiate AWSMachineLearningGetMLModelInput.

    .. container:: option

        Swift
          .. code-block:: swift

            let getMlModelInput = AWSMachineLearningGetMLModelInput()

        Objective C
            .. code-block:: objectivec

                AWSMachineLearningGetMLModelInput *getMLModelInput = [AWSMachineLearningGetMLModelInput new];

Making a Predict Request
^^^^^^^^^^^^^^^^^^^^^^^^

Prior to calling Predict, make sure you have not only a completed ML Model ID but also a created real-time endpoint for that ML Model ID. This cannot be done through the mobile SDK; you will have to use the `Machine Learning Console <https://console.aws.amazon.com/machinelearning>`_ or an alternate `SDK <http://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/welcome.html>`_. To validate that this ML can be used for real-time Predictions.

    .. container:: option

        Swift
            .. code-block:: swift

                // Use a created model that has a created real-time endpoint
                let mlModelId = "example-model-id";
                // Call GetMLModel to get the realtime endpoint URL
                let getMlModelInput = AWSMachineLearningGetMLModelInput()
                getMlModelInput!.mlModelId = mlModelId;

                machineLearning.getMLModel(getMlModelInput!).continueOnSuccessWith { (task) -> Any? in
                    if let getMLModelOutput = task.result {

                        if (getMLModelOutput.status != AWSMachineLearningEntityStatus.completed) {
                                print("ML Model is not completed");
                                return nil;
                        }
             
                        // Validate that the realtime endpoint is ready
                        if (getMLModelOutput.endpointInfo!.endpointStatus != AWSMachineLearningRealtimeEndpointStatus.ready) {
                            print("Realtime endpoint is not ready");
                            return nil;
                        }
                    }

                return nil
                }

        Objective C
          .. code-block:: objectivec

                // Use a created model that has a created real-time endpoint
                NSString *MLModelId = @"example-model-id";

                // Call GetMLModel to get the realtime endpoint URL
                AWSMachineLearningGetMLModelInput *getMLModelInput = [AWSMachineLearningGetMLModelInput new];
                getMLModelInput.MLModelId = MLModelId;

                [[[MachineLearning getMLModel:getMLModelInput] continueWithSuccessBlock:^id(AWSTask *task) {
                    AWSMachineLearningGetMLModelOutput *getMLModelOutput = task.result;

                    // Validate that the ML model is completed
                    if (getMLModelOutput.status != AWSMachineLearningEntityStatusCompleted) {
                        NSLog(@"ML Model is not completed");
                        return nil;
                    }

                    // Validate that the realtime endpoint is ready
                    if (getMLModelOutput.endpointInfo.endpointStatus != AWSMachineLearningRealtimeEndpointStatusReady) {
                        NSLog(@"Realtime endpoint is not ready");
                        return nil;
                    }
                }

Once the real-time endpoint is ready, we can begin calling Predict. Note that you must pass the real-time endpoint through the PredictRequest.

    .. container:: option

        Swift
          .. code-block:: swift

                // Create a Predict request with your ML Model id and the appropriate
                let predictInput = AWSMachineLearningPredictInput()
                predictInput!.predictEndpoint = getMLModelOutput.endpointInfo!.endpointUrl;
                predictInput!.mlModelId = mlModelId;
                predictInput!.record = record
         
                return machineLearning.predict(predictInput!)

        Objective C
          .. code-block:: objectivec

                // Create a Predict request with your ML Model id and the appropriate Record mapping.
                AWSMachineLearningPredictInput *predictInput = [AWSMachineLearningPredictInput new];
                predictInput.predictEndpoint = getMLModelOutput.endpointInfo.endpointUrl;
                predictInput.MLModelId = MLModelId;
                predictInput.record = @{};

                // Call and return prediction
                return [MachineLearning predict:predictInput];

Additional Resources

- `Developer Guide <http://docs.aws.amazon.com/machine-learning/latest/dg>`_
- `API Reference <http://docs.aws.amazon.com/machine-learning/latest/APIReference>`_



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon Cognito for iOS
######################

For your app to access AWS services and resources, it must facilitate getting an identity within AWS
for each user. Use Amazon Cognito to create unique identities for your users. Amazon Cognito
identities can be unauthenticated, or they can use a range of methods to sign in and become authenticated.
For more information, see :ref:`integrating-identity-providers`.

For information about Amazon Cognito Region availability, see `AWS Service Region Availability <http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.


Providing AWS Credentials
=========================

Most implementations of AWS services for mobile app features require identity management through Amazon Cognito. The following steps describe how to  AWS credentials to your app users.

In this section:

.. contents::
   :local:
   :depth: 1

1. Create an identity pool and roles
------------------------------------

   Take the following steps to create a new identity pool with `Auth` and `Unauth` roles.

   #. Sign in to the `Amazon Cognito console <https://console.aws.amazon.com/cognito/>`_.

   #. Choose :guilabel:`Manage Federated Identities`.

   #. Choose :guilabel:`Create new identity pool`.

   #. Type an :guilabel:`Identity pool name`.

   #. Optional: Select :guilabel:`Enable access to unauthenticated identities`.

   #. Choose :guilabel:`Create Pool`.

   #. Choose :guilabel:`View Details` to review or edit the role names and default access policy JSON document
      for the identity pool you just created. Note the names of your `Auth` and
      `Unauth` roles. You will use them to enact access policy for the AWS resources you use.

   #. Choose: :guilabel:`Allow`.

   #. Choose the language of your app code in the :guilabel:`Platform` menu. Note the `identityPoolId`
      value in the sample code provided.

   For more information, see :ref:`create-identity-pool`.

2. Add the AWS SDK for iOS to your project
------------------------------------------

Follow the steps in :doc:`setup-aws-sdk-for-ios`.

3. Import `AWScore` and Amazon Cognito APIs
--------------------------------------------

Add the following imports to your project.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSCore
                import AWSCognito

        Objective-C
            .. code-block:: objc

                #import <AWSCore/AWSCore.h>
                #import <AWSCognito/AWSCognito.h>

4. Initialize the Amazon Cognito credentials provider
-----------------------------------------------------

Use the following code, replacing the value of `YourIdentityPoolId` with the
`identitPoolId` value you noted when you created your identity pool.

    .. container:: option

        Swift
            .. code-block:: swift

                let credentialProvider = AWSCognitoCredentialsProvider(regionType: .USEast1, identityPoolId: "YourIdentityPoolId")
                let configuration = AWSServiceConfiguration(region: .USEast1, credentialsProvider: credentialProvider)
                AWSServiceManager.default().defaultServiceConfiguration = configuration

        Objective-C
            .. code-block:: objc

                AWSCognitoCredentialsProvider *credentialsProvider = [[AWSCognitoCredentialsProvider alloc] initWithRegionType:AWSRegionUSEast1
                identityPoolId:@"YourIdentityPoolId"];

                AWSServiceConfiguration *configuration = [[AWSServiceConfiguration alloc] initWithRegion:AWSRegionUSEast1 credentialsProvider:credentialsProvider];

                AWSServiceManager.defaultServiceManager.defaultServiceConfiguration = configuration;

    .. note::

      If you created your identity pool before February 2015, you must reassociate your roles with your identity pool to use this constructor. To do so, open the `Amazon Cognito console <https://console.aws.amazon.com/cognito/>`_, select your identity pool, choose :guilabel:`Edit Identity Pool`, specify your authenticated and unauthenticated roles, and save the changes


5. Retrieve Amazon Cognito IDs and AWS Credentials
--------------------------------------------------

   After   the login tokens are set in the credentials provider, you can retrieve a unique
   Amazon Cognito identifier for your end user and temporary credentials that let the app access
   your AWS resources.

    .. container:: option

        Swift
            .. code-block:: swift

                let cognitoId = credentialsProvider.identityId

        Objective-C
            .. code-block:: objc

                // Retrieve your Amazon Cognito ID.
                NSString *cognitoId = credentialsProvider.identityId;

   The unique identifier is available in the ``identityId`` property of the credentials provider object.

   The `credentialsProvider` communicates with Amazon Cognito, retrieving a unique identifier for the user as well as temporary, limited privilege AWS credentials for the AWS Mobile SDK. The retrieved credentials are valid for one hour.


.. _create-identity-pool:

Identity Pools and IAM Roles
============================

To use Amazon Cognito to incorporate sign-in through an external identity provider into your
app, create an `Amazon Cognito identity pool <http://docs.aws.amazon.com/cognito/latest/developerguide/identity-pools.html>`_.

An identity in a pool gets access to the AWS resources used by your app by being assigned a
role in AWS Identity and Access Management (IAM). The access level of an IAM role is
defined by the policy that is attached to it. Typical roles for identity pools allow you to
give different levels of access to authenticated (`Auth`)or signed in users, and unauthenticated (`Unauth`)users.

For more information on identity pools, see `Amazon Cognito Identity: Using Federated Identities <https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html>`_.

For more information on using IAM roles with Amazon Cognito, see `IAM Roles <https://docs.aws.amazon.com/cognito/latest/developerguide/iam-roles.html>`_ in the *Amazon Cognito Developer Guide*.


.. _integrating-identity-providers:

Integrating Identity Providers
==============================

Amazon Cognito identities can be unauthenticated or use a range of methods to sign in and become authenticated, including:

    * Federating with an `external provider <http://docs.aws.amazon.com/cognito/latest/developerguide/external-identity-providers.html>`_ such as Google or Facebook


        * For external providers, a developer account and an application registered with the identity provider
          you want to use (`Facebook <https://developers.facebook.com/>`_,
          `Google <https://developers.google.com/>`_,  or `Amazon <http://login.amazon.com/>`_)


    * Federating with a `SAML Provider <http://docs.aws.amazon.com/cognito/latest/developerguide/saml-identity-provider.html>`_ such as a Microsoft Active Directory instance

        * For SAML federation, the SAML federation metadata for the authenticating system

    * Federating with your existing custom authentication provider using `developer authenticated identities <http://docs.aws.amazon.com/cognito/latest/developerguide/developer-authenticated-identities.html>`_

    * Creating your own AWS-managed identity provider using `Amazon Cognito User Pool <http://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html>`_

Then, each time your mobile app interacts with Amazon Cognito, your user's identity is given a set of temporary
credentials that give secure access to the AWS resources configured for your app.

For information see, `External Identity Providers <http://docs.aws.amazon.com/cognito/devguide/identity/external-providers/>`_ in the *Amazon Cognito Developer Guide*.

Related Documentation
---------------------
:doc:`cognito-sync-data-across-devices-for-ios`

`Developer Authenticated Identities`_


.. _Cognito Console: https://console.aws.amazon.com/cognito
.. _Developer Authenticated Identities: http://docs.aws.amazon.com/cognito/latest/developerguide/developer-authenticated-identities.html



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon DynamoDB: Store and Retrieve Data
########################################

In this section:

.. toctree::
   :maxdepth: 1
   :titlesonly:

   Setup for Amazon DynamoDB for iOS <dynamodb-setup-for-ios>
   Amazon DynamoDB DynamoDBMapper <dynamodb-object-mapper>
   Amazon DynamoDB Low-level Client <dynamodb-low-level-client>


`Amazon DynamoDB <http://aws.amazon.com/dynamodb/>`_ is a fast, highly scalable,
highly available, cost-effective, non-relational database service. Amazon DynamoDB removes traditional
scalability limitations on data storage while maintaining low latency and predictable
performance.

The AWS Mobile SDK for iOS provides both low-level and high-level libraries for working with Amazon DynamoDB.
Both allow you to perform create, read, update, and delete (CRUD) operations and to execute queries and scans.

The high-level library includes Amazon DynamoDB object mapper which lets you map client-side classes to tables. Working within the data model defined on your client you can write simple, readable code that stores and retrieves objects in the cloud.  See :doc:`dynamodb-object-mapper`.

The low-level client allows you to access and manipulate Amazon DynamoDB tables directly for NoSQL or other non-relational data designs. The low-level library also supports conditional writes, to mitigate issues with simultaneous writes by multiple users, and batch operations. See :doc:`dynamodb-low-level-client`.

Get Started
===========

You can explore Amazon DynamoDB in the following ways:

- :doc:`dynamodb-setup-for-ios`: Use the walkthroughs provided in this SDK.

- `Try the NoSQL Database feature in the AWS Mobile Hub console <https://aws.amazon.com/mobile>`_:

    - Intuitively design and provisioning of AWS services in minutes
    - Quickstart app demonstrating the services you configure (Android, Swift, or Objective-C)
    - SDK with helper code that can be dropped into your Xcode project
    - Step-by-step instructions for integrating your services into an existing mobile app

    Sign in with your AWS account and create a Mobile hub project - both free - then select NoSQL Database.

- `DynamoDB sample <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/DynamoDBObjectMapper-Sample>`_:
  Download and build the sample app from Github


Additional Resources
====================

* For information Amazon DynamoDB Region availability, see  `AWS Service Region Availability
  <http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.
* `Amazon DynamoDB Developer Guide <http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/>`_
* `Amazon DynamoDB API Reference <http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/>`_




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon DynamoDB Integration Setup
#################################

This section provides a step-by-step guide for getting started with Amazon DynamoDB using the AWS Mobile SDK for iOS.

Get the SDK
-----------

To use Amazon DynamoDB in your mobile app, first set up the AWS Mobile SDK for iOS:

#. Download the iOS SDK and include it in your iOS project, as described in :doc:`setup-aws-sdk-for-ios`.

#. Install the SDK

   Add the AWS SDK for iOS to your project and import the APIs you need, by following the steps
   in :doc:`setup-aws-sdk-for-ios`.

#. Configure credentials

   To use Amazon Cognito to create AWS identities and credentials that give your users access to your app's AWS resources, follow the steps in :doc:`cognito-auth-aws-identity-for-ios`.

For more information on setting up the Amazon Cognito client, see `Using Federated Identities <http://docs.aws.amazon.com/cognito/devguide/identity/>`_ in the `Amazon Cognito Developer Guide`.


Create an Amazon DynamoDB Table and Index
-----------------------------------------

This tutorial is based on a simple bookstore app. The app tracks the books that are available in the bookstore using an Amazon DynamoDB table.

To create the Books table:

#. Sign in to the `Amazon DynamoDB Console <https://console.aws.amazon.com/dynamodb/home>`_.
#. Choose :guilabel:`Create Table`.
#. Type :command:`Books` as the name of the table.
#. Enter :command:`ISBN` in the :guilabel:`Partition key` field of the :guilabel:`Primary key` with :guilabel:`String` as their type.
#. Clear the :guilabel:`Use default settings` checkbox and choose :guilabel:`+ Add Index`.
#. In the :guilabel:`Add Index` dialog type :command:`Author` with :guilabel:`String` as the type.
#. Check the :guilabel:`Add sort key` checkbox and enter :command:`Title` as the sort key value, with :guilabel:`String` as its type.
#. Leave the other values at their defaults. Choose :guilabel:`Add index` to add the :command:`Author-Title-index` index.
#. Set the read capacity to `10` and the write capacity to `5`.
#. Choose :guilabel:`Create`.Amazon DynamoDB will create your database.
#. Refresh the console and choose your Books table from the list of tables.
#. Open the :guilabel:`Overview` tab and copy or note the Amazon Resource Name (ARN). You need this for the next procedure.

Set Permissions
---------------

To use Amazon DynamoDB in your mobile app, you must set the correct permissions. The following IAM policy allows the user to perform the actions shown in this tutorial on two resources (a table and an index) identified by an `ARN <http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html>`_.

    .. code-block:: json

        {
            "Statement": [{
                "Effect": "Allow",
                "Action": [
                    "dynamodb:DeleteItem",
                    "dynamodb:GetItem",
                    "dynamodb:PutItem",
                    "dynamodb:Scan",
                    "dynamodb:Query",
                    "dynamodb:UpdateItem",
                    "dynamodb:BatchWriteItem"
                ],
                "Resource": [
                    "arn:aws:dynamodb:us-west-2:123456789012:table/Books",
                    "arn:aws:dynamodb:us-west-2:123456789012:table/Books/index/*"
                ]
            }]
        }

Apply this policy to the unauthenticated role assigned to your Amazon Cognito identity pool, replacing the `Resource` values with the correct ARN for the Amazon DynamoDB table:

#. Sign in to the `IAM console <https://console.aws.amazon.com/iam>`_.
#. Choose :guilabel:`Roles` and then choose the "Unauth" role that Amazon Cognito created for you.
#. Choose :guilabel:`Attach Role Policy`.
#. Choose :guilabel:`Custom Policy` and then Choose :guilabel:`Select`.
#. Type a name for your policy and paste in the policy document shown above, replacing the `Resource` values with the ARNs for your table and index. (You can retrieve the table ARN from the :guilabel:`Details` tab of the database; then append :file:`/index/*` to obtain the value for the index ARN.
#. Choose :guilabel:`Apply Policy`.

To learn more about IAM policies, see `Using IAM <http://docs.aws.amazon.com/IAM/latest/UserGuide/IAM_Introduction.html>`_. To learn more about creating fine-grained access policies for Amazon DynamoDB, see `DynamoDB on Mobile – Part 5: Fine-Grained Access Control <https://aws.amazon.com/blogs/mobile/dynamodb-on-mobile-part-5-fine-grained-access-control/>`_.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

===============================================
Getting Started with the AWS Mobile SDK for iOS
===============================================

The AWS SDK for iOS provides the libraries, samples and, documentation needed to call AWS services from iOS apps. This Getting Started section covers the topics that are common to iOS apps that utilize AWS services, including:

.. toctree::
   :maxdepth: 2
   :titlesonly:

   setup-aws-sdk-for-ios
   cognito-auth-aws-identity-for-ios
   aws-aysnchronous-tasks-for-ios
   ats

For more information about the AWS SDK for iOS see :doc:`Welcome`.

For more information about other AWS SDKs see `AWS Mobile SDK`_.

.. _AWS Mobile SDK: http://aws.amazon.com/mobile/sdk/



.. project-specific includes for this project.

..
.. |dg| replace:: Developer Guide
.. |LEXlong| replace:: Amazon Lex
.. |LEX| replace:: Amazon Lex
.. |LEX-dg| replace:: |LEX| |dg|
.. |POL| replace:: Amazon Polly
.. |POLong| replace:: Amazon Polly
.. |POL-dg| replace:: |POL| |dg|

.. _LEX: http://docs.aws.amazon.com/lex
.. _LEXlong: LEX_
.. _LEX-dg: http://docs.aws.amazon.com/lex/latest/dg/
.. _POL: http://docs.aws.amazon.com/polly
.. _POL-dg: http://docs.aws.amazon.com/polly/latest/dg/
.. _POLlong: POL_
.. _sdk-lex-dl: http://x.zip



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon Cognito Sync: Sync User Data
###################################

Authenticate Users with Amazon Cognito Identity
-----------------------------------------------

Amazon Cognito Identity provides secure access to AWS services. Identities are managed by an identity pool. Roles specify resources an identity can access and are associated with an identity pool. To create an identity pool for your application:

#. Log into the `Amazon Cognito console <https://console.aws.amazon.com/cognito/>`_ and click the :guilabel:`New Identity Pool` button
#. Give your Identity Pool a unique name and enable access to unauthenticated identities
#. Click the :guilabel:`Create Pool` button and then the :guilabel:`Update Roles` to create your identity pool and associated roles

For more information on Amazon Cognito Identity, see :doc:`cognito-auth-aws-identity-for-ios`

.. note::

    The auto-generated Roles include the permissions needed to access Amazon Cognito Sync, so no further configuration is required.

The next page displays code that creates a credential provider that provides a Amazon Cognito Identity for your app to use. Copy the code from Steps 1 & 2 into your AppDelegate.m file as shown below:

Add the following import statements:

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSCore
                import AWSCognito

        Objective-C
            .. code-block:: objc

                #import <AWSCore/AWSCore.h>
                #import <AWSCognito/AWSCognito.h>

If you have an existing AWS credential provider, add the following code to `application:didFinishLaunchingWithOptions` method:

    .. container:: option

        Swift
            .. code-block:: swift

                let credentialProvider = AWSCognitoCredentialsProvider(regionType: .USEast1, identityPoolId: "YourIdentityPoolId")
                let configuration = AWSServiceConfiguration(region: .USEast1, credentialsProvider: credentialProvider)
                AWSServiceManager.default().defaultServiceConfiguration = configuration


        Objective-C
            .. code-block:: objc

                AWSCognitoCredentialsProvider *credentialsProvider = [[AWSCognitoCredentialsProvider alloc] initWithRegionType:AWSRegionUSEast1
                identityPoolId:@"<your-identity-pool-arn>"];

                AWSServiceConfiguration *configuration = [[AWSServiceConfiguration alloc] initWithRegion:AWSRegionUSEast1 credentialsProvider:credentialsProvider];

                AWSServiceManager.defaultServiceManager.defaultServiceConfiguration = configuration;

For more information on Amazon Cognito Identity, see :doc:`cognito-auth-aws-identity-for-ios`

Syncing User Data
-----------------

To sync unauthenticated user data:

#. Create a dataset and add user data.
#. Synchronize the dataset with the cloud.

Create a Dataset and Add User Data
----------------------------------

Create an instance of :code:`AWSCognitoDataset`. User data is added in the form of key/value pairs. Dataset objects are created with the :code:`AWSCognito` class which functions as a Amazon Cognito client object. Use the defaultCognito method to get a reference to the default singleton instance of AWSCognito. The openOrCreateDataset method is used to create a new dataset or open an existing instance of a dataset stored locally on the device:

    .. container:: option

        Swift
            .. code-block:: swift

                let dataset = AWSCognito.default().openOrCreateDataset("user_data")

        Objective-C
            .. code-block:: objc

                AWSCognitoDataset *dataset = [[AWSCognito defaultCognito] openOrCreateDataset:datasetName];:@"user_data"];

User data is added to an AWSCognitoDataset instance using the setString\:forKey or setValue\:forKey methods. The following code snippet shows how to add some user data to a dataset:

    .. container:: option

        Swift
            .. code-block:: swift

                dataset?.setString("John Doe", forKey:"Username")
                dataset?.setString("10000", forKey:"HighScore")

        Objective-C
            .. code-block:: objc

                [dataset setString:@"John Doe" forKey:@"Username"];
                [dataset setString:@"10000" forKey:@"HighScore"];

Synchronize Dataset with the Cloud
----------------------------------

To sync the dataset with the cloud, call the synchronize method on the dataset object:

    .. container:: option

        Swift
            .. code-block:: swift

                _ = dataset?.synchronize()

        Objective-C
            .. code-block:: objc

                [dataset synchronize];

All data written to datasets will be stored locally until the dataset is synced. The code in this section assumes you are using an unauthenticated Amazon Cognito identity, so when the user data is synced with the cloud it will be stored per device. The device has a device ID associated with it, when the user data is synced to the cloud, it will be associated with that device ID.

To sync user data across devices (based on an authenticated Cognito Identity) see `Amazon Cognito Sync Developer Guide
<http://docs.aws.amazon.com/cognito/devguide/sync/>`_.

Related Documentation
---------------------
:doc:`cognito-auth-aws-identity-for-ios`

`Developer Authenticated Identities`_


.. _Cognito Console: https://console.aws.amazon.com/cognito
.. _Developer Authenticated Identities: http://docs.aws.amazon.com/cognito/latest/developerguide/developer-authenticated-identities.html




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.


####################################
Preparing Your App to Work with ATS
####################################

If you use the iOS 9 SDK (or Xcode 7) or later, the Apple `App Transport Security (ATS) <https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/>`_
feature might impact how your apps interact with some AWS services.

If your app targeted for iOS 9+ attempts to connect to an AWS service endpoint that does not yet meet all the ATS requirements, the connection may fail. The following sections provide instructions to determine if your app is affected, and what steps to take to mitigate the impact of ATS on your app.

Diagnosing ATS Conflicts
========================

If your app stops working after being upgraded to Xcode 7 or later and iOS 9 or later, follow these steps to determine if it affected by ATS.

1. Turn on verbose logging of the AWS Mobile SDK for iOS by calling the following line in the ``- application:didFinishLaunchingWithOptions:`` application delegate.

   .. container:: option

        Swift
            .. code-block:: swift

                @UIApplicationMain
                class AppDelegate: UIResponder, UIApplicationDelegate {

                    var window: UIWindow?
                    func application(application: UIApplication, didFinishLaunchingWithOptions
                    launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
                        ...
                        AWSLogger.default().logLevel = .verbose
                        ...

                        return true
                    }
                }

        Objective-C
            .. code-block:: objc

                #import <AWSCore/AWSCore.h>

                @implementation AppDelegate

                - (BOOL)application:(UIApplication *)application
                didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
                    ...
                    [AWSLogger defaultLogger].logLevel = AWSLogLevelVerbose;
                    ...

                    return YES;
                }

                @end

2. Run your app and make a request to an AWS service.

3. Search your log output for "SSL". The message containing: "An SSL error has occurred and a secure connection to the server cannot be made" indicates that your app is affected by the ATS changes.

    .. code-block:: text

        2015-10-06 11:39:13.402 DynamoDBSampleSwift[14467:303540] CFNetwork SSLHandshake failed (-9824)
        2015-10-06 11:39:13.403 DynamoDBSampleSwift[14467:303540] NSURLSession/NSURLConnection HTTP load failed (kCFStreamErrorDomainSSL, -9824)
        2015-10-06 11:39:13.569 DynamoDBSampleSwift[14467:303540] CFNetwork SSLHandshake failed (-9824)
        2015-10-06 11:39:13.569 DynamoDBSampleSwift[14467:303540] NSURLSession/NSURLConnection HTTP load failed (kCFStreamErrorDomainSSL, -9824)
        Error: Error Domain=NSURLErrorDomain Code=-1200 "An SSL error has occurred and a secure connection to the server cannot be made." UserInfo={_kCFStreamErrorCodeKey=-9824, NSLocalizedRecoverySuggestion=Would you like to connect to the server anyway?, NSUnderlyingError=0x7fca343012f0 {Error Domain=kCFErrorDomainCFNetwork Code=-1200 "(null)" UserInfo={_kCFStreamPropertySSLClientCertificateState=0, _kCFNetworkCFStreamSSLErrorOriginalValue=-9824, _kCFStreamErrorDomainKey=3, _kCFStreamErrorCodeKey=-9824}}, NSLocalizedDescription=An SSL error has occurred and a secure connection to the server cannot be made., NSErrorFailingURLKey=https://dynamodb.us-east-1.amazonaws.com/, NSErrorFailingURLStringKey=https://dynamodb.us-east-1.amazonaws.com/, _kCFStreamErrorDomainKey=3}

   If you cannot find the SSL handshake error message, it is possible that another problem caused your app to stop working. Some internal behaviors change with major operating system updates, and it is common for previously unseen issues to surface.

   If you are unable to resolve such issues, you can post code snippets, and steps to reproduce the issue on `our forum <https://forums.aws.amazon.com/forum.jspa?forumID=88>`_ or `GitHub <https://github.com/aws/aws-sdk-ios/issues>`_ so that we can assist you in identifying the issue. Remember to include the versions of Xcode, iOS, and the AWS Mobile SDK.

Mitigating ATS Connection Issues
================================

If you determine that your app is impacted by the diagnostic handshake error, you can configure the app to interact properly with the ATS feature by taking the following steps to add properties to your ``Info.plist`` file.

1. Locate your ``Info.plist`` and from the context menu select **Open As** > **Source Code**.

    .. image:: images/ss1.png

2. Copy and paste the following key as a direct child of the top level ``<dict>`` tag.

    .. code-block:: xml

        <plist version="1.0">
          <key>NSAppTransportSecurity</key>
          <dict>
              <key>NSExceptionDomains</key>
              <dict>
                  <key>amazonaws.com</key>
                  <dict>
                        <key>NSThirdPartyExceptionMinimumTLSVersion</key>
                        <string>TLSv1.0</string>
                        <key>NSThirdPartyExceptionRequiresForwardSecrecy</key>
                        <false/>
                        <key>NSIncludesSubdomains</key>
                        <true/>
                  </dict>
                  <key>amazonaws.com.cn</key>
                  <dict>
                        <key>NSThirdPartyExceptionMinimumTLSVersion</key>
                        <string>TLSv1.0</string>
                        <key>NSThirdPartyExceptionRequiresForwardSecrecy</key>
                        <false/>
                        <key>NSIncludesSubdomains</key>
                        <true/>
                  </dict>
              </dict>
          </dict>

          . . .
        </plist>

After following these steps, your app should be able to access AWS endpoints while running on iOS 9 or later.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Install AWS Mobile SDK for iOS
==============================

The AWS Mobile SDK is installed using CocoaPods. If you don't have CocoaPods installed, see `Install CocoaPods`_.

Create a new project in Xcode, and in your project's directory, create file called podfile. Add the following text to the podfile you just created:
::

	source 'https://github.com/CocoaPods/Specs.git'
	pod 'AWSCore'
	pod 'AWSAutoScaling'
	pod 'AWSCloudWatch'
	pod 'AWSDynamoDB'
	pod 'AWSEC2'
	pod 'AWSElasticLoadBalancing'
	pod 'AWSKinesis'
	pod 'AWSLambda'
	pod 'AWSMachineLearning'
	pod 'AWSMobileAnalytics'
	pod 'AWSS3'
	pod 'AWSSES'
	pod 'AWSSimpleDB'
	pod 'AWSSNS'
	pod 'AWSSQS'
	pod 'AWSCognito'

In a terminal window, navigate to your project directory and run the following command:
::

	pod install

This will install the AWS Mobile SDK and any needed dependencies. Next, reopen your project using the newly generated .xcworkspace file

Your project now has the AWS Mobile SDK for iOS installed.

For more detailed information about installing the AWS Mobile SDK for iOS, see :doc:`setup-aws-sdk-for-ios`

.. _Install CocoaPods: http://cocoapods.org



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

#####################################
AWS Lambda: Execute Code On Demand
#####################################

On this page:

.. contents::
   :local:
   :depth: 1

:guilabel:`Amazon Lambda`

The `AWS Lambda <http://aws.amazon.com/lambda/>`_ service makes it easy to create scalable, secure, and highly available backends for your mobile apps without the need to provision or manage infrastructure.

You can create secure logical functions in the cloud that can be called directly from your iOS app. Your AWS Lambda code, written in C#, Node.js, Python, or Java, can implement standalone logic, extend your app to a range of AWS services, and/or connect to services and applications external to AWS.

The availability and cost of a AWS Lambda function automatically scales to amount of traffic it receives. Functions can also be accessed from an iOS app through `Amazon API Gateway <http://aws.amazon.com/lambda/>`_, giving features like global provisioning, enterprise grade monitoring, throttling and control of access.

Setup
=====

This section provides a step-by-step guide for getting started with AWS Lambda using the AWS Mobile SDK for iOS.

#. Install the SDK

   Add the AWS SDK for iOS to your project and import the APIs you need, by following the steps described
   in :doc:`setup-aws-sdk-for-ios`.

#. Configure Credentials

   To use Amazon Cognito to create AWS identities and credentials that give your users access to your app's AWS resources, follow the steps described at :doc:`cognito-auth-aws-identity-for-ios`.

#. Create and Configure a Lamda Function

    #. Sign in to the `AWS Lambda console <https://console.aws.amazon.com/lambda/>`_.

    #. Choose :guilabel:`Create a Lamda function`.

    #. Choose the :guilabel:`Blank Function` template.

       Note that dozens of function templates that connect to other AWS services are available.

    #. Choose :guilabel:`Next`.

       Note that the console allows you to configure triggers for a function from other AWS services, these won't be used in this walkthrough.

    #. Type a :guilabel:`Name` and select `Node.js` as the :guilabel:`Runtime` language.

    #. Under :guilabel:`Lambda function handler and role`, select :guilabel:`Create new role from template(s)`.
       Type a :guilabel:`Role name`. Select the :guilabel:`Policy template` named :guilabel:`Simple Microservice permissions`.

    #. Choose :guilabel:`Next`.

    #. Choose :guilabel:`Create function`.


Invoking an AWS Lambda Function
=================================

The SDK enables you to call AWS Lambda functions from your iOS mobile apps,
using the `AWSLambdaInvoker <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSLambdaInvoker.html>`_ class. When invoked from this SDK, AWS Lambda functions receive
data about the device and the end user identity through client and identity context objects.
To learn more about using these contexts to create rich, and personalized app experiences,
see :ref:`clientContext` and :ref:`identityContext`.

Import AWS Lambda API
----------------------

To use the `lambdainvoker` API, use the following import statement:

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSLambda

        Objective C
            .. code-block:: objectivec

                #import <AWSLambda/AWSLambda.h>


Call lambdaInvoker
------------------

``AWSLambdaInvoker`` provides a high-level abstraction for AWS Lambda. When ``invokeFunction``
``JSONObject`` is invoked, the JSON object is serialized into JSON data and sent to the
AWS Lambda service. AWS Lambda returns a JSON encoded response that is deserialized into
a JSON object.

A valid JSON object must have the following properties:

* All objects are instances of string, number, array, dictionary or null objects.
* All dictionary keys are instances of string objects.
* Numbers are not ``NaN`` or ``infinity``.

The following is an example of valid request.

    .. container:: option

        Swift
            .. code-block:: swift

                let lambdaInvoker = AWSLambdaInvoker.default()
                let jsonObject: [String: Any] = ["key1" : "value1",
                                         "key2" : 2 ,
                                         "key3" : [1, 2],
                                         "isError" : false]

                lambdaInvoker.invokeFunction("myFunction", jsonObject: jsonObject)
                    .continueWith(block: {(task):AWSTask<AnyObject>) -> Any? in
                    if( let error = task.error != nil) {as? NSError {
                        print(task.("Error: \(error!))")
                        return nil
                    }

                    // Handle response in task.result
                    return nil
                })


        Objective C
            .. code-block:: objectivec

                AWSLambdaInvoker *lambdaInvoker = [AWSLambdaInvoker defaultLambdaInvoker];

                [[lambdaInvoker invokeFunction:@"myFunction"
                            JSONObject:@{@"key1" : @"value1",
                                         @"key2" : @2,
                                         @"key3" : [NSNull null],
                                         @"key4" : @[@1, @"2"],
                                         @"isError" : @NO}] continueWithBlock:^id(AWSTask *task) {
                    // Handle response
                    return nil;
                }];


Using function returns
----------------------

On successful execution, `task.result` contains a JSON object. For instance, if `myFunctions` returns a dictionary, you can cast the result to a dictionary object as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                if let JSONDictionary = task.result as? NSDictionary {
                    print("Result: \(JSONDictionary)")
                    print("resultKey: \(JSONDictionary["resultKey"])")
                }

        Objective C
            .. code-block:: objectivec

                if (task.result) {
                    NSLog(@"Result: %@", task.result);
                    NSDictionary *JSONObject = task.result;
                    NSLog(@"result: %@", JSONObject[@"resultKey"]);
                }

Handling service execution errors
---------------------------------

On failed AWS Lambda service execution, `task.error` may contain a `NSError` with `AWSLambdaErrorDomain` domain and the following error code.

    * `AWSLambdaErrorUnknown`
    * `AWSLambdaErrorService`
    * `AWSLambdaErrorResourceNotFound`
    * `AWSLambdaErrorInvalidParameterValue`

On failed function execution, `task.error` may contain a `NSError` with `AWSLambdaInvokerErrorDomain` domain and the following error code:

    * `AWSLambdaInvokerErrorTypeUnknown`
    * `AWSLambdaInvokerErrorTypeFunctionError`

When `AWSLambdaInvokerErrorTypeFunctionError` error code is returned, `error.userInfo` may contain a function error from your AWS Lambda function with `AWSLambdaInvokerFunctionErrorKey` key.

The following code shows error handling.

    .. container:: option

        Swift
            .. code-block:: swift

                if let error = task.error as? NSError {
                    if error.domain == AWSLambdaInvokerErrorDomain && AWSLambdaInvokerErrorType.functionError == AWSLambdaInvokerErrorType(rawValue: error.code) {
                        print("Function error: \(error.userInfo[AWSLambdaInvokerFunctionErrorKey])")
                    } else {
                        print("Error: \(error)")
                    }
                    return nil
                }

        Objective C
            .. code-block:: objectivec

                if (task.error) {
                    NSLog(@"Error: %@", task.error);
                    if ([task.error.domain isEqualToString:AWSLambdaInvokerErrorDomain]
                        && task.error.code == AWSLambdaInvokerErrorTypeFunctionError) {
                        NSLog(@"Function error: %@", task.error.userInfo[AWSLambdaInvokerFunctionErrorKey]);
                    }
                }

Comprehensive example
---------------------

The following code shows invoking an AWS Lambda call and handling returns and errors all together.

    .. container:: option

        Swift
            .. code-block:: swift

                let lambdaInvoker = AWSLambdaInvoker.default()

                let jsonObject: [String: Any] = ["key1" : "value1",
                                       "key2" : 2,
                                       "key3" : [1, 2],
                                       "isError" : false]

                lambdaInvoker.invokeFunction("myFunction", jsonObject: jsonObject).continueWith(block: {(task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        if error.domain == AWSLambdaInvokerErrorDomain && AWSLambdaInvokerErrorType.functionError == AWSLambdaInvokerErrorType(rawValue: error.code) {
                            print("Function error: \(error.userInfo[AWSLambdaInvokerFunctionErrorKey])")
                        } else {
                            print("Error: \(error)")
                        }
                        return nil
                    }

                    // Handle response in task.result
                    if let JSONDictionary = task.result as? NSDictionary {
                        print("Result: \(JSONDictionary)")
                        print("resultKey: \(JSONDictionary["resultKey"])")
                    }
                    return nil
                })

        Objective C
            .. code-block:: objectivec

                AWSLambdaInvoker *lambdaInvoker = [AWSLambdaInvoker defaultLambdaInvoker];

                [[lambdaInvoker invokeFunction:@"myFunction"
                            JSONObject:@{@"key1" : @"value1",
                                         @"key2" : @2,
                                         @"key3" : [NSNull null],
                                         @"key4" : @[@1, @"2"],
                                         @"isError" : @NO}] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                        if ([task.error.domain isEqualToString:AWSLambdaInvokerErrorDomain]
                            && task.error.code == AWSLambdaInvokerErrorTypeFunctionError) {
                            NSLog(@"Function error: %@", task.error.userInfo[AWSLambdaInvokerFunctionErrorKey]);
                        }
                    }
                    if (task.result) {
                        NSLog(@"Result: %@", task.result);
                        NSDictionary *JSONObject = task.result;
                        NSLog(@"result: %@", JSONObject[@"resultKey"]);
                    }
                    return nil;
                }];

.. _clientContext:

Client Context
==============

Calls to AWS Lambda using this SDK provide your functions with data about the calling device
and app using the `ClientContext` class.

You can access the client context in your lambda function as follows.

    .. container:: option

        JavaScript
            .. code-block:: javascript

                exports.handler = function(event, context) {
                    console.log("installation_id = " + context.clientContext.client.installation_id);
                    console.log("app_version_code = " + context.clientContext.client.app_version_code);
                    console.log("app_version_name = " + context.clientContext.client.app_version_name);
                    console.log("app_package_name = " + context.clientContext.client.app_package_name);
                    console.log("app_title = " + context.clientContext.client.app_title);
                    console.log("platform_version = " + context.clientContext.env.platform_version);
                    console.log("platform = " + context.clientContext.env.platform);
                    console.log("make = " + context.clientContext.env.make);
                    console.log("model = " + context.clientContext.env.model);
                    console.log("locale = " + context.clientContext.env.locale);

                    context.succeed("Your platform is " + context.clientContext.env.platform;
                }

ClientContext has the following fields:

client.installation_id
        Auto-generated UUID that is created the first time the app is launched. This is stored in the keychain on the device. In case the keychain is wiped a new installation ID will be generated.

client.app_version_code
        `CFBundleShortVersionString <https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-111349>`_

client.app_version_name
        `CFBundleVersion <https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-102364>`_

client.app_package_name
        `CFBundleIdentifier <https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-102070>`_

client.app_title
        `CFBundleDisplayName <https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-110725>`_

env.platform_version
        `systemVersion <https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/index.html#//apple_ref/occ/instp/UIDevice/systemVersion>`_

env.platform
        `systemName <https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/index.html#//apple_ref/occ/instp/UIDevice/systemName>`_

env.make
        Hardcoded as "apple"

env.model
        `Model of the device <https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/index.html#//apple_ref/occ/instp/UIDevice/model>`_

env.locale
        `localeIdentifier <https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/index.html#//apple_ref/occ/instp/NSLocale/localeIdentifier>`_ from `autoupdatingCurrentLocale <https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/index.html#//apple_ref/occ/clm/NSLocale/autoupdatingCurrentLocale>`_

.. _identityContext:

Identity Context
================

The `IdentityContext` class of the SDK passes Amazon Cognito credentials making the AWS identity of the end user available to your function. You can access the Identity ID as follows.

    .. container:: option

        JavaScript
            .. code-block:: javascript

                exports.handler = function(event, context) {
                    console.log("clientID = " + context.identity);

                    context.succeed("Your client ID is " + context.identity);
                }

For more about Amazon Cognito in the AWS Mobile SDK for iOS, see :doc:`cognito-auth-aws-identity-for-ios`.

.. _Cognito Console: https://console.aws.amazon.com/cognito/home



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon S3 Integration Setup
###########################

To integrate Amazon S3 features of the AWS SDK for iOS into an app, take the following steps.


Create and configure the following AWS services and policies.

#. Install the SDK

   Add the AWS SDK for iOS to your project and import the APIs you need, by following the steps
   in :doc:`setup-aws-sdk-for-ios`.

#. Configure credentials

   To use Amazon Cognito to create AWS identities and credentials that give your users access to your app's AWS resources, follow the steps in :doc:`cognito-auth-aws-identity-for-ios`.


#. Create and configure an Amazon S3 bucket

   Amazon S3 stores your resources in buckets, which are AWS containers for objects. Buckets are created in
   specific `regions <http://docs.aws.amazon.com/general/latest/gr/rande.html>`_. Each bucket
   must have a globally unique name.

   :guilabel:`Create a bucket`

    #. Sign in to the `Amazon S3 console <https://console.aws.amazon.com/s3/>`_.

    #. Choose :guilabel:`Create Bucket`.

    #. Type a bucket name, choose a region, and then choose :guilabel:`Create Bucket`.


   :guilabel:`Grant Permissions`

   Like most AWS service objects, Amazon S3 buckets have access policies attached to them that you can use to
   grant permissions for IAM entities, such as roles or individual identities. Take the following steps to grant
   the unauthenticated IAM role of your app's identity pool permissions to the bucket you created.

    #. Navigate to the `Identity and Access Management console`_.

    #. Choose :guilabel:`Roles` in the left navigation pane.

    #. Type your identity pool name into the search box. Two roles are listed: one for unauthenticated users and one for authenticated users.

    #. Choose the role for unauthenticated users (it has `unauth` appended to your identity pool name).

    #. At the bottom of the :guilabel:`Permissions` tab, find the policy AWS attached when you created the role and choose :guilabel:`Create Role Policy`.

    #. Choose :guilabel:`Custom Policy`, and then choose :guilabel:`Select`.

    #. Enter a name in :guilabel:`Policy Name`, and then copy and paste the following policy statement into the
       :guilabel:`Policy Document` area.


        .. code-block:: json

                {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": ["s3:*"],
                            "Resource": ["arn:aws:s3:::examplebucket/"]
                        }
                    ]
                }

    #. Choose :guilabel:`Apply Policy`.

    This policy grants the user permissions for all actions in all objects in the specified bucket. For more information on granting access to Amazon S3, see `Granting Access to an Amazon S3 Bucket`_.


   :guilabel:`Upload files from the console`

   The following steps describe how to manually upload the file used in this walk through to the
   bucket you have created.

    #. In the `Amazon S3 console <https://console.aws.amazon.com/s3/>`_, navigate to your bucket.

    #. In the :guilabel:`Actions`drop down menu, choose :guilabel:`Upload`.

    #. Choose :guilabel:`+ Add Files` and select a test file to upload. For this walk through, we'll
       assume you're uploading an image called :file:`myImage.jpg`.

    #. With your test image selected, choose :guilabel:`Start Upload`.


Additional Resources
====================

* `Amazon Simple Storage Service Getting Started Guide <http://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html>`_
* `Amazon Simple Storage Service API Reference <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_
* `Amazon Simple Storage Service Developer Guide <http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html>`_

.. _Identity and Access Management Console: https://console.aws.amazon.com/iam/home
.. _Granting Access to an Amazon S3 Bucket: http://blogs.aws.amazon.com/security/post/Tx3VRSWZ6B3SHAV/Writing-IAM-Policies-How-to-grant-access-to-an-Amazon-S3-bucket



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

##################################################################
Amazon Kinesis and Amazon Kinesis Firehose: Process Streaming Data
##################################################################

Amazon Kinesis is a fully managed service for real-time processing of streaming data at massive
scale.

The SDK for iOS provides two high-level client classes, :command:`AWSKinesisRecorder` and
:command:`AWSFirehoseRecorder`, designed to help you interface with Amazon Kinesis and Amazon
Kinesis Firehose.

The Amazon Kinesis :command:`AWSKinesisRecorder` client lets you store `PutRecord
<http://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecord.html>`_ requests on disk and
then send them all at once. This is useful because many mobile applications that use Amazon Kinesis
will create multiple :command:`PutRecord` requests per second. Sending an individual request for
each :command:`PutRecord` action could adversely impact battery life. Moreover, the requests could
be lost if the device goes offline. Thus, using the high-level Amazon Kinesis client for batching
can preserve both battery life and data.

The Amazon Kinesis Firehose :command:`AWSFirehoseRecorder` client lets you store `PutRecords
<http://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecords.html>`_ requests on disk and
then send them using :command:`PutRecordBatch`.

For information about Amazon Kinesis Region availability, see  `AWS Service Region Availability
<http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.

What is Amazon Kinesis?
=======================

`Amazon Kinesis <http://aws.amazon.com/kinesis/>`_ is a fully managed service for real-time
processing of streaming data at massive scale. Amazon Kinesis can collect and process hundreds of
terabytes of data per hour from hundreds of thousands of sources, so you can write applications that
process information in real-time. With Amazon Kinesis applications, you can build real-time
dashboards, capture exceptions and generate alerts, drive recommendations, and make other real-time
business or operational decisions. You can also easily send data to other services such as Amazon
Simple Storage Service, Amazon DynamoDB, and Amazon Redshift.


What is Amazon Kinesis Firehose?
================================

`Amazon Kinesis Firehose <http://aws.amazon.com/kinesis/firehose/>`_ is a fully managed service for
delivering real-time streaming data to destinations such as Amazon Simple Storage Service (Amazon
S3) and Amazon Redshift. With Firehose, you do not need to write any applications or manage any
resources. You configure your data producers to send data to Firehose and it automatically delivers
the data to the destination that you specified.

For more information about Amazon Kinesis Firehose, see `Amazon Kinesis Firehose
<http://docs.aws.amazon.com/firehose/latest/dev/what-is-this-service.html>`_.

You can also learn more about how the Amazon Kinesis services work together on the following page: `Amazon
Kinesis services <http://aws.amazon.com/kinesis/>`_.


Integrating Amazon Kinesis and Amazon Kinesis Firehose
======================================================

To use the Amazon Kinesis mobile client, you'll need to integrate the SDK for iOS into your app
and import the necessary libraries. To do so, follow these steps:

If you haven't already done so, `download the SDK for iOS <http://aws.amazon.com/mobile/sdk/>`_,
unzip it, and include it in your application as described at :doc:`setup-aws-sdk-for-ios`. The
instructions direct you to import the headers for the services you'll be
using. For this example, you need the following import.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSKinesis

        Objective-C
            .. code-block:: objc

                #import <AWSKinesis/AWSKinesis.h>

You can use Amazon Cognito to provide temporary AWS credentials to your application.

These credentials let the app access your AWS resources. To create a credentials provider, follow the instructions at `Cognito Identity Developer Guide <http://docs.aws.amazon.com/cognito/devguide/identity/>`_.

To use Amazon Kinesis in an application, you must set the correct permissions. The
following IAM policy allows the user to submit records to a specific Amazon Kinesis
stream, which is identified by `ARN <http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html>`_.

    .. code-block:: json

        {
            "Statement": [{
                "Effect": "Allow",
                "Action": "kinesis:PutRecords",
                "Resource": "arn:aws:kinesis:us-west-2:111122223333:stream/mystream"
            }]
        }


The following IAM policy allows the user to submit records to a specific Amazon Kinesis Firehose
stream.

    .. code-block:: json

        {
            "Statement": [{
                "Effect": "Allow",
                "Action": "firehose:PutRecordBatch",
                "Resource": "arn:aws:firehose:us-west-2:111122223333:deliverystream/mystream"
            }]
        }

This policy should be applied to roles assigned to the Amazon Cognito
identity pool, but you will need to replace the :command:`Resource` value
with the correct ARN for your Amazon Kinesis or Amazon Kinesis Firehose stream. You can apply policies at the
`IAM console <https://console.aws.amazon.com/iam/>`_. To
learn more about IAM policies, see `Using IAM <http://docs.aws.amazon.com/IAM/latest/UserGuide/IAM_Introduction.html>`_.

To learn more about Amazon Kinesis-specific policies, see
`Controlling Access to Amazon Kinesis Resources with IAM <http://docs.aws.amazon.com/kinesis/latest/dev/kinesis-using-iam.html>`_.

To learn more about Amazon Kinesis Firehose policies, see `Controlling Access with Amazon Kinesis Firehose <http://docs.aws.amazon.com/firehose/latest/dev/controlling-access.html>`_.

Once you have credentials, you can use :command:`AWSKinesisRecorder` with Amazon Kinesis. The
following snippet returns a shared instance of the Amazon Kinesis service client:

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

You can use :command:`AWSFirehoseRecorder` with Amazon Kinesis Firehose. The
following snippet returns a shared instance of the Amazon Kinesis Firehose service client:

    .. container:: option

        Swift
            .. code-block:: swift

                let firehoseRecorder = AWSFirehoseRecorder.default()


        Objective-C
            .. code-block:: objc

                AWSFirehoseRecorder *firehoseRecorder = [AWSFirehoseRecorder defaultFirehoseRecorder];


You can configure :command:`AWSKinesisRecorder` or :command:`AWSFirehoseRecorder` through their properties:

    .. container:: option

        Swift
            .. code-block:: swift

                kinesisRecorder.diskAgeLimit = TimeInterval(30 * 24 * 60 * 60); // 30 days
                kinesisRecorder.diskByteLimit = UInt(10 * 1024 * 1024); // 10MB
                kinesisRecorder.notificationByteThreshold = UInt(5 * 1024 * 1024); // 5MB


        Objective-C
            .. code-block:: objc

                kinesisRecorder.diskAgeLimit = 30 * 24 * 60 * 60; // 30 days
                kinesisRecorder.diskByteLimit = 10 * 1024 * 1024; // 10MB
                kinesisRecorder.notificationByteThreshold = 5 * 1024 * 1024; // 5MB

The :command:`diskAgeLimit` property sets the expiration for cached requests.
When a request exceeds the limit, it's discarded. The default is no age limit. The
:command:`diskByteLimit` property holds the limit of the disk cache size in
bytes. If the storage limit is exceeded, older requests are discarded. The default
value is 5 MB. Setting the value to 0 means that there's no practical limit. The
:command:`notficationByteThreshold` property sets the point beyond which
Kinesis issues a notification that the byte threshold has been reached. The default
value is 0, meaning that by default Amazon Kinesis doesn't post the notification.

To see how much local storage is being used for Amazon Kinesis :command:`PutRecord`
requests, check the :command:`diskBytesUsed` property.

With :command:`AWSKinesisRecorder` created and configured, you can use
:command:`saveRecord:streamName:` to save records to local storage.

    .. container:: option

        Swift
            .. code-block:: swift

                let yourData = "Test_data".data(using: .utf8)
                kinesisRecorder.saveRecord(yourData, streamName: "YourStreamName")


        Objective-C
            .. code-block:: objc

                NSData *yourData = [@"Test_data" dataUsingEncoding:NSUTF8StringEncoding];
                [kinesisRecorder saveRecord:yourData streamName:@"YourStreamName"]

In the preceding example, we create an NSData object and save it locally.
:command:`YourStreamName` should be a string corresponding to the name of your
Kinesis stream. You can create new streams in the `Amazon Kinesis
console <https://console.aws.amazon.com/kinesis/>`_.

Here is a similar snippet for Amazon Kinesis Firehose:

    .. container:: option

        Swift
            .. code-block:: swift

                let yourData = "Test_data".data(using: .utf8)
                firehoseRecorder.saveRecord(yourData, streamName: "YourStreamName")


        Objective-C
            .. code-block:: objc

                NSData *yourData = [@"Test_data" dataUsingEncoding:NSUTF8StringEncoding];
                [firehoseRecorder saveRecord:yourData streamName:@"YourStreamName"]


To submit all the records stored on the device, call
:command:`submitAllRecords`.

    .. container:: option

        Swift
            .. code-block:: swift

                kinesisRecorder.submitAllRecords()

                firehoseRecorder.submitAllRecords()


        Objective-C
            .. code-block:: objc

                [kinesisRecorder submitAllRecords];

                [firehoseRecorder submitAllRecords];


:command:`submitAllRecords` sends all locally saved requests to the Amazon Kinesis
service. Requests that are successfully sent will be deleted from the device.
Requests that fail because the device is offline will be kept and submitted later.
Invalid requests are deleted.

Both :command:`saveRecord` and :command:`submitAllRecords` are asynchronous
operations, so you should ensure that :command:`saveRecord` is complete before you
invoke :command:`submitAllRecords`. The following code sample shows the methods
used correctly together.

     .. container:: option

        Swift
            .. code-block:: swift

                // Create an array to store a batch of objects.
                var tasks = Array<AWSTask<AnyObject>>()
                for i in 0...100 {
                    tasks.append(kinesisRecorder!.saveRecord(String(format: "TestString-%02d", i).data(using: .utf8), streamName: "YourStreamName")!)
                }

                AWSTask(forCompletionOfAllTasks: tasks).continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                    }
                    return nil
                })


        Objective-C
            .. code-block:: objc

                // Create an array to store a batch of objects.
                NSMutableArray *tasks = [NSMutableArray new];
                for (int32_t i = 0; i < 100; i++) {
                    [tasks addObject:[kinesisRecorder saveRecord:[[NSString stringWithFormat:@"TestString-%02d", i] dataUsingEncoding:NSUTF8StringEncoding]
                                              streamName:@"YourStreamName"]];
                }
                [[[AWSTask taskForCompletionOfAllTasks:tasks] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: [%@]", task.error);
                    }
                    return nil;
                }];

To learn more about working with Amazon Kinesis, see the `Amazon Kinesis Developer Resources
<http://aws.amazon.com/kinesis/developer-resources/>`_.

To learn more about the Amazon Kinesis classes, see the `class reference for AWSKinesisRecorder
<http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSKinesisRecorder.html>`_.

For information about AWS service region availability, see  `AWS Service Region Availability
<http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. _setup-ios:

======================
Set Up the SDK for iOS
======================

To get started with the AWS Mobile SDK for iOS you can set up the SDK and build a new
project, or you can integrate the SDK in an existing project. You can also run the samples to
get a sense of how the SDK works.

To use the SDK, install the following on your development machine:

- Xcode 7 or later

- iOS 8 or later

You can view the source code in the `AWS Mobile SDK for iOS GitHub repository <https://github.com/aws/aws-sdk-ios>`_.

.. _include_sdk_ios:

Include the AWS Mobile SDK for iOS in an Existing Application
#############################################################

The samples included with the SDK are standalone projects that are already set up. You can also integrate the SDK into your own existing project. Choose one of the following three ways to import the SDK into your project:

- Cocoapods
- Carthage
- Dynamic Frameworks

.. note:: Importing the SDK in multiple ways loads duplicate copies of the SDK into the project and causes compiler errors.

.. container:: option

    CocoaPods
        #. The AWS Mobile SDK for iOS is available through `CocoaPods <http://cocoapods.org/>`_. Install CocoaPods by running the following commands from the folder containing your projects :file:`*.xcodeproj` file.

            $ :command:`gem install cocoapods`

           ..note:: Depending on your system settings, you may need to run the command as administrator using `sudo`, as follows:

                $ :command:`sudo gem install cocoapods`

            $ :command:`pod setup`

            $ :command:`pod init`

        #. In your project directory (the directory where your :file:`*.xcodeproj` file is), open the empty text file named :file:`Podfile` (without a file extension) and add the following lines to the file. Replace ``myAppName`` with your app name. You can also remove pods for services that you don't use. For example, if you don't use `AWSAutoScaling`, remove or do not include the ``AWSAutoScaling`` pod.

            .. code-block:: javascript

                source 'https://github.com/CocoaPods/Specs.git'

                platform :ios, '8.0'
                use_frameworks!

                target :'myAppName' do
                    pod 'AWSAutoScaling'
                    pod 'AWSCloudWatch'
                    pod 'AWSCognito'
                    pod 'AWSCognitoIdentityProvider'
                    pod 'AWSDynamoDB'
                    pod 'AWSEC2'
                    pod 'AWSElasticLoadBalancing'
                    pod 'AWSIoT'
                    pod 'AWSKinesis'
                    pod 'AWSLambda'
                    pod 'AWSLex'
                    pod 'AWSMachineLearning'
                    pod 'AWSMobileAnalytics'
                    pod 'AWSPinpoint'
                    pod 'AWSPolly'
                    pod 'AWSRekognition'
                    pod 'AWSS3'
                    pod 'AWSSES'
                    pod 'AWSSimpleDB'
                    pod 'AWSSNS'
                    pod 'AWSSQS'
                end

        #. Run the following command:

            $ :command:`pod install`

        #. Open :file:`*.xcworkspace` with Xcode and start using the SDK.

            .. note::

                Do not open :file:`*.xcodeproj`. Opening this project file instead of a workspace results in an error.

    Carthage
        #. Install the latest version of `Carthage <https://github.com/Carthage/Carthage#installing-carthage>`_.

        #. Add the following to your `Cartfile`::

            github "aws/aws-sdk-ios"

        #. Run the following command:

            $ :command:`carthage update`

        #. With your project open in Xcode, choose your **Target**. In the **General** tab, find **Embedded Binaries**,  then choose the **+** button.

        #. Choose the **Add Other** button, navigate to the ``AWS<#ServiceName#>.framework`` files under **Carthage** > **Build** > **iOS** and select ``AWSCore.framework`` and the other service frameworks you require. Do not select the **Destination: Copy items if needed** checkbox when prompted.

            * ``AWSCore.framework``
            * ``AWSAutoScaling.framework``
            * ``AWSCloudWatch.framework``
            * ``AWSCognito.framework``
            * ``AWSCognitoIdentityProvider.framework``
            * ``AWSDynamoDB.framework``
            * ``AWSEC2.framework``
            * ``AWSElasticLoadBalancing.framework``
            * ``AWSIoT.framework``
            * ``AWSKinesis.framework``
            * ``AWSLambda.framework``
            * ``AWSLex.framework``
            * ``AWSMachineLearning.framework``
            * ``AWSMobileAnalytics.framework``
            * ``AWSPinpoint.framework``
            * ``AWSPolly.framework``
            * ``AWSRekognition.framework``
            * ``AWSS3.framework``
            * ``AWSSES.framework``
            * ``AWSSimpleDB.framework``
            * ``AWSSNS.framework``
            * ``AWSSQS.framework``

        #. Under the **Build Phases** tab in your **Target**, choose the **+** button on the top left and then select **New Run Script Phase**.

        # Setup the build phase as follows. Make sure this phase is below the **Embed Frameworks** phase.

            .. code-block:: bash


                Shell /bin/sh

                bash "${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH}/AWSCore.framework/strip-frameworks.sh"

                Show environment variables in build log: Checked
                Run script only when installing: Not checked

                Input Files: Empty
                Output Files: Empty

    Frameworks
        #. Download the SDK from http://aws.amazon.com/mobile/sdk. The SDK is stored in a compressed
           file archive named :file:`aws-ios-sdk-#.#.#`, where '#.#.#' represents the version number. For version
           2.5.0, the filename is :file:`aws-ios-sdk-2.5.0`.


        #. With your project open in Xcode, choose your **Target**. Under the **General** tab, find
           **Embedded Binaries** and then choose the **+** button.

        #. Choose **Add Other**. Navigate to the ``AWS<#ServiceName#>.framework`` files
           and select ``AWSCore.framework`` and the other service frameworks you require. Select
           the **Destination: Copy items if needed** checkbox when prompted.

            * ``AWSCore.framework``
            * ``AWSAutoScaling.framework``
            * ``AWSCloudWatch.framework``
            * ``AWSCognito.framework``
            * ``AWSCognitoIdentityProvider.framework``
            * ``AWSDynamoDB.framework``
            * ``AWSEC2.framework``
            * ``AWSElasticLoadBalancing.framework``
            * ``AWSIoT.framework``
            * ``AWSKinesis.framework``
            * ``AWSLambda.framework``
            * ``AWSLex.framework``
            * ``AWSMachineLearning.framework``
            * ``AWSMobileAnalytics.framework``
            * ``AWSPinpoint.framework``
            * ``AWSPolly.framework``
            * ``AWSRekognition.framework``
            * ``AWSS3.framework``
            * ``AWSSES.framework``
            * ``AWSSimpleDB.framework``
            * ``AWSSNS.framework``
            * ``AWSSQS.framework``

        4. Under the **Build Phases** tab in your **Target**, click the **+** button on the top left and then select **New Run Script Phase**.

        #. Setup the build phase as follows. Make sure this phase is below the `Embed Frameworks` phase.

            .. code-block:: bash

                Shell /bin/sh

                bash "${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH}/AWSCore.framework/strip-frameworks.sh"

                Show environment variables in build log: Checked
                Run script only when installing: Not checked

                Input Files: Empty
                Output Files: Empty

Update the SDK to a Newer Version
#################################

This section describes how to pick up changes when a new SDK is released.

.. container:: option

    CocoaPods
        Run the following command in your project directory. CocoaPods automatically picks up the changes.

        :command:`$ pod update`

        .. note::

            If your pod update command fails, delete :file:`Podfile.lock` and :file:`Pods/`
            and then run :command:`pod install` to cleanly install the SDK.

    Carthage
        Run the following command in your project directory. Carthage automatically updates
        your frameworks with the new changes.

        :command:`$ carthage update`

    Frameworks
        #. In Xcode select the following frameworks in **Project Navigator** and press the **delete** key. Then select **Move to Trash**:

            * ``AWSCore.framework``
            * ``AWSAutoScaling.framework``
            * ``AWSCloudWatch.framework``
            * ``AWSCognito.framework``
            * ``AWSCognitoIdentityProvider.framework``
            * ``AWSDynamoDB.framework``
            * ``AWSEC2.framework``
            * ``AWSElasticLoadBalancing.framework``
            * ``AWSIoT.framework``
            * ``AWSKinesis.framework``
            * ``AWSLambda.framework``
            * ``AWSLex.framework``
            * ``AWSMachineLearning.framework``
            * ``AWSMobileAnalytics.framework``
            * ``AWSPinpoint.framework``
            * ``AWSPolly.framework``
            * ``AWSRekognition.framework``
            * ``AWSS3.framework``
            * ``AWSSES.framework``
            * ``AWSSimpleDB.framework``
            * ``AWSSNS.framework``
            * ``AWSSQS.framework``

        #. Follow the :ref:`manual Frameworks installation process <install-frameworks>` to include the new version of the SDK.

Preparing to Work with ATS
##########################

The `App Transport Security (ATS) <https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/>`_
feature, in the iOS 9.0 SDK or later, might impact how your apps interact with some AWS services.

If you compile your apps with the iOS 9.0 SDK (or Xcode 7) or later, there are additional steps you must
complete for your app to successfully connect with any AWS service your app calls. For more information,
see `Preparing Your App to Work with ATS <http://docs.aws.amazon.com/mobile/sdkforios/developerguide/ats.html>`_.

AWS Credentials
###############

We recommend using Amazon Cognito as your credential provider to access AWS services from your
mobile app. Amazon Cognito provides a secure mechanism to access AWS services without having to embed
credentials in your app. To learn more, see :doc:`cognito-auth-aws-identity-for-ios`.

Alternatively, you can use `AWS Identity and Access
Management <http://aws.amazon.com/iam/>`_ (IAM) in combination with the `AWS Security Token Service AssumeRole API <http://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html>`_. If you choose IAM, ensure that your role's policy is minimally scoped so that it can only perform the required actions for the service being used.

Import and Call SDK APIs with AWS Credentials
#############################################

This section is included to give an overview of how you can connect your app to AWS services. For details about calling a specific service, see the left hand menu.

#. Import the AWSCore header in the application delegate.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSCore
                import AWSCognito

        Objective-C
            .. code-block:: objc

                #import <AWSCore/AWSCore.h>
                #import <AWSCognito/AWSCognito.h>

   Amazon Cognito APIs provide AWS identity services, and are included because they are
   used in the implementation of most mobile app features through AWS.

#. Create a default service configuration and establish an AWS identity provider by adding the following code
   snippet in the ``application:didFinishLaunchingWithOptions:`` application delegate method.

    .. container:: option

        Swift
            .. code-block:: swift

                let credentialProvider = AWSCognitoCredentialsProvider(regionType: .USEast1, identityPoolId: "YourIdentityPoolId")
                let configuration = AWSServiceConfiguration(region: .USEast1, credentialsProvider: credentialProvider)
                AWSServiceManager.default().defaultServiceConfiguration = configuration

        Objective-C
            .. code-block:: objc

                AWSCognitoCredentialsProvider *credentialsProvider = [[AWSCognitoCredentialsProvider alloc] initWithRegionType:AWSRegionUSEast1
                identityPoolId:@"YourIdentityPoolId"];

                AWSServiceConfiguration *configuration = [[AWSServiceConfiguration alloc] initWithRegion:AWSRegionUSEast1 credentialsProvider:credentialsProvider];

                AWSServiceManager.defaultServiceManager.defaultServiceConfiguration = configuration;

   The value for ``YourIdentityPoolId`` is specific to the Amazon Cognito identity pool you create. To learn
   more, see :doc:`cognito-auth-aws-identity-for-ios`.


#. Include import statements for each AWS service your app will call.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSS3
                import AWSDynamoDB
                import AWSSQS
                import AWSSNS
                ...

        Objective-C
            .. code-block:: objc

               #import <AWSCore/AWSCore.h>
               #import <AWSS3/AWSS3.h>
               #import <AWSDynamoDB/AWSDynamoDB.h>
               #import <AWSSQS/AWSSQS.h>
               #import <AWSSNS/AWSSNS.h>
               ...

#. Make a call to your AWS service. In the example below, the call is to Amazon S3
   through the SDKs AWSS3TransferManger API.

    .. container:: option

        Swift
            .. code-block:: swift

                let transferManager = AWSS3TransferManager.default()

                let uploadRequest = AWSS3TransferManagerUploadRequest()
                uploadRequest.bucket = "myBucket"
                uploadRequest.key = "myTestFile.txt"
                uploadRequest.body = uploadingFileURL
                uploadRequest.contentLength = fileSize

                transferManager.upload(uploadRequest).continueWith(executor: AWSExecutor.mainThread(), block: { (task:AWSTask<AnyObject>) -> Any? in
                    // Do something with the response
                })


        Objective-C
            .. code-block:: objc

               AWSS3Transfermanager *transferManager = [AWSS3Transfermanager defaultS3TransferManager];

               AWSS3TransferManagerUploadRequest *uploadRequest = [AWSS3TransferManagerUploadRequest new];
               uploadRequest.bucket = yourBucket;
               uploadRequest.key = yourKey;
               uploadRequest.body = yourDataURL;
               uploadRequest.contentLength = [NSNumber numberWithUnsignedLongLong:fileSize];

               [[transferManager upload:uploadRequest] continueWithBlock:^id(AWSTask *task) {
                   // Do something with the response
                   return nil;
               }];

    .. note::

        Most of the service client classes have a singleton method to get a default client, named with the convention of adding ``default`` to the framework name.
        ``AWSS3TransferManager.default()`` (Swift) or ``defaultS3TransferManager`` (Objective-C)
        are examples in the preceding code snippet.

        This singleton method creates a service client with ``defaultServiceConfiguration``, which you
        initialized in the application delegate during a preceding step in this section. The method
        maintains a strong reference to the client.



Logging
#######

As of version 2.5.4 of this SDK, logging utilizes `CocoaLumberjack SDK <https://github.com/CocoaLumberjack/CocoaLumberjack>`_, a flexible, fast, open source logging framework. It supports many capabilities including the ability to set logging level per output target, for instance, concise messages logged to the console and verbose messages to a log file.

CocoaLumberjack logging levels are additive such that when the level is set to verbose, all messages from the levels below verbose are logged. It is also possible to set custom logging to meet your needs. For more information, see `CocoaLumberjack Logging Levels <https://github.com/CocoaLumberjack/CocoaLumberjack/blob/master/Documentation/CustomLogLevels.md>`_

Changing Logging Level
=======================

You can change the logging level to suit the phase of your development cycle by importing AWSCore and calling:

    .. container:: option

        Swift
            :code:`AWSDDLog.sharedInstance().logLevel = .verbose`

            The following logging level options are available:

            - ``.off``
            - ``.error``
            - ``.warning``
            - ``.info``
            - ``.debug``
            - ``.verbose``

            We recommend setting the log level to ``.off`` before publishing to the App Store.

        Objective-C
            :code:`[AWSDDLog sharedInstance].logLevel = AWSDDLogLevelVerbose;`

            The following logging level options are available:

            - ``AWSDDLogLevelOff``
            - ``AWSDDLogLevelError``
            - ``AWSDDLogLevelWarning``
            - ``AWSDDLogLevelInfo``
            - ``AWSDDLogLevelDebug``
            - ``AWSDDLogLevelVerbose``

            We recommend setting the log level to ``AWSDDLogLevelOff`` before publishing to the App Store.


Targeting Log Output
====================

CocoaLumberjack can direct logs to file or used as a framework that integrates with the Xcode console.

To initialize logging to files, use the following code:

    .. container:: option

        Swift
            .. code-block:: swift

                let fileLogger: AWSDDFileLogger = AWSDDFileLogger() // File Logger
                fileLogger.rollingFrequency = TimeInterval(60*60*24)  // 24 hours
                fileLogger.logFileManager.maximumNumberOfLogFiles = 7
                AWSDDLog.add(fileLogger)

        Objective-C
            .. code-block:: objc

                AWSDDFileLogger *fileLogger = [[AWSDDFileLogger alloc] init]; // File Logger
                fileLogger.rollingFrequency = 60 * 60 * 24; // 24 hour rolling
                fileLogger.logFileManager.maximumNumberOfLogFiles = 7;
                [AWSDDLog addLogger:fileLogger];

To initialize logging to your Xcode console, use the following code:

    .. container:: option

        Swift
            .. code-block:: swift

                AWSDDLog.add(AWSDDTTYLogger.sharedInstance) // TTY = Xcode console

        Objective-C
            .. code-block:: objc

                [AWSDDLog addLogger:[AWSDDTTYLogger sharedInstance]]; // TTY = Xcode console

To learn more, see `CocoaLumberjack <https://github.com/CocoaLumberjack/CocoaLumberjack>`_ on GitHub.

Sample Apps
###########

The AWS Mobile SDK for iOS includes sample apps that demonstrate common use cases.

**Amazon Cognito Your User Pools Sample** (`Objective-C <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/CognitoYourUserPools-Sample/Objective-C/>`__)

    This sample demonstrates how sign up and sign in a user to display an authenticated portion of your app.

    AWS services demonstrated:

    - `Amazon Cognito Pools <http://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html>`_
    - `Amazon Cognito Identity <http://aws.amazon.com/cognito/>`_

**Amazon Cognito Sync Sample**
(`Swift <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/CognitoSync-Sample/Swift/>`__,
`Objective-C <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/CognitoSync-Sample/Objective-C/>`__)

    This sample demonstrates how to securely manage and sync your mobile app data. It also demonstrates how to create unique identities using login providers including Facebook, Google, and Login with Amazon.

    AWS services demonstrated:

    - `Amazon Cognito Sync <http://aws.amazon.com/cognito/>`_
    - `Amazon Cognito Identity <http://aws.amazon.com/cognito/>`_

**Amazon DynamoDB Object Mapper Sample**
(`Swift <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/DynamoDBObjectMapper-Sample/Swift>`__, `Objective-C <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/DynamoDBObjectMapper-Sample/Objective-C/>`__)

    This sample demonstrates how to insert, update, delete, query items using DynamoDBObjectMapper.

    AWS services demonstrated:

    - `Amazon DynamoDB <http://aws.amazon.com/dynamodb/>`_
    - `Amazon Cognito Identity <http://aws.amazon.com/cognito/>`_

**Amazon S3 Transfer Utility Sample**
(`Swift <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/S3TransferUtility-Sample/Swift/>`__, `Objective-C <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/S3TransferUtility-Sample/Objective-C/>`__)

    This sample demonstrates how to use the Amazon S3 TransferUtility to download / upload files.

    AWS services demonstrated:

    - `Amazon S3 <http://aws.amazon.com/s3/>`_
    - `Amazon Cognito Identity <http://aws.amazon.com/cognito/>`_

**Amazon SNS Mobile Push and Mobile Analytics Sample**
(`Swift <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/SNS-MobileAnalytics-Sample/Swift/>`__, `Objective-C <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/SNS-MobileAnalytics-Sample/Objective-C/>`_)

    This sample demonstrates how to set up Amazon SNS mobile push notifications and to record events using Amazon Mobile Analytics.

    AWS services demonstrated:

    - `Amazon SNS (mobile push notification) <http://aws.amazon.com/sns/>`_
    - `Amazon Mobile Analytics <http://aws.amazon.com/mobileanalytics/>`_
    - `Amazon Cognito Identity <http://aws.amazon.com/cognito/>`_

Install the Reference Documentation in Xcode
############################################

The AWS Mobile SDK for iOS includes documentation in the DocSets format that you can view within
Xcode. The easiest way to install the documentation is to use the macOS terminal.

To install the DocSet for Xcode
===============================

Open the macOS terminal and go to the directory containing the expanded
archive. For example:

    :command:`$ cd ~/Downloads/aws-ios-sdk-2.5.0`

.. note::

    Replace :command:`2.5.0` in the preceding example with the
    version number of the AWS Mobile SDK for iOS that you downloaded.

Create a directory called
:file:`~/Library/Developer/Shared/Documentation/DocSets`:


    :command:`$ mkdir -p ~/Library/Developer/Shared/Documentation/DocSets`

Copy (or move) :file:`documentation/com.amazon.aws.ios.docset`
from the SDK installation files to the directory you created in the previous
step:

    :command:`$ mv documentation/com.amazon.aws.ios.docset ~/Library/Developer/Shared/Documentation/DocSets/`

If Xcode was running during this procedure, restart Xcode. To browse the
documentation, go to :strong:`Help`, click :strong:`Documentation and API Reference`, and select :strong:`AWS Mobile SDK for iOS v2.0 Documentation`
(where '2.0' is the appropriate version number).



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. highlight:: java

Amazon Lex: Use Natural Language to Trigger Business Workflows
##############################################################

What is Amazon Lex?
===================

|LEX| is an AWS service for building voice and text conversational interfaces into applications. With |LEX|, the same natural language understanding engine that powers Amazon Alexa is now available to any
developer, enabling you to build sophisticated, natural language chatbots into your new and existing
applications.

The |sdk-ios| provides an optimized client for interacting with |LEX| runtime APIs,
which support both voice and text input and can return either voice or text. Included are features
like APIs to support detecting when a user finishes speaking and encoding incoming audio to the format
the Amazon Lex service prefers.

|LEX| has built-in integration with AWS Lambda to allow insertion of custom business logic
into your |LEX| processing flow, including all of the extension to other services that Lambda makes possible.

For information on |LEX| concepts and service configuration, see
`How it Works <http://docs.aws.amazon.com/lex/latest/dg/how-it-works.html>`_ in the |LEX-dg|.

To get started using the Amazon Lex mobile client for iOS, you'll need to integrate the SDK for iOS
into your app, set the appropriate permissions, and import the necessary libraries.


Setting Up
==========

Include the SDK in Your Project
-------------------------------

Follow the instructions on the `Set Up the SDK for iOS <http://docs.aws.amazon.com/mobile/sdkforios/developerguide/setup.html>`_ page to include the frameworks for this service.

Set IAM Permissions for Amazon Lex
----------------------------------

To use |LEX| in an application, create a role and attach policies as described in Step 1 of
`Getting Started <http://docs.aws.amazon.com/lex/latest/dg/gs-bp-prep.html>`_ in the |LEX-dg|.

To learn more about IAM policies, see `Using IAM <http://docs.aws.amazon.com/IAM/latest/UserGuide/IAM_Introduction.html>`_.

Configure a Bot
---------------

To set up interaction between your mobile app and |LEX|, use the |LEX| console to configure a bot that fulfills
your requirements. To learn more see |LEX-dg|_.
For a quickstart, see Step 2 of `Getting Started <http://docs.aws.amazon.com/lex/latest/dg/gs-bp-prep.html>`_ in the
|LEX-dg|.

|LEX| also supports model building APIs, which allow creation of bots, intents, and slots at runtime. This SDK does not
currently offer additional support for interacting with |LEX| model building APIs.

Implement Text and Voice Interaction with Amazon Lex
====================================================

Add Permissions and Get Credentials
------------------------------------

Take the following steps to allow your app to access device resources and AWS services.

Add permission to use the microphone
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To add permission to use the microphone to enable users to speak to Amazon Lex through your app, open your project's Info.plist file using :guilabel:`Right-click > Open As > Source Code`, and then add the following entry.

    .. code-block:: xml

        <plist version="1.0">
            . . .
            <dict>
                <key>NSMicrophoneUsageDescription</key>
                <string>For interaction with Amazon Lex</string>
            </dict>
             . . .
        </plist>


Integrating the Interaction Client
----------------------------------

Take the following steps to integrate the Amazon Lex interaction client with your app.

Initialize the `InteractionKit` for voice and text
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Add the following code using the name and alias of your Lex bot to initialize an  instance of `InteractionKit`.

    .. container:: option

        Swift
            .. code-block:: swift

                let chatConfig = AWSLexInteractionKitConfig.defaultInteractionKitConfig(withBotName: BotName, botAlias: BotAlias)

                // interaction kit for the voice button
                AWSLexInteractionKit.register(with: configuration!, interactionKitConfiguration: chatConfig, forKey: "AWSLexVoiceButton")

                chatConfig.autoPlayback = false

                // interaction kit configuration for the client
                AWSLexInteractionKit.register(with: configuration!, interactionKitConfiguration: chatConfig, forKey: "chatConfig")

        Objective C
            .. code-block:: objectivec

                AWSLexInteractionKitConfig *chatConfig = [AWSLexInteractionKitConfig defaultInteractionKitConfigWithBotName:BotName botAlias:BotAlias];

                chatConfig.autoPlayback = NO;

                [AWSLexInteractionKit registerInteractionKitWithServiceConfiguration:configuration interactionKitConfiguration:chatConfig forKey:AWSLexChatConfigIdentifierKey];


Implement `InteractionKit` delegate methods
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Declare and implement the following methods in the class where you intend to use your `InteractionKit`:

- :code:`interactionKit` is called to begin a conversation. When passed :code:`interactionKit`, :code:`switchModeInput`, and :code:`completionSource`, the function should set the mode of interaction (audio or text input and output)  and pass the :code:`SwitchModeResponse` to the :code:`completionSource`. On error, the `interactionKit:onError` method is called.

    .. container:: option

        Swift
            .. code-block:: swift

                public func interactionKit(_ interactionKit: AWSLexInteractionKit, switchModeInput:
                  AWSLexSwitchModeInput, completionSource: AWSTaskCompletionSource<AWSLexSwitchModeResponse>?)

                public func interactionKit(_ interactionKit: AWSLexInteractionKit, onError error: Error)

        Objective C
            .. code-block:: objectivec

                - (void)interactionKit:(AWSLexInteractionKit *)interactionKit
                    switchModeInput:(AWSLexSwitchModeInput *)switchModeInput
                  completionSource:(AWSTaskCompletionSource<AWSLexSwitchModeResponse *> *)completionSource

                - (void)interactionKit:(AWSLexInteractionKit *)interactionKit
                  onError:(NSError *)error`

- :code:`interactionKitContinue` is called to continue an ongoing conversation with its transaction state and metadata maintained.

    .. container:: option

        Swift
            .. code-block:: swift

                func interactionKitContinue(withText interactionKit: AWSLexInteractionKit, completionSource: AWSTaskCompletionSource<NSString>){
                    textModeSwitchingCompletion = completionSource
                }

        Objective C
            .. code-block:: objectivec

                - (void)interactionKitContinueWithText:(AWSLexInteractionKit *)interactionKit
                    completionSource:(AWSTaskCompletionSource<NSString *> *)completionSource{
                 textModeSwitchingCompletion = completionSource;
                }

  Alternatively, you can explicitly set `SwitchModeResponse` to a selected mode.

    .. container:: option

        Swift
            .. code-block:: swift

                let switchModeResponse = AWSLexSwitchModeResponse()
                switchModeResponse.interactionMode = AWSLexInteractionMode.text
                switchModeResponse.sessionAttributes = switchModeInput.sessionAttributes
                completionSource?.setResult(switchModeResponse)

        Objective C
            .. code-block:: swift

                AWSLexSwitchModeResponse *switchModeResponse = [AWSLexSwitchModeResponse new];
                [switchModeResponse setInteractionMode:AWSLexInteractionModeText];
                [switchModeResponse setSessionAttributes:switchModeInput.sessionAttributes];
                [completionSource setResult:switchModeResponse];


Begin or Continue a Conversation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When you call :code:`InteractionKit` to provide input for a conversation, check if the conversation is already in progress by examining the state of :code:`AWSTaskCompletionSource`. The following example illustrates the case where :code:`textModeSwitchingCompletion` is an :code:`AWSTaskCompletionSource` instance and the desired result is that a new conversation will be in the :code:`texttInTextOut` mode.

    .. container:: option

        Swift
            .. code-block:: swift

                if let textModeSwitchingCompletion = textModeSwitchingCompletion {
                        textModeSwitchingCompletion.setResult(text)
                        self.textModeSwitchingCompletion = nil
                    }
                    else {
                        self.interactionKit?.textInTextOut(text)
                    }

        Objective C
            .. code-block:: objectivec

                if(textModeSwitchingCompletion){
                    [textModeSwitchingCompletion setResult:text];
                    textModeSwitchingCompletion = nil;
                  }else{
                    [self.interactionKit textInTextOut:text];
                }

Integrating Voice Conversation
------------------------------

Perform the following tasks to implement voice interaction with Amazon Lex in your iOS app.

Add a voice button and bind it to the Lex SDK UI component
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Add a voice UIView into your storyboard scene or xib file, add a voice button (the UI element that enables users to speak to Amazon Lex). Map the voice button to the SDK button component by setting the `class` for the voice UIView to `AWSLexVoiceButton` as illustrated in the following image.

.. image:: images/conversational-bots-voice-ui.png



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon S3 TransferUtility for iOS
##################################

On this page:

.. contents::
   :local:
   :depth: 1

:guilabel:`Amazon Simple Storage Service (S3)`

`Amazon Simple Storage Service (S3) <http://aws.amazon.com/s3/>`_ provides secure,
durable, highly scalable object storage in the cloud. Using the AWS Mobile SDK for iOS, you can
directly access Amazon S3 from your mobile app. For information about Amazon S3 regional availability,
see  `AWS Service Region Availability <http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.

:guilabel:`TransferUtility Features`

In addition to downloading, uploading, pausing, resuming and cancelling transfers, use the Amazon S3 TransferUtility class to transfer data to a file without saving a source file. This class also completes transfers in the background, even if the system suspends your app. User choice to suspend an app cancels in-progress transfers.

.. admonition:: Should I Use ``TransferManager`` or ``TransferUtility``?

    To choose which API best suits your needs, see :ref:`manager-or-utility`


Setup
=====

To set your project up to use ``TransferUtility``, take the steps below.

1. Setup the SDK, Credentials, and Services
-------------------------------------------

    Follow the steps described in :doc:`s3-setup-for-ios` to install the AWS Mobile SDK for iOS and configure
    AWS services, credentials, and permissions.

2. Import the SDK Amazon S3 APIs
--------------------------------

    Add the following import statements to your Xcode project.

        .. container:: option

            Swift
                .. code-block:: swift

                    import AWSS3

            Objective-C
                .. code-block:: objc

                    #import <AWSS3/AWSS3.h>

3. Configure the Application Delegate
---------------------------------------

    The Transfer Utility for iOS uses the background transfer feature in iOS to continue data
    transfers even when your app isn't running.

    Call the following method in ``- application:handleEventsForBackgroundURLSession:``
    ``completionHandler:`` of your application delegate. When the app in the foreground, the delegate
    enables iOS to notify ``TransferUtility`` that a transfer has completed.

        .. container:: option

            Swift
                .. code-block:: swift

                    func application(_ application: UIApplication, handleEventsForBackgroundURLSession identifier: String, completionHandler: @escaping () -> Void) {
                        // Store the completion handler. 
                        AWSS3TransferUtility.interceptApplication(application, handleEventsForBackgroundURLSession: identifier, completionHandler: completionHandler)
                    }


            Objective-C
                .. code-block:: objc


                    - (void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier
                    completionHandler:(void (^)())completionHandler {
                        /* Store the completion handler.*/
                        [AWSS3TransferUtility interceptApplication:application handleEventsForBackgroundURLSession:identifier completionHandler:completionHandler];
                    }

Uploading a File
================

The following code for uploading a file by calling ``uploadFile:`` on ``AWSS3TransferUtility`` uses the
pattern that is common to all the types of transfers ``TransferUtility`` supports. For code examples for other kinds of transfer, see :ref:`more-examples`.
.

    .. container:: option

        Swift
            .. code-block:: swift

                let fileURL = // The file to upload
                let  transferUtility = AWSS3TransferUtility.default()
                transferUtility.uploadFile(fileURL,
                        bucket: S3BucketName,
                        key: S3UploadKeyName, 
                        contentType: "image/png",
                        expression: nil,
                        completionHandler: nil).continueWith {
                    (task) -> AnyObject! in if let error = task.error {
                        print("Error: \(error.localizedDescription)")
                    }

                    if let _ = task.result {
                        // Do something with uploadTask.
                    }
                    return nil;
                }

        Objective-C
            .. code-block:: objc

                NSURL *fileURL = // The file to upload.

                AWSS3TransferUtility *transferUtility = [AWSS3TransferUtility defaultS3TransferUtility];
                [[transferUtility uploadFile:fileURL
                                    bucket:@"YourBucketName"
                                    key:@"YourObjectKeyName"
                                    contentType:@"text/plain"
                                    expression:nil
                                    completionHandler:nil] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    if (task.result) {
                        AWSS3TransferUtilityUploadTask *uploadTask = task.result;
                        // Do something with uploadTask.
                    }

                    return nil;
                }];

.. _progress-completion:

Tracking Progress and Completion
================================

Implement progress and completion actions for TransferManager transfers by passing `progressBlock` and `completionHandler` blocks to the call to ``TransferUtility`` that initiates the transfer.

The following example of initiating a data upload shows how progress and completion handling is typically
done for all transfers.

    .. container:: option

        Swift
            .. code-block:: swift

                let data = // The data to upload

                let expression = AWSS3TransferUtilityUploadExpression()
                expression.progressBlock = {(task, progress) in DispatchQueue.main.async(execute: {
                        // Do something e.g. Update a progress bar.
                    })
                }

                let completionHandler = { (task, error) -> Void in
                    DispatchQueue.main.async(execute: {
                        // Do something e.g. Alert a user for transfer completion.
                        // On failed uploads, `error` contains the error object.
                    })
                }

                let  transferUtility = AWSS3TransferUtility.default()

                transferUtility.uploadData(data,
                            bucket: S3BucketName,
                            key: S3UploadKeyName,
                            contentType: "image/png",
                            expression: expression,
                            completionHandler: completionHandler).continueWith { (task) -> AnyObject! in
                    if let error = task.error {
                        print("Error: \(error.localizedDescription)")
                    }

                    if let _ = task.result {
                        // Do something with uploadTask.
                    }

                    return nil;
                }


        Objective-C
            .. code-block:: objc

                NSData *dataToUpload = // The data to upload.

                AWSS3TransferUtilityUploadExpression *expression = [AWSS3TransferUtilityUploadExpression new];
                expression.progressBlock = ^(AWSS3TransferUtilityTask *task, NSProgress *progress) {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        // Do something e.g. Update a progress bar.
                    });
                };


                AWSS3TransferUtilityUploadCompletionHandlerBlock completionHandler = ^(AWSS3TransferUtilityUploadTask *task, NSError *error) {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        // Do something e.g. Alert a user for transfer completion.
                        // On failed uploads, `error` contains the error object.
                    });
                };

                AWSS3TransferUtility *transferUtility = [AWSS3TransferUtility defaultS3TransferUtility];
                [[transferUtility uploadData:dataToUpload
                                bucket:@"YourBucketName"
                                key:@"YourObjectKeyName"
                                contentType:@"text/plain"
                                expression:expression
                                completionHandler:completionHandler] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    if (task.result) {
                       AWSS3TransferUtilityUploadTask *uploadTask = task.result;
                        // Do something with uploadTask.
                    }

                    return nil;
                }];

.. _managing-transfers:

Managing Transfers
==================

This section describes how to manage ``TransferUtility`` transfers at different points in the app lifecycle.

With the App in the Foreground
------------------------------

To suspend, resume, and cancel uploads and downloads, retain references to
``AWSS3TransferUtilityUploadTask`` and ``AWSS3TransferUtilityDownloadTask``.
To manage data transfers call ``suspend``, ``resume``, and ``cancel`` on those tasks.
The following example shows the ``cancel`` method being called on an upload.

    .. container:: option

        Swift
            .. code-block:: swift

                transferUtility.uploadFile(fileURL,
                        bucket: S3BucketName,
                        key: S3UploadKeyName,
                        contentType: "image/png",
                        expression: nil,
                        completionHandler: nil).continueWith {
                    (task) -> AnyObject! in if let error = task.error {
                        print("Error: \(error.localizedDescription)")
                    }

                    if let uploadTask = task.result {
                        uploadTask.cancel()
                    }
                    return nil;
                }

        Objective-C
            .. code-block:: objc

                [[transferUtility uploadFile:fileURL
                                    bucket:@"YourBucketName"
                                    key:@"YourObjectKeyName"
                                    contentType:@"text/plain"
                                    expression:nil
                                    completionHandler:nil] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    if (task.result) {
                        AWSS3TransferUtilityUploadTask *uploadTask = task.result;
                        [uploadTask cancel]
                    }

                    return nil;
                }];

When a Suspended App Returns to the Foreground
----------------------------------------------

Upon App Returning to the Foreground

When an app that has initiated a ``TransferUtility`` transfer becomes suspended and then returns to the foreground, the transfer may still be in progress or may have completed. In both cases, use the following code to reestablish the transfer as being handled by progress and completion blocks of the app in the foreground.

The code uses downloading a file as the example but the pattern also works for upload:

You receive ``AWSS3TransferUtilityUploadTask`` and ``AWSS3TransferUtilityDownloadTask`` when you initiate the upload and download respectively. These tasks have a property called ``taskIdentifier``, which uniquely identifies the transfer task object within the Transfer Utility. Your app should persist the identifier through closure and relaunch, so that you can uniquely identify the task objects when the app is comes back into the foreground.

   .. container:: option

        Swift
            .. code-block:: swift

                override func viewDidLoad() {
                super.viewDidLoad()

                ...

                let transferUtility = AWSS3TransferUtility.default()

                var uploadProgressBlock: AWSS3TransferUtilityProgressBlock? = {(task: AWSS3TransferUtilityTask, progress: Progress) in
                    DispatchQueue.main.async {
                        // Handle progress feedback, e.g. update progress bar
                    }
                }
                var downloadProgressBlock: AWSS3TransferUtilityProgressBlock? = {
                    (task: AWSS3TransferUtilityTask, progress: Progress) in DispatchQueue.main.async {
                        // Handle progress feedback, e.g. update progress bar
                    }
                }
                var completionBlockUpload:AWSS3TransferUtilityUploadCompletionHandlerBlock? = {
                    (task, error) in DispatchQueue.main.async {
                        // perform some action on completed upload operation
                    }
                }
                var completionBlockDownload:AWSS3TransferUtilityDownloadCompletionHandlerBlock? = {
                    (task, url, data, error) in DispatchQueue.main.async {
                        // perform some action on completed download operation
                    }
                }

                transferUtility.enumerateToAssignBlocks(forUploadTask: {
                    (task, progress, completion) -> Void in

                        let progressPointer = AutoreleasingUnsafeMutablePointer<AWSS3TransferUtilityProgressBlock?>(& uploadProgressBlock)

                        let completionPointer = AutoreleasingUnsafeMutablePointer<AWSS3TransferUtilityUploadCompletionHandlerBlock?>(&completionBlockUpload)

                        // Reassign your progress feedback
                        progress?.pointee = progressPointer.pointee

                        // Reassign your completion handler.
                        completion?.pointee = completionPointer.pointee

                }, downloadTask: {
                    (task, progress, completion) -> Void in

                        let progressPointer = AutoreleasingUnsafeMutablePointer<AWSS3TransferUtilityProgressBlock?>(&downloadProgressBlock)

                        let completionPointer = AutoreleasingUnsafeMutablePointer<AWSS3TransferUtilityDownloadCompletionHandlerBlock?>(&completionBlockDownload)

                        // Reassign your progress feedback
                        progress?.pointee = progressPointer.pointee

                        // Reassign your completion handler.
                        completion?.pointee = completionPointer.pointee
                })

                 if let downloadTask = task.result {
                    // Do something with downloadTask.
                }

        Objective-C
            .. code-block:: objc

                - (void)viewDidLoad {
                    [super viewDidLoad];

                    ...

                    AWSS3TransferUtility *transferUtility = [AWSS3TransferUtility defaultS3TransferUtility];
                    [transferUtility enumerateToAssignBlocksForUploadTask:^(
                        AWSS3TransferUtilityUploadTask *uploadTask,
                        __autoreleasing AWSS3TransferUtilityUploadProgressBlock *uploadProgressBlockReference,
                        __autoreleasing AWSS3TransferUtilityUploadCompletionHandlerBlock *completionHandlerReference
                    ) {
                        NSLog(@"%lu", (unsigned long)uploadTask.taskIdentifier);

                        // Use `uploadTask.taskIdentifier` to determine what blocks to assign.

                        *uploadProgressBlockReference = ...; // Reassign your progress feedback block.
                        *completionHandlerReference = ...; // Reassign your completion handler.
                    }
                    downloadTask:^(AWSS3TransferUtilityDownloadTask *downloadTask, __autoreleasing AWSS3TransferUtilityDownloadProgressBlock *downloadProgressBlockReference, __autoreleasing AWSS3TransferUtilityDownloadCompletionHandlerBlock *completionHandlerReference) {
                        NSLog(@"%lu", (unsigned long)downloadTask.taskIdentifier);

                            // Use `downloadTask.taskIdentifier` to determine what blocks to assign.
                       *downloadProgressBlockReference =  // Reassign your progress feedback block.
                       *completionHandlerReference = // Reassign your completion handler.
                    }];
                }

                if (task.result) {
                    AWSS3TransferUtilityUploadTask *downloadTask = task.result;
                    // Do something with downloadTask.
                }

.. _more-examples:

More Transfer Examples
======================

This section provides descriptions and abbreviated examples of the aspects of each type of
transfer that are unique. For information about typical code surrounding the following snippets
see :ref:`managing-transfers` and :ref:`progress-completion`.

Downloading to a File
---------------------

The following code shows how to download a file.

    .. container:: option

        Swift
            .. code-block:: swift

                let fileURL = // The file URL of the download destination.

                // Add progress and completion blocks
                . . .

                let  transferUtility = AWSS3TransferUtility.default()
                transferUtility.download(
                        to: fileURL
                        bucket: S3BucketName,
                        key: S3DownloadKeyName,
                        expression: expression,
                        completionHandler: completionHandler
                ).continueWith {
                    (task) -> AnyObject! in if let error = task.error {
                        print("Error: \(error.localizedDescription)")
                    }

                    if let _ = task.result {
                        // Do something with downloadTask.
                    }
                    return nil;
                }

        Objective-C
            .. code-block:: objc

                NSURL *fileURL = ...; // The file URL of the download destination.

                // Add progress and completion blocks
                . . .

                AWSS3TransferUtility *transferUtility = [AWSS3TransferUtility defaultS3TransferUtility];
                [[transferUtility downloadToURL:nil
                                bucket:S3BucketName
                                key:S3DownloadKeyName
                                expression:expression
                                completionHandler:completionHandler] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    if (task.result) {
                        AWSS3TransferUtilityDownloadTask *downloadTask = task.result;
                        // Do something with downloadTask.
                    }

                    return nil;
                }];

Uploading Binary Data to a File
-------------------------------

To upload data to a file in Amazon S3 call ``uploadData:``.

This method saves the data as a file in a temporary directory. The next time ``AWSS3TransferUtility`` is
initialized, the expired temporary files are cleaned up. If you upload many large objects to an Amazon S3 bucket in a short period of time, it is more efficient to use the upload file method and then manually purge the unnecessary temporary files as early as possible.

    .. container:: option

        Swift
            .. code-block:: swift

                let data = // The data to upload

                // Add progress and completion blocks
                . . .

                let  transferUtility = AWSS3TransferUtility.default()

                transferUtility.uploadData(data,
                            bucket: S3BucketName,
                            key: S3UploadKeyName,
                            contentType: "image/png",
                            expression: expression,
                            completionHandler: completionHandler).continueWith { (task) -> AnyObject! in
                    if let error = task.error {
                        print("Error: \(error.localizedDescription)")
                    }
 
                    if let _ = task.result {
                        // Do something with uploadTask.
                    }

                    return nil;
                }


        Objective-C
            .. code-block:: objc

                NSData *dataToUpload = // The data to upload.

                // Add progress and completion blocks
                . . .

                AWSS3TransferUtility *transferUtility = [AWSS3TransferUtility defaultS3TransferUtility];
                [[transferUtility uploadData:dataToUpload
                                bucket:@"YourBucketName"
                                key:@"YourObjectKeyName"
                                contentType:@"text/plain"
                                expression:expression
                                completionHandler:completionHandler] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    if (task.result) {
                        AWSS3TransferUtilityUploadTask *uploadTask = task.result;
                        // Do something with uploadTask.
                    }

                    return nil;
                }];


Downloading Binary Data to a File
---------------------------------

The following code shows how to download binary a file.

    .. container:: option

        Swift
            .. code-block:: swift

                let fileURL = // The file URL of the download destination.

                // Add progress and completion blocks
                . . .

                let  transferUtility = AWSS3TransferUtility.default()
                transferUtility.downloadData(
                        fromBucket: S3BucketName,
                        key: S3DownloadKeyName,
                        expression: expression,
                        completionHandler: completionHandler
                ).continueWith {
                    (task) -> AnyObject! in if let error = task.error {
                        print("Error: \(error.localizedDescription)")
                    }

                    if let _ = task.result {
                        // Do something with downloadTask.
                    }

                    return nil;
                }

        Objective-C
            .. code-block:: objc

                AWSS3TransferUtilityDownloadExpression *expression = [AWSS3TransferUtilityDownloadExpression new];

                // Add progress and completion blocks
                . . .

                AWSS3TransferUtility *transferUtility = [AWSS3TransferUtility defaultS3TransferUtility];
                [[transferUtility downloadDataFromBucket:S3BucketName
                    key:S3DownloadKeyName
                    expression:expression
                    completionHandler:completionHandler] continueWithBlock:^id(AWSTask *task) {
                        if (task.error) {
                            NSLog(@"Error: %@", task.error);
                        }
                        if (task.result) {
                            AWSS3TransferUtilityDownloadTask *downloadTask = task.result;
                            // Do something with downloadTask.
                        }

                        return nil;
                    }
                ];


Limitations
===========

The S3 Transfer Utility generates Amazon S3 pre-signed URLs to use for background data transfer.
Using Amazon Cognito Identity, you receive AWS temporary credentials. The credentials are valid for up to 60 minutes.
At the same time, generated S3 pre-signed URLs cannot last longer than that time. Because of this
limitation, the Amazon S3 Transfer Utility enforces 50 minute transfer timeouts, leaving a 10 minute
buffer before AWS temporary credentials are regenerated. After 50 minutes, you receive a transfer failure.

If you need to transfer data that cannot be transferred in under 50 minutes, use `AWSS3` instead.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at https://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. Service links
   =============

   Please try to keep the entries *within each section* in alphabetic order!

   This file provides links to the various services defined in common_includes.txt.


.. Marketing links
   ---------------
.. _aws-tools: https://aws.amazon.com/tools/
.. _ec2-pricing: https://aws.amazon.com/ec2/pricing/
.. _ec2-instance-types: https://aws.amazon.com/ec2/instance-types/


.. Service links
.. -------------
.. _ABP: https://aws.amazon.com/api-gateway/
.. _ACB: https://aws.amazon.com/codebuild/
.. _ACBlong: ACB_
.. _ACC: https://aws.amazon.com/codecommit/
.. _ACClong: ACC_
.. _ACD: https://aws.amazon.com/codedeploy/
.. _ACDlong: ACD_
.. _ACP: https://aws.amazon.com/codepipeline/
.. _ACPlong: ACP_
.. _AK: https://aws.amazon.com/kinesis/
.. _AKF: https://aws.amazon.com/kinesis/firehose/
.. _AKFlong: AKF_
.. _AKlong: AK_
.. _APP: https://aws.amazon.com/autoscaling/
.. _CF: https://aws.amazon.com/cloudfront/
.. _CFN: https://aws.amazon.com/cloudformation/
.. _CFNlong: CFN_
.. _CFlong: CF_
.. _COG: https://aws.amazon.com/cognito/
.. _COGID: COG_
.. _COGSync: COG_
.. _COGlong: COG_
.. _CW: https://aws.amazon.com/cloudwatch/
.. _DDB: https://aws.amazon.com/dynamodb/
.. _DDBlong: DDB_
.. _EB: https://aws.amazon.com/elasticbeanstalk/
.. _EBS: https://aws.amazon.com/ebs/
.. _EBSlong: EBS_
.. _EBlong: EB_
.. _EC2: https://aws.amazon.com/ec2/
.. _EC2long: EC2_
.. _ELB: https://aws.amazon.com/elasticloadbalancing/
.. _ELBlong: ELB_
.. _GL: https://aws.amazon.com/glacier
.. _GLLong: GL_
.. _IAM: https://aws.amazon.com/iam/
.. _IAMlong: IAM_
.. _LAM: https://aws.amazon.com/lambda/
.. _LAMlong: LAM_
.. _MA: https://aws.amazon.com/mobileanalytics/
.. _MAlong: MA_
.. _OPS: https://aws.amazon.com/opsworks/
.. _OPSlong: OPS_
.. _RDS: https://aws.amazon.com/rds/
.. _RDSlong: RDS_
.. _S3: https://aws.amazon.com/s3/
.. _S3long: S3_
.. _SNS: https://aws.amazon.com/sns/
.. _SNSlong: SNS_
.. _SQS: https://aws.amazon.com/sqs/
.. _SQSlong: SQS_
.. _STS: https://aws.amazon.com/documentation/iam/
.. _STSlong: STS_
.. _SWF: https://aws.amazon.com/swf/
.. _SWFlong: SWF_


.. Links to things within service guides and other non-standard guide links
   ------------------------------------------------------------------------
.. _AMI: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html
.. _AMIlong: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html
.. _HSM-cli: https://docs.aws.amazon.com/cloudhsm/latest/userguide/cli-guide.html
.. _JSB-gsg: https://docs.aws.amazon.com/AWSJavaScriptSDK/guide/browser-intro.html
.. _MT-wsdl: https://docs.aws.amazon.com/AWSMechanicalTurk/2012-03-25/AWSMechanicalTurkRequester.wsdl
.. _RDS-pricing: https://aws.amazon.com/rds/pricing/
.. _jflow-ref: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/simpleworkflow/flow/package-frame.html
.. _sdk-js-dg: https://docs.aws.amazon.com/AWSJavaScriptSDK/guide/index.html#Developer_Guide
.. _sdk-node-gsg: https://docs.aws.amazon.com/AWSJavaScriptSDK/guide/node-intro.html
.. _sdk-php-mg-v2: https://docs.aws.amazon.com/aws-sdk-php/guide/latest/migration-guide.html
.. _sdk-php-mg-v3: https://docs.aws.amazon.com/aws-sdk-php/v3/guide/guide/migration.html
.. _sdk-php-sbsg-v2: https://docs.aws.amazon.com/aws-sdk-php/guide/latest/side-by-side.html


.. Links to "Quick Reference Card" docs
   ------------------------------------
.. _CW-qrc: https://awsdocs.s3.amazonaws.com/AmazonCloudWatch/latest/acw-qrc.pdf
.. _EC2-qrc: https://awsdocs.s3.amazonaws.com/EC2/latest/ec2-qrc.pdf
.. _ELB-qrc: https://awsdocs.s3.amazonaws.com/ElasticLoadBalancing/latest/elb-qrc.pdf
.. _IAM-qrc: https://awsdocs.s3.amazonaws.com/IAM/latest/iam-qrc.pdf
.. _MT-qrc: https://awsdocs.s3.amazonaws.com/MechTurk/latest/QRC-MTurk.pdf
.. _RDS-qrc: https://awsdocs.s3.amazonaws.com/RDS/latest/rds-qrc.pdf
.. _S3-qrc: https://awsdocs.s3.amazonaws.com/S3/latest/s3-qrc.pdf


.. SDKs, frameworks, toolkits and other interface links
   ----------------------------------------------------
.. _cli-docs: https://aws.amazon.com/documentation/cli/
.. _cli: https://aws.amazon.com/cli/
.. _clilong: cli_
.. _console: https://console.aws.amazon.com/console/home
.. _sdk-android: https://aws.amazon.com/mobile/sdk/
.. _sdk-cpp: https://aws.amazon.com/sdk-for-cpp/
.. _sdk-ios: https://aws.amazon.com/mobile/sdk/
.. _sdk-java: https://aws.amazon.com/sdk-for-java/
.. _sdk-js: https://aws.amazon.com/javascript/
.. _sdk-mobile: https://aws.amazon.com/mobile/
.. _sdk-net: https://aws.amazon.com/sdk-for-net/
.. _sdk-php: https://aws.amazon.com/sdk-for-php/
.. _sdk-python: https://aws.amazon.com/sdk-for-python/
.. _sdk-ruby: https://aws.amazon.com/sdk-for-ruby/
.. _tke: https://aws.amazon.com/eclipse/
.. _tvs: https://aws.amazon.com/visualstudio/
.. _twp: https://aws.amazon.com/powershell/


.. Common references in documentation:
   -----------------------------------
.. |regions-and-endpoints| replace:: Regions and Endpoints
.. _regions-and-endpoints: https://docs.aws.amazon.com/general/latest/gr/rande.html

.. |aws-credentials| replace:: AWS Security Credentials
.. _aws-credentials: https://docs.aws.amazon.com/general/latest/gr/aws-security-credentials.html

.. |about-shared-credfile| replace:: A New and Standardized Way to Manage Credentials in the AWS SDKs
.. _about-shared-credfile: https://blogs.aws.amazon.com/security/post/Tx3D6U6WSFGOK2H/A-New-and-Standardized-Way-to-Manage-Credentials-in-the-AWS-SDKs

.. |signing-requests| replace:: Authenticating Requests
.. _signing-requests: https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html

.. |sdk-doc-examples| replace:: AWS SDK Documentation Examples on GitHub
.. _sdk-doc-examples: https://github.com/awsdocs/aws-doc-sdk-examples
.. _sdk-doc-examples-dl: https://github.com/awsdocs/aws-doc-sdk-examples/archive/master.zip




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. Amazon SWF-specific includes

.. |rbflow-default-domain| replace:: ``FlowDefault``
.. |rbflow-samples| replace:: awslabs/aws-flow-ruby-samples
.. |runner-cmd| replace:: :command:`aws-flow-ruby`
.. |utility-cmd| replace:: :command:`aws-flow-utils`
.. |console-swf| replace:: Amazon SWF Dashboard

.. Some useful links

.. _awsflow: http://aws.amazon.com/swf/details/flow/
.. _rbflow: http://github.com/aws/aws-flow-ruby
.. _rbflow-samples: http://github.com/awslabs/aws-flow-ruby-samples
.. _aws-flow-ruby-samples: rbflow-samples_
.. _console-swf: http://console.aws.amazon.com/swf
.. _runner-cmd: cmd-aws-flow-ruby.html
.. _utility-cmd: cmd-aws-flow-utils.html

.. _sdk-js-swf-ref: http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/SWF.html



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. Amazon EC2-specific includes

.. links to user guide topics

.. |ec2-ug-using-tags| replace:: Tagging Your Amazon EC2 Resources
.. _ec2-ug-using-tags: http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. REGIONS & ENDPOINTS

.. |region-api-default| replace:: us-east-1
.. |region-console-default| replace:: us-west-2

.. |region-sdk-default| replace:: USEast1

.. |apnortheast1-name| replace:: Asia Pacific (Tokyo) Region
.. |region-ap-northeast-1| replace:: Asia Pacific (Tokyo)

.. |apnortheast2-name| replace:: Asia Pacific (Seoul) Region
.. |region-ap-northeast-2| replace:: Asia Pacific (Seoul)

.. |apsouth1-name| replace:: Asia Pacific (Mumbai) Region
.. |region-ap-south-1| replace:: Asia Pacific (Mumbai)

.. |apsoutheast1-name| replace:: Asia Pacific (Singapore) Region
.. |region-ap-southeast-1| replace:: Asia Pacific (Singapore)

.. |apsoutheast2-name| replace:: Asia Pacific (Sydney) Region
.. |region-ap-southeast-2| replace:: Asia Pacific (Sydney)

.. |cacentral1-name| replace:: Canada (Central) Region
.. |region-ca-central-1| replace:: Canada (Central)

.. |cnnorth1-name| replace:: China (Beijing) Region
.. |region-cn-north-1| replace:: China (Beijing)

.. |eucentral1-name| replace:: EU (Frankfurt) Region
.. |region-eu-central-1| replace:: EU (Frankfurt)

.. |euwest1-name| replace:: EU (Ireland) Region
.. |region-eu-west-1| replace:: EU (Ireland)

.. |euwest2-name| replace:: EU (London) Region
.. |region-eu-west-2| replace:: EU (London)

.. |govuswest1-name| replace:: AWS GovCloud (US)
.. |region-gov-us-west-1| replace:: AWS GovCloud (US)

.. |saeast1-name| replace:: South America (Sao Paulo) Region
.. |region-sa-east-1| replace:: South America (Sao Paulo)

.. |useast1-name| replace:: US East (N. Virginia) Region
.. |region-us-east-1| replace:: US East (N. Virginia)

.. |useast2-name| replace:: US East (Ohio) Region
.. |region-us-east-2| replace:: US East (Ohio)

.. |uswest1-name| replace:: US West (N. California) Region
.. |region-us-west-1| replace:: US West (N. California)

.. |uswest2-name| replace:: US West (Oregon) Region
.. |region-us-west-2| replace:: US West (Oregon)




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

   Links to various AWS guides

   None of these should have anything after the final '/' character (and all of
   them should include it), they're used to generate extlinks for the guides.

.. Service Guide links
   -------------------
.. _AAS-dg: https://docs.aws.amazon.com/appstream/latest/developerguide/
.. _ABP-dg: https://docs.aws.amazon.com/apigateway/latest/developerguide/
.. _ACB-api: https://docs.aws.amazon.com/codebuild/latest/APIReference/
.. _ACB-cli: https://docs.aws.amazon.com/cli/latest/reference/codebuild/
.. _ACB-ug: https://docs.aws.amazon.com/codebuild/latest/userguide/
.. _ACC-api: https://docs.aws.amazon.com/codecommit/latest/APIReference/
.. _ACC-cli: https://docs.aws.amazon.com/cli/latest/reference/codecommit/
.. _ACC-ug: https://docs.aws.amazon.com/codecommit/latest/userguide/
.. _ACD-api: https://docs.aws.amazon.com/codedeploy/latest/APIReference/
.. _ACD-cli: https://docs.aws.amazon.com/cli/latest/reference/deploy/
.. _ACD-ug: https://docs.aws.amazon.com/codedeploy/latest/userguide/
.. _ACM-api: https://docs.aws.amazon.com/acm/latest/APIReference/
.. _ACM-ug: https://docs.aws.amazon.com/acm/latest/userguide/
.. _ACP-api: https://docs.aws.amazon.com/codepipeline/latest/APIReference/
.. _ACP-cli: https://docs.aws.amazon.com/cli/latest/reference/codepipeline/
.. _ACP-ug: https://docs.aws.amazon.com/codepipeline/latest/userguide/
.. _ADS-admin: https://docs.aws.amazon.com/directoryservice/latest/admin-guide/
.. _ADS-dg: https://docs.aws.amazon.com/directoryservice/latest/devguide/
.. _AEB-api: https://docs.aws.amazon.com/elasticbeanstalk/latest/api/
.. _AEB-dg: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/
.. _AK-api: https://docs.aws.amazon.com/kinesis/latest/APIReference/
.. _AK-dg: https://docs.aws.amazon.com/kinesis/latest/dev/
.. _AKA-dg: https://docs.aws.amazon.com/analytics/latest/dev/
.. _AKF-api: https://docs.aws.amazon.com/firehose/latest/APIReference/
.. _AKF-api: https://docs.aws.amazon.com/firehose/latest/APIReference/
.. _AKF-dg: https://docs.aws.amazon.com/firehose/latest/dev/
.. _AKF-dg: https://docs.aws.amazon.com/firehose/latest/dev/
.. _AKS-api: https://docs.aws.amazon.com/kinesis/latest/APIReference/
.. _AKS-dg: https://docs.aws.amazon.com/kinesis/latest/dev/
.. _AMP-ug: https://docs.aws.amazon.com/amp/latest/userguide/
.. _AS-api: https://docs.aws.amazon.com/AutoScaling/latest/APIReference/
.. _AS-dg: https://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/
.. _AS-gsg: https://docs.aws.amazon.com/AutoScaling/latest/GettingStartedGuide/
.. _ATP-dg: https://docs.aws.amazon.com/devicefarm/latest/developerguide/
.. _AWS-gr: https://docs.aws.amazon.com/general/latest/gr/
.. _AWSDC-api: https://docs.aws.amazon.com/directconnect/latest/APIReference/
.. _AWSDC-ug: https://docs.aws.amazon.com/directconnect/latest/UserGuide/
.. _AWSSG-api: https://docs.aws.amazon.com/storagegateway/latest/APIReference/
.. _AWSSG-ug: https://docs.aws.amazon.com/storagegateway/latest/userguide/
.. _CC-api: https://docs.aws.amazon.com/config/latest/APIReference/
.. _CC-dg: https://docs.aws.amazon.com/config/latest/developerguide/
.. _CF-api: https://docs.aws.amazon.com/AmazonCloudFront/latest/APIReference/
.. _CF-dg: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/
.. _CFN-api: https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/
.. _CFN-gsg: https://docs.aws.amazon.com/AWSCloudFormation/latest/GettingStartedGuide/
.. _CFN-ug: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/
.. _COG-api: https://docs.aws.amazon.com/cognitoidentity/latest/APIReference/
.. _COG-dg: https://docs.aws.amazon.com/cognito/latest/developerguide/
.. _COGSYNC-api: https://docs.aws.amazon.com/cognitosync/latest/APIReference/
.. _CS-dg: https://docs.aws.amazon.com/cloudsearch/latest/developerguide/
.. _CT-api: https://docs.aws.amazon.com/awscloudtrail/latest/APIReference/
.. _CT-cli: https://docs.aws.amazon.com/cli/latest/reference/cloudtrail/
.. _CT-ug: https://docs.aws.amazon.com/awscloudtrail/latest/userguide/
.. _CW-api: https://docs.aws.amazon.com/AmazonCloudWatch/latest/APIReference/
.. _CW-cli: https://docs.aws.amazon.com/AmazonCloudWatch/latest/cli/
.. _CW-ug: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/
.. _CW-dg: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/
.. _CW-gsg: https://docs.aws.amazon.com/AmazonCloudWatch/latest/GettingStartedGuide/
.. _CWE-api: https://docs.aws.amazon.com/AmazonCloudWatchEvents/latest/APIReference/
.. _CWE-ug: https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/
.. _CWE-dg: https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/
.. _CWL-api: https://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/
.. _CWL-ug: https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/
.. _CWL-dg: https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/
.. _DDB-api: https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/
.. _DDB-dg: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/
.. _DDB-gsg: https://docs.aws.amazon.com/amazondynamodb/latest/gettingstartedguide/
.. _DDB-streams-api: https://docs.aws.amazon.com/dynamodbstreams/latest/APIReference/
.. _DMS-api: https://docs.aws.amazon.com/dms/latest/APIReference
.. _DMS-ug: https://docs.aws.amazon.com/dms/latest/userguide
.. _DP-dg: https://docs.aws.amazon.com/AmazonDevPay/latest/DevPayDeveloperGuide/
.. _DP-gsg: https://docs.aws.amazon.com/AmazonDevPay/latest/DevPayGettingStartedGuide/
.. _EB-dg: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/
.. _EC2-api: https://docs.aws.amazon.com/AWSEC2/latest/APIReference/
.. _EC2-cli-ref: https://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/
.. _EC2-gsg: https://docs.aws.amazon.com/AWSEC2/latest/GettingStartedGuide/
.. _EC2-ug-win: https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/
.. _EC2-ug: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/
.. _EC2-ug: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/
.. _ECR-api: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/
.. _ECR-ug: https://docs.aws.amazon.com/AmazonECR/latest/userguide/
.. _ECS-api: https://docs.aws.amazon.com/AmazonECS/latest/APIReference/
.. _ECS-dg: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/
.. _EDP-api: https://docs.aws.amazon.com/datapipeline/latest/APIReference/
.. _EDP-dg: https://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/
.. _EDP-gsg: https://docs.aws.amazon.com/datapipeline/latest/GettingStartedGuide/
.. _EFS-ug: https://docs.aws.amazon.com/efs/latest/ug/
.. _ELB-api: https://docs.aws.amazon.com/ElasticLoadBalancing/latest/APIReference/
.. _ELB-dg: https://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/
.. _ELC-api: https://docs.aws.amazon.com/AmazonElastiCache/latest/APIReference/
.. _ELC-clt: https://docs.aws.amazon.com/AmazonElastiCache/latest/CommandLineReference/
.. _ELC-gsg: https://docs.aws.amazon.com/AmazonElastiCache/latest/GettingStartedGuide
.. _ELC-ug: https://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/
.. _EMR-api: https://docs.aws.amazon.com/ElasticMapReduce/latest/API/
.. _EMR-dg: https://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/
.. _EMR-gsg: https://docs.aws.amazon.com/ElasticMapReduce/latest/GettingStartedGuide/
.. _EMR-mg: https://docs.aws.amazon.com/ElasticMapReduce/latest/ManagementGuide/
.. _ES-dg: https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/
.. _ET-dg: https://docs.aws.amazon.com/elastictranscoder/latest/developerguide/
.. _FF-dg: https://docs.aws.amazon.com/amazonswf/latest/awsflowguide/
.. _FPS-amqs: https://docs.aws.amazon.com/AmazonFPS/latest/FPSAccountManagementGuide/
.. _FPS-apgq: https://docs.aws.amazon.com/AmazonFPS/latest/FPSAggregatedGuide/
.. _FPS-api: https://docs.aws.amazon.com/AmazonFPS/latest/FPSAPIReference/
.. _FPS-aqs: https://docs.aws.amazon.com/AmazonFPS/latest/FPSAdvancedGuide/
.. _FPS-bqs: https://docs.aws.amazon.com/AmazonFPS/latest/FPSBasicGuide/
.. _FPS-gsg: https://docs.aws.amazon.com/AmazonFPS/latest/FPSGettingStartedGuide/
.. _FPS-mqs: https://docs.aws.amazon.com/AmazonFPS/latest/FPSMarketplaceGuide/
.. _FWS-api: https://docs.aws.amazon.com/fws/latest/APIReference/
.. _FWS-dg: https://docs.aws.amazon.com/fws/latest/DeveloperGuide/
.. _FWS-gsg: https://docs.aws.amazon.com/fws/latest/GettingStartedGuide/
.. _GL-dg: https://docs.aws.amazon.com/amazonglacier/latest/dev/
.. _GLU-dg: http://docs.aws.amazon.com/glue/latest/dg/
.. _GOVCLOUD-US-ug: https://docs.aws.amazon.com/govcloud-us/latest/UserGuide/
.. _GS-api: https://docs.aws.amazon.com/gamelift/latest/apireference/
.. _GS-dg: https://docs.aws.amazon.com/gamelift/latest/developerguide/
.. _GSG-aws: https://docs.aws.amazon.com/gettingstarted/latest/awsgsg-intro
.. _GSG-deploy: https://docs.aws.amazon.com/gettingstarted/latest/deploy/
.. _GSG-emr: https://docs.aws.amazon.com/gettingstarted/latest/emr/
.. _GSG-free: https://docs.aws.amazon.com/gettingstarted/latest/awsgsg-freetier/
.. _GSG-lnx: https://docs.aws.amazon.com/gettingstarted/latest/computebasics-linux/
.. _GSG-swh: https://docs.aws.amazon.com/gettingstarted/latest/swh/
.. _GSG-wah: https://docs.aws.amazon.com/gettingstarted/latest/wah/
.. _GSG-wahl: https://docs.aws.amazon.com/gettingstarted/latest/wah-linux/
.. _GSG-win: https://docs.aws.amazon.com/gettingstarted/latest/computebasics/
.. _HSM-api: https://docs.aws.amazon.com/cloudhsm/latest/dg/
.. _HSM-dg: https://docs.aws.amazon.com/cloudhsm/latest/dg/
.. _HSM-ug: https://docs.aws.amazon.com/cloudhsm/latest/userguide/
.. _IAM-api: https://docs.aws.amazon.com/IAM/latest/APIReference/
.. _IAM-cli-ref: https://docs.aws.amazon.com/IAM/latest/CLIReference/
.. _IAM-ug: https://docs.aws.amazon.com/IAM/latest/UserGuide/
.. _IE-dg: https://docs.aws.amazon.com/AWSImportExport/latest/DG/
.. _INS-api: https://docs.aws.amazon.com/inspector/latest/APIReference/
.. _INS-ug: https://docs.aws.amazon.com/inspector/latest/userguide/
.. _IOT-api: https://docs.aws.amazon.com//iot/latest/apireference/
.. _IOT-dg: https://docs.aws.amazon.com/iot/latest/developerguide/
.. _IOT-gsg: https://docs.aws.amazon.com/iot/latest/gettingstartedguide/
.. _IOT-ug: https://docs.aws.amazon.com/iot/latest/userguide/
.. _JSB-api: https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/
.. _KMS-api: https://docs.aws.amazon.com/kms/latest/APIReference/
.. _KMS-dg: https://docs.aws.amazon.com/kms/latest/developerguide/
.. _LAM-api: https://docs.aws.amazon.com/lambda/latest/dg/
.. _LAM-dg: https://docs.aws.amazon.com/lambda/latest/dg/
.. _LAM-dg: https://docs.aws.amazon.com/lambda/latest/dg/
.. _LY-dg: https://docs.aws.amazon.com/lumberyard/latest/developerguide/
.. _LY-gsg: https://docs.aws.amazon.com/lumberyard/latest/gettingstartedguide/
.. _LY-qsg: https://docs.aws.amazon.com/lumberyard/latest/quickstartguide/
.. _LY-ug: https://docs.aws.amazon.com/lumberyard/latest/userguide/
.. _MA-ug: https://docs.aws.amazon.com/mobileanalytics/latest/ug/
.. _MCE-ug: http://docs.aws.amazon.com/macie/latest/userguide/
.. _ML-api: https://docs.aws.amazon.com/machine-learning/latest/APIReference/
.. _ML-dg: https://docs.aws.amazon.com/machine-learning/latest/dg/
.. _MT-api: https://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/
.. _MT-clt: https://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkCLT/
.. _MT-dg: https://docs.aws.amazon.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/
.. _MT-gsg: https://docs.aws.amazon.com/AWSMechTurk/latest/AWSMechanicalTurkGettingStartedGuide/
.. _MT-rui: https://docs.aws.amazon.com/AWSMechTurk/latest/RequesterUI/
.. _OPS-api: https://docs.aws.amazon.com/opsworks/latest/APIReference/
.. _OPS-ug: https://docs.aws.amazon.com/opsworks/latest/userguide/
.. _PAAPI-dg: https://docs.aws.amazon.com/AWSECommerceService/latest/DG/
.. _PAAPI-gsg: https://docs.aws.amazon.com/AWSECommerceService/latest/GSG/
.. _PS-ug: https://docs.aws.amazon.com/IAM/latest/UsingPolicySimulatorGuide/
.. _R53-api: https://docs.aws.amazon.com/Route53/latest/APIReference/
.. _R53-dg: https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/
.. _RC-api: https://docs.aws.amazon.com/remote-configuration/latest/APIReference/
.. _RDS-api: https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/
.. _RDS-clt: https://docs.aws.amazon.com/AmazonRDS/latest/CommandLineReference/
.. _RDS-gsg: https://docs.aws.amazon.com/AmazonRDS/latest/GettingStartedGuide/
.. _RDS-ug: https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/
.. _REK-dg: https://docs.aws.amazon.com/rekognition/latest/dg/
.. _RS-api: https://docs.aws.amazon.com/redshift/latest/APIReference/
.. _RS-cli: https://docs.aws.amazon.com/cli/latest/reference/redshift/
.. _RS-dg: https://docs.aws.amazon.com/redshift/latest/dg/
.. _RS-gsg: https://docs.aws.amazon.com/redshift/latest/gsg/
.. _RS-mgmt: https://docs.aws.amazon.com/redshift/latest/mgmt/
.. _S3-api: https://docs.aws.amazon.com/AmazonS3/latest/API/
.. _S3-dg: https://docs.aws.amazon.com/AmazonS3/latest/dev/
.. _S3-gsg: https://docs.aws.amazon.com/AmazonS3/latest/gsg/
.. _S3-ug: https://docs.aws.amazon.com/AmazonS3/latest/UG/
.. _SC-admin: https://docs.aws.amazon.com/servicecatalog/latest/adminguide/
.. _SC-ug: https://docs.aws.amazon.com/servicecatalog/latest/userguide/
.. _SDB-dg: https://docs.aws.amazon.com/AmazonSimpleDB/latest/DeveloperGuide/
.. _SDB-gsg: https://docs.aws.amazon.com/AmazonSimpleDB/latest/GettingStartedGuide/
.. _SES-api: https://docs.aws.amazon.com/ses/latest/APIReference/
.. _SES-dg: https://docs.aws.amazon.com/ses/latest/DeveloperGuide/
.. _SFN-api: https://docs.aws.amazon.com/step-functions/latest/apireference/
.. _SFN-dg: https://docs.aws.amazon.com/step-functions/latest/dg/
.. _SIMPLE-AD-admin: https://docs.aws.amazon.com/directoryservice/latest/admin-guide/
.. _SLK-dg: https://docs.aws.amazon.com/silk/latest/developerguide/
.. _SNS-api: https://docs.aws.amazon.com/sns/latest/api/
.. _SNS-cli: https://docs.aws.amazon.com/sns/latest/cli/
.. _SNS-dg: https://docs.aws.amazon.com/sns/latest/dg/
.. _SNS-gsg: https://docs.aws.amazon.com/sns/latest/gsg/
.. _SP-gsg: https://docs.aws.amazon.com/AmazonSimplePay/latest/ASPGettingStartedGuide/
.. _SP-ug: https://docs.aws.amazon.com/AmazonSimplePay/latest/ASPAdvancedUserGuide/
.. _SQS-api: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/
.. _SQS-dg: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/
.. _SQS-gsg: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSGettingStartedGuide/
.. _SSM-api: https://docs.aws.amazon.com/ssm/latest/APIReference/
.. _STS-api: https://docs.aws.amazon.com/STS/latest/APIReference/
.. _STS-ug: https://docs.aws.amazon.com/STS/latest/UsingSTS/
.. _STS-ug: https://docs.aws.amazon.com/STS/latest/UsingSTS/
.. _SUP-api: https://docs.aws.amazon.com/awssupport/latest/APIReference/
.. _SUP-ug: https://docs.aws.amazon.com/awssupport/latest/user/
.. _SWF-api: https://docs.aws.amazon.com/amazonswf/latest/apireference/
.. _SWF-dg: https://docs.aws.amazon.com/amazonswf/latest/developerguide/
.. _TVS-ug: https://docs.aws.amazon.com/AWSToolkitVS/latest/UserGuide/
.. _TWP-ref: https://docs.aws.amazon.com/powershell/latest/reference/
.. _TWP-ug: https://docs.aws.amazon.com/powershell/latest/userguide/
.. _VPC-admin: https://docs.aws.amazon.com/AmazonVPC/latest/NetworkAdminGuide/
.. _VPC-gsg: https://docs.aws.amazon.com/AmazonVPC/latest/GettingStartedGuide/
.. _VPC-peer: https://docs.aws.amazon.com/AmazonVPC/latest/PeeringGuide/
.. _VPC-ug: https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/
.. _WAF-api: https://docs.aws.amazon.com/waf/latest/APIReference/
.. _WAF-dg: https://docs.aws.amazon.com/waf/latest/developerguide/
.. _WAM-admin: https://docs.aws.amazon.com/wam/latest/adminguide/
.. _WAM-ug: https://docs.aws.amazon.com/wam/latest/userguide/
.. _WD-ag: https://docs.aws.amazon.com/workdocs/latest/adminguide/
.. _WD-ug: https://docs.aws.amazon.com/workdocs/latest/userguide/
.. _WM-admin: https://docs.aws.amazon.com/workmail/latest/adminguide/
.. _WM-ug: https://docs.aws.amazon.com/workmail/latest/userguide/
.. _WSP-admin: https://docs.aws.amazon.com/workspaces/latest/adminguide/
.. _WSP-api: https://docs.aws.amazon.com/workspaces/latest/api/
.. _xray-api: https://docs.aws.amazon.com/xray/latest/api/
.. _xray-dg: https://docs.aws.amazon.com/xray/latest/devguide/


.. SDK/framework/toolkit guide links
   ---------------------------------
.. _cli-ref: https://docs.aws.amazon.com/cli/latest/reference/
.. _cli-ug: https://docs.aws.amazon.com/cli/latest/userguide/
.. _jflow-dg: https://docs.aws.amazon.com/amazonswf/latest/awsflowguide/
.. _pst-ug: https://docs.aws.amazon.com/powershell/latest/userguide/
.. _rbflow-api: https://docs.aws.amazon.com/amazonswf/latest/awsrbflowapi/
.. _rbflow-dg: https://docs.aws.amazon.com/amazonswf/latest/awsrbflowguide/
.. _rbflow-ref: https://docs.aws.amazon.com/amazonswf/latest/awsrbflowapi/
.. _sdk-android-api: https://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/
.. _sdk-android-dg: https://docs.aws.amazon.com/mobile/sdkforandroid/developerguide/
.. _sdk-android-gsg: https://docs.aws.amazon.com/mobile/sdkforandroid/gsg/
.. _sdk-android-ref: https://docs.aws.amazon.com/AWSAndroidSDK/latest/javadoc/
.. _sdk-cpp-dg-v1: https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/
.. _sdk-cpp-dg: https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/
.. _sdk-cpp-ref: https://sdk.amazonaws.com/cpp/api/
.. _sdk-go-dg-v1: https://docs.aws.amazon.com/sdk-for-go/v1/developerguide/welcome.html
.. _sdk-go-dg: https://docs.aws.amazon.com/sdk-for-go/v1/developerguide/welcome.html
.. _sdk-ios-api: https://docs.aws.amazon.com/AWSiOSSDK/latest/
.. _sdk-ios-dg: https://docs.aws.amazon.com/mobile/sdkforios/developerguide/
.. _sdk-ios-gsg: https://docs.aws.amazon.com/mobile/sdkforios/gsg/
.. _sdk-ios-ref: https://docs.aws.amazon.com/AWSiOSSDK/latest/
.. _sdk-java-api: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/
.. _sdk-java-dg-v1: https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/
.. _sdk-java-dg: https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/
.. _sdk-java-ref: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/
.. _sdk-java-dg-v2: https://docs.aws.amazon.com/sdk-for-java/v2/developer-guide/
.. _sdk-java-api-v2: https://aws-java-sdk-javadoc.s3-website-us-west-2.amazonaws.com/latest/
.. _sdk-js-ref: https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/
.. _sdk-mobile-dg: https://docs.aws.amazon.com/mobile-hub/latest/developerguide/
.. _sdk-net-api-v2: https://docs.aws.amazon.com/sdkfornet/latest/apidocs/
.. _sdk-net-api-v3: https://docs.aws.amazon.com/sdkfornet/v3/apidocs/
.. _sdk-net-api: https://docs.aws.amazon.com/sdkfornet/v3/apidocs/
.. _sdk-net-dg-v1: https://docs.aws.amazon.com/sdk-for-net/latest/developer-guide/
.. _sdk-net-dg-v2: https://docs.aws.amazon.com/sdk-for-net/v2/developer-guide/
.. _sdk-net-dg-v3: https://docs.aws.amazon.com/sdk-for-net/latest/developer-guide/
.. _sdk-net-dg: https://docs.aws.amazon.com/sdk-for-net/latest/developer-guide/
.. _sdk-net-ref: https://docs.aws.amazon.com/sdkfornet/latest/apidocs/
.. _sdk-node-api: https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/
.. _sdk-php-api-v2: https://docs.aws.amazon.com/aws-sdk-php/latest/
.. _sdk-php-api-v3: https://docs.aws.amazon.com/aws-sdk-php/v3/api/
.. _sdk-php-api: https://docs.aws.amazon.com/aws-sdk-php/v3/api/
.. _sdk-php-dg-v1: https://docs.aws.amazon.com/aws-sdk-php/guide/latest/
.. _sdk-php-dg-v3: https://docs.aws.amazon.com/aws-sdk-php/v3/guide/
.. _sdk-php-gsg-v2: https://docs.aws.amazon.com/aws-sdk-php/guide/latest/
.. _sdk-php-gsg-v3: https://docs.aws.amazon.com/aws-sdk-php/v3/guide/getting-started/
.. _sdk-php-ref: https://docs.aws.amazon.com/aws-sdk-php/v3/api/
.. _sdk-python-api: https://boto.readthedocs.org/en/latest/ref/
.. _sdk-python-dg: https://boto3.readthedocs.org/en/latest/guide/
.. _sdk-python-gsg: https://boto.readthedocs.org/en/latest/
.. _sdk-python-ref: https://boto3.readthedocs.org/en/latest/reference/services/
.. _sdk-python3-api: https://boto3.readthedocs.org/en/latest/reference/services/
.. _sdk-python3-gsg: https://boto3.readthedocs.org/en/latest/
.. _sdk-ruby-api: https://docs.aws.amazon.com/sdk-for-ruby/v3/api/
.. _sdk-ruby-ref: https://docs.aws.amazon.com/sdk-for-ruby/v3/api/
.. _sdk-ruby-dg: https://docs.aws.amazon.com/sdk-for-ruby/v2/developer-guide/
.. _sdk-ruby1-dg: https://docs.aws.amazon.com/sdk-for-ruby/v1/developer-guide/
.. _sdk-ruby2-dg: https://docs.aws.amazon.com/sdk-for-ruby/v2/developer-guide/
.. _sdk-ruby3-dg: https://docs.aws.amazon.com/sdk-for-ruby/v2/developer-guide/
.. _sdk-unity-dg: https://docs.aws.amazon.com/mobile/sdkforunity/developerguide/
.. _sdk-unity-ref: https://docs.aws.amazon.com/mobile/sdkforunity/developerguide/
.. _sdk-xamarin-dg: https://docs.aws.amazon.com/mobile/sdkforxamarin/developerguide/
.. _sdk-xamarin-ref: https://docs.aws.amazon.com/sdkfornet/v3/apidocs/
.. _sdk-xray-java-api: https://docs.aws.amazon.com/xray-sdk-for-java/latest/javadoc/
.. _sdk-xray-net-api: https://docs.aws.amazon.com/xray-sdk-for-dotnet/latest/reference/
.. _sdk-xray-nodejs-api: https://docs.aws.amazon.com/xray-sdk-for-nodejs/latest/reference/
.. _sdk-xray-python-api: https://docs.aws.amazon.com/xray-sdk-for-python/latest/reference/
.. _tke-gsg-v1: https://docs.aws.amazon.com/toolkit-for-eclipse/v1/user-guide/
.. _tke-gsg: https://docs.aws.amazon.com/toolkit-for-eclipse/v1/user-guide/
.. _tke-ug-v1: https://docs.aws.amazon.com/toolkit-for-eclipse/v1/user-guide/
.. _tke-ug: https://docs.aws.amazon.com/toolkit-for-eclipse/v1/user-guide/
.. _TTS-ug: http://docs.aws.amazon.com/vsts/latest/userguide/







.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

   Common includes for AWS documentation projects
   ==============================================

   Please try to keep the entries *within each section* in alphabetic order!

   Some general service information (such as service names) is in this file. Other includes are in
   separate files in this directory.

   * For *links* to these, use the service_links.txt file.

   * Region substitutions such as |region-sdk-default| are in region_includes.txt

   Service-specific information (links to specific guide pages, for example), see the
   SVC_includes.txt file (replace *SVC* with the service acronym).


.. Common symbols
   --------------
.. |ndash| unicode:: U+2013
.. |mdash| unicode:: U+2014
   :trim:

.. Common terms and substitutions
   ------------------------------
.. |arnlong| replace:: Amazon Resource Name
.. |AWSlong| replace:: Amazon Web Services
.. |JSONlong| replace:: JavaScript Object Notation
.. |aws-accesskey-var| replace:: :code:`AWS_ACCESS_KEY_ID`
.. |aws-configfile-loc-unixes| replace:: :file:`~/.aws/config`
.. |aws-configfile-loc-windows| replace:: :file:`C:\\Users\\USERNAME\\.aws\\config`
.. |aws-credfile-loc-unixes| replace:: :file:`~/.aws/credentials`
.. |aws-credfile-loc-windows| replace:: :file:`C:\\Users\\USERNAME\\.aws\\credentials`
.. |aws-credfile-var| replace:: :code:`AWS_CREDENTIAL_PROFILES_FILE`
.. |aws-region-var| replace:: :code:`AWS_REGION`
.. |aws-secretkey-var| replace:: :code:`AWS_SECRET_ACCESS_KEY`
.. |clilong| replace:: AWS Command Line Interface
.. |cli| replace:: AWS CLI
.. |console| replace:: AWS Management Console
.. |explorer| replace:: AWS Explorer
.. |unixes| replace:: Linux, macOS, or Unix

.. General informational links
   ---------------------------
.. _JSON: http://www.json.org/
.. _JSONlong: JSON_


.. Common text roles for programming elements
   ------------------------------------------

   These are used by associating text with a role as follows::

       :rolename:`Text to be processed by role`

   Before adding additional roles here, see what roles Sphinx already provides
   by default, at: http://sphinx-doc.org/markup/inline.html.

.. role:: actionname(strong)
.. role:: attribname(literal)
.. role:: classname(literal)
.. role:: datatypename(literal)
.. role:: functionname(literal)
.. role:: methodname(literal)
.. role:: paramname(emphasis)
.. role:: userinput(literal)


.. Inline code roles
   -----------------

   These roles provide inline 'code' roles that you can use to mark up code like the standard reST
   :code: role, but also provides syntax highlighting in the language you specify. They all follow
   the pattern 'code-language'. The available languages for syntax highlighting are provided at
   http://pygments.org/docs/lexers/

.. role:: code-cpp(code)
   :language: cpp

.. role:: code-csharp(code)
   :language: csharp

.. role:: code-java(code)
   :language: java

.. role:: code-js(code)
   :language: javascript

.. role:: code-json(code)
   :language: json

.. role:: code-objc(code)
   :language: objectivec

.. role:: code-php(code)
   :language: php

.. role:: code-py(code)
   :language: python

.. role:: code-ruby(code)
   :language: ruby

.. role:: code-sh(code)
   :language: shell

.. role:: code-xml(code)
   :language: xml


.. Marketing pages
   ---------------
.. |aws-tools| replace:: *Tools for Amazon Web Services*
.. |ec2-pricing| replace:: *EC2 Pricing*


.. Service-related substitutions
   -----------------------------
.. |AMIlong| replace:: Amazon Machine Image
.. |aws-credfile-env-var| replace:: AWS_CREDENTIAL_FILE
.. |example-access-key-id| replace:: AKIAIOSFODNN7EXAMPLE
.. |example-secret-key| replace:: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

.. Services
   --------
.. |AASlong| replace:: Amazon AppStream
.. |AAS| replace:: Amazon AppStream
.. |AAS2long| replace:: Amazon AppStream 2.0
.. |AAS2| replace:: AppStream 2.0
.. |ABlong| replace:: AWS |AB|
.. |AB| replace:: Billing and Cost Management
.. |ABPlong| replace:: Amazon API Gateway
.. |ABP| replace:: API Gateway
.. |ACBlong| replace:: AWS CodeBuild
.. |ACB| replace:: AWS CodeBuild
.. |ACClong| replace:: AWS CodeCommit
.. |ACC| replace:: AWS CodeCommit
.. |ACDlong| replace:: AWS CodeDeploy
.. |ACD| replace:: AWS CodeDeploy
.. |ACMlong| replace:: AWS Certificate Manager
.. |ACM| replace:: ACM
.. |ACPlong| replace:: AWS CodePipeline
.. |ACP| replace:: AWS CodePipeline
.. |ACSlong| replace:: AWS CodeStar
.. |ADSlong| replace:: AWS Directory Service
.. |ADS| replace:: AWS Directory Service
.. |AEBlong| replace:: AWS Elastic Beanstalk
.. |AEB| replace:: Elastic Beanstalk
.. |AGSlong| replace:: Amazon GameLift
.. |AGS| replace:: Amazon GameLift
.. |AKAlong| replace:: Amazon Kinesis Analytics
.. |AKA| replace:: Kinesis Analytics
.. |AKFlong| replace:: Amazon Kinesis Firehose
.. |AKF| replace:: Kinesis Firehose
.. |AKSlong| replace:: Amazon Kinesis Streams
.. |AKS| replace:: Kinesis Streams
.. |AKlong| replace:: Amazon Kinesis
.. |AK| replace:: Kinesis
.. |ALYlong| replace:: Amazon Lumberyard
.. |ALY| replace:: Lumberyard
.. |AMHlong| replace:: AWS Mobile Hub
.. |AMH| replace:: Mobile Hub
.. |AMPClong| replace:: AWS Connector for vCenter
.. |AMPC| replace:: connector
.. |AMPlong| replace:: AWS Management Portal for vCenter
.. |AMP| replace:: management portal
.. |AOlong| replace:: AWS Organizations
.. |AO| replace:: Organizations
.. |APPAlong| replace:: AWS Application Auto Scaling
.. |APPA| replace:: Application Auto Scaling
.. |APPDlong| replace:: AWS Application Discovery Service
.. |APPD| replace:: Application Discovery Service
.. |ARTlong| replace:: AWS Artifact
.. |ART| replace:: AWS Artifact
.. |ASlong| replace:: Auto Scaling
.. |AS| replace:: Auto Scaling
.. |ATElong| replace:: Amazon Athena
.. |ATE| replace:: Athena
.. |ATPlong| replace:: AWS Device Farm
.. |ATP| replace:: Device Farm
.. |ATSlong| replace:: Alexa Top Sites
.. |ATS| replace:: Alexa Top Sites
.. |AWISlong| replace:: Alexa Web Information Service
.. |AWIS| replace:: Alexa Web Information Service
.. |AWSDClong| replace:: AWS Direct Connect
.. |AWSDC| replace:: Direct Connect
.. |AWSDPlong| replace:: AWS Data Pipeline
.. |AWSDP| replace:: Data Pipeline
.. |AWSSGlong| replace:: AWS Storage Gateway
.. |AWSSG| replace:: Storage Gateway
.. |AWSTAlong| replace:: AWS Trusted Advisor
.. |AWSTA| replace:: Trusted Advisor
.. |BATCHlong| replace:: AWS Batch
.. |CClong| replace:: AWS Config
.. |CC| replace:: AWS Config
.. |CDlong| replace:: AWS CodeDeploy
.. |CD| replace:: AWSCodeDeploy
.. |CFNlong| replace:: AWS CloudFormation
.. |CFN| replace:: AWS CloudFormation
.. |CFlong| replace:: Amazon CloudFront
.. |CF| replace:: CloudFront
.. |CHMlong| replace:: Amazon Chime
.. |CLIlong| replace:: AWS Command Line Interface
.. |CLI| replace:: AWS CLI
.. |COGID| replace:: Amazon Cognito Identity
.. |COGSYNClong| replace:: Amazon Cognito Sync
.. |COGSYNC| replace:: Amazon Cognito Sync
.. |COGlong| replace:: Amazon Cognito
.. |COG| replace:: Amazon Cognito
.. |CON| replace:: Amazon Connect
.. |CSlong| replace:: Amazon CloudSearch
.. |CS| replace:: CloudSearch
.. |CTlong| replace:: AWS CloudTrail
.. |CT| replace:: CloudTrail
.. |CWElong| replace:: Amazon CloudWatch Events
.. |CWE| replace:: CloudWatch Events
.. |CWLlong| replace:: Amazon CloudWatch Logs
.. |CWL| replace:: CloudWatch Logs
.. |CWlong| replace:: Amazon CloudWatch
.. |CW| replace:: CloudWatch
.. |DDBlong| replace:: Amazon DynamoDB
.. |DDB| replace:: DynamoDB
.. |DMSlong| replace:: AWS Database Migration Service
.. |DMS| replace:: AWS DMS
.. |DPlong| replace:: Amazon DevPay
.. |DP| replace:: DevPay
.. |DSlong| replace:: Amazon DynamoDB Streams
.. |DS| replace:: DynamoDB Streams
.. |Disklong| replace:: AWS Import/Export Disk
.. |EBSencryptlong| replace:: Amazon EBS encryption
.. |EBSencrypt| replace:: Amazon EBS encryption
.. |EBSlong| replace:: Amazon Elastic Block Store
.. |EBS| replace:: Amazon EBS
.. |EBlong| replace:: AWS Elastic Beanstalk
.. |EB| replace:: Elastic Beanstalk
.. |EC2long| replace:: Amazon Elastic Compute Cloud
.. |EC2| replace:: Amazon EC2
.. |ECRlong| replace:: Amazon EC2 Container Registry
.. |ECR| replace:: Amazon ECR
.. |ECSlong| replace:: Amazon EC2 Container Service
.. |ECS| replace:: Amazon ECS
.. |EFSlong| replace:: Amazon Elastic File System
.. |EFS| replace:: Amazon EFS
.. |ELBlong| replace:: Elastic Load Balancing
.. |ELB| replace:: ELB
.. |ELClong| replace:: Amazon ElastiCache
.. |ELC| replace:: ElastiCache
.. |EMRlong| replace:: Amazon EMR
.. |EMR| replace:: Amazon EMR
.. |ESlong| replace:: Amazon Elasticsearch Service
.. |ES| replace:: Amazon ES
.. |ETlong| replace:: Amazon Elastic Transcoder
.. |ET| replace:: Elastic Transcoder
.. |FFlong| replace:: AWS Flow Framework
.. |FF| replace:: the framework
.. |FPSlong| replace:: Amazon Flexible Payments Service
.. |FPS| replace:: Amazon FPS
.. |Frozenlong| replace:: AWS Snowball
.. |Frozen| replace:: Snowball
.. |FWSlong| replace:: Amazon Fulfillment Web Service
.. |FWS| replace:: Amazon FWS
.. |GLlong| replace:: Amazon Glacier
.. |GL| replace:: Amazon Glacier
.. |GLUlong| replace:: AWS Glue
.. |GLU| replace:: AWS Glue
.. |GOVCLOUD-US| replace:: AWS GovCloud (US)
.. |GSG| replace:: Getting Started with AWS
.. |HSMlong| replace:: |HSM|
.. |HSM| replace:: AWS CloudHSM
.. |IAMlong| replace:: AWS Identity and Access Management
.. |IAM| replace:: IAM
.. |IElong| replace:: AWS Import/Export
.. |IE| replace:: Import/Export
.. |INS| replace:: Amazon Inspector
.. |IoTC| replace:: AWS IoT Device SDK for C
.. |IoTJS| replace:: AWS IoT Device SDK for Node.js
.. |IoTlong| replace:: AWS IoT
.. |IoT| replace:: AWS IoT
.. |JSBlong| replace:: AWS SDK for JavaScript
.. |JSB| replace:: SDK for JavaScript
.. |KMSlong| replace:: AWS Key Management Service
.. |KMS| replace:: AWS KMS
.. |LAMlong| replace:: AWS Lambda
.. |LAM| replace:: Lambda
.. |LEXlong| replace:: Amazon Lex
.. |lightsaillong| replace:: Amazon Lightsail
.. |lightsail| replace:: Lightsail
.. |MAlong| replace:: Amazon Mobile Analytics
.. |MA| replace:: Mobile Analytics
.. |MCElong| replace:: Amazon Macie
.. |MCE| replace:: Macie
.. |MKTlong| replace:: AWS Marketplace
.. |MKT| replace:: Marketplace
.. |MLlong| replace:: Amazon Machine Learning
.. |ML| replace:: Amazon ML
.. |MMPlong| replace:: AWS Marketplace Management Portal
.. |MMlong| replace:: AWS Molecular Modeling
.. |MM| replace:: Molecular Modeling
.. |MTlong| replace:: Amazon Mechanical Turk
.. |MT| replace:: Mechanical Turk
.. |OPSlong| replace:: AWS OpsWorks
.. |OPS| replace:: OpsWorks
.. |OPSStacklong| replace:: AWS OpsWorks Stacks
.. |OPSStack| replace:: OpsWorks Stacks
.. |OPSCAlong| replace:: AWS OpsWorks for Chef Automate
.. |OPSCA| replace:: OpsWorks for Chef Automate
.. |PAAPIlong| replace:: Product Advertising API
.. |PAAPI| replace:: PA API
.. |PINlong| replace:: Amazon Pinpoint
.. |POLlong| replace:: Amazon Polly
.. |PSlong| replace:: IAM Policy Simulator
.. |PS| replace:: Policy Simulator
.. |QSlong| replace:: Amazon QuickSight
.. |R53long| replace:: Amazon Route 53
.. |R53| replace:: Route 53
.. |RDS-pricing| replace:: Amazon RDS Pricing
.. |RDSlong| replace:: Amazon Relational Database Service
.. |RDS| replace:: Amazon RDS
.. |REKlong| replace:: Amazon Rekognition
.. |REK| replace:: Amazon Rekognition
.. |RSlong| replace:: Amazon Redshift
.. |RS| replace:: Amazon Redshift
.. |S3long| replace:: Amazon Simple Storage Service
.. |S3| replace:: Amazon S3
.. |SClong| replace:: AWS Service Catalog
.. |SC| replace:: AWS Service Catalog
.. |SCTlong| replace:: AWS Schema Conversion Tool
.. |SCT| replace:: AWS SCT
.. |SDBlong| replace:: Amazon SimpleDB
.. |SDB| replace:: SimpleDB
.. |SESlong| replace:: Amazon Simple Email Service
.. |SES| replace:: Amazon SES
.. |SFNlong| replace:: AWS Step Functions
.. |SFN| replace:: Step Functions
.. |SLKlong| replace:: Amazon Silk
.. |SLK| replace:: Silk
.. |SMSlong| replace:: AWS Server Migration Service
.. |SMS| replace:: AWS SMS
.. |Snowball| replace:: Snowball
.. |Snowlong| replace:: Snowball appliance
.. |SNSlong| replace:: Amazon Simple Notification Service
.. |SNS| replace:: Amazon SNS
.. |SPlong| replace:: Amazon Simple Pay
.. |SP| replace:: Amazon Simple Pay
.. |SQSlong| replace:: Amazon Simple Queue Service
.. |SQS| replace:: Amazon SQS
.. |SSMlong| replace:: Amazon EC2 Simple Systems Manager
.. |SSM| replace:: SSM
.. |STSlong| replace:: AWS Security Token Service
.. |STS| replace:: AWS STS
.. |SUPlong| replace:: AWS Support
.. |SUP| replace:: Support
.. |SWFlong| replace:: Amazon Simple Workflow Service
.. |SWF| replace:: Amazon SWF
.. |TFW| replace:: AWS Tools for Windows
.. |TWPlong| replace:: AWS Tools for Windows PowerShell
.. |TWP| replace:: Tools for Windows PowerShell
.. |VMIElong| replace:: VM Import/Export
.. |VMIE| replace::  VM Import/Export
.. |VPClong| replace:: Amazon Virtual Private Cloud
.. |VPC| replace:: Amazon VPC
.. |WAFlong| replace:: AWS WAF
.. |WAF| replace:: AWS WAF
.. |WAMlong| replace:: Amazon WorkSpaces Application Manager
.. |WAM| replace:: Amazon WAM
.. |WDlong| replace:: Amazon WorkDocs
.. |WD| replace:: WorkDocs
.. |WMlong| replace:: Amazon WorkMail
.. |WM| replace:: WorkMail
.. |WSPlong| replace:: Amazon WorkSpaces
.. |WSP| replace:: Amazon WorkSpaces
.. |xraylong| replace:: AWS X-Ray
.. |xray| replace:: X-Ray


.. SDKs, frameworks, toolkits and other interfaces
   -----------------------------------------------
.. |awsflow| replace:: AWS Flow Framework
.. |jflow| replace:: AWS Flow Framework for Java
.. |pstlong| replace:: AWS Tools for Windows PowerShell
.. |pst| replace:: PowerShell Tools
.. |rbflow| replace:: AWS Flow Framework for Ruby
.. |sdk-android| replace:: AWS Mobile SDK for Android
.. |sdk-cpp| replace:: AWS SDK for C++
.. |sdk-go| replace:: AWS SDK for Go
.. |sdk-ios| replace:: AWS Mobile SDK for iOS
.. |sdk-java| replace:: AWS SDK for Java
.. |sdk-java-v2| replace:: AWS SDK for Java 2.0
.. |sdk-js| replace:: AWS SDK for JavaScript
.. |sdk-net| replace:: AWS SDK for .NET
.. |sdk-nodejs| replace:: AWS SDK for JavaScript
.. |sdk-php-v2| replace:: AWS SDK for PHP (V2)
.. |sdk-php| replace:: AWS SDK for PHP
.. |sdk-python| replace:: AWS SDK for Python (Boto)
.. |sdk-ruby| replace:: AWS SDK for Ruby
.. |sdk-unity| replace:: AWS Mobile SDK for Unity
.. |sdk-xamarin| replace:: AWS Mobile SDK for .NET and Xamarin
.. |tke| replace:: AWS Toolkit for Eclipse
.. |TTSlong| replace:: AWS Tools for Microsoft Visual Studio Team Services
.. |TTS| replace:: AWS Tools for Team Services
.. |TVSlong| replace:: AWS Toolkit for Visual Studio
.. |TVS| replace:: Toolkit for Visual Studio


.. Service Guide names
   -------------------
.. |AAS-dg| replace:: :title:`Amazon AppStream Developer Guide`
.. |AB-ug| replace:: :title:`Billing and Cost Management User Guide`
.. |ABP-dg| replace:: :title:`API Gateway Developer Guide`
.. |ACB-api| replace:: :title:`AWS CodeBuild API Reference`
.. |ACB-cli| replace:: :title:`AWS CodeBuild CLI Reference`
.. |ACB-ug| replace:: :title:`AWS CodeBuild User Guide`
.. |ACC-api| replace:: :title:`AWS CodeCommit API Reference`
.. |ACC-cli| replace:: :title:`AWS CodeCommit CLI Reference`
.. |ACC-ug| replace:: :title:`AWS CodeCommit User Guide`
.. |ACD-api| replace:: :title:`AWS CodeDeploy API Reference`
.. |ACD-cli-ref| replace:: :title:`AWS CodeDeploy CLI Reference`
.. |ACD-ug| replace:: :title:`AWS CodeDeploy User Guide`
.. |ACM-api| replace:: :title:`ACM API Reference`
.. |ACM-ug| replace:: :title:`ACM User Guide`
.. |ACP-api| replace:: :title:`AWS CodePipeline API Reference`
.. |ACP-cli-ref| replace:: :title:`AWS CodePipeline CLI Reference`
.. |ACP-ug| replace:: :title:`AWS CodePipeline User Guide`
.. |ACS-ug| replace:: :title:`AWS CodeStar User Guide`
.. |ACS-api| replace:: :title:`AWS CodeStar API Reference`
.. |ADS-ag| replace:: :title:`AWS Directory Service Administration Guide`
.. |ADS-dg| replace:: :title:`AWS Directory Service API Reference`
.. |AEB-api| replace:: :title:`AWS Elastic Beanstalk API Reference`
.. |AEB-dg| replace:: :title:`AWS Elastic Beanstalk Developer Guide`
.. |AGS-api| replace:: :title:`Amazon GameLift API Reference`
.. |AGS-dg| replace:: :title:`Amazon GameLift Developer Guide`
.. |AK-api| replace:: :title:`Amazon Kinesis API Reference`
.. |AK-dg| replace:: :title:`Amazon Kinesis Developer Guide`
.. |AKA-dg| replace:: :title:`Amazon Kinesis Analytics Developer Guide`
.. |AKF-api| replace:: :title:`Amazon Kinesis Firehose API Reference`
.. |AKF-dg| replace:: :title:`Amazon Kinesis Firehose Developer Guide`
.. |AKS-api| replace:: :title:`Amazon Kinesis Streams API Reference`
.. |AKS-dg| replace:: :title:`Amazon Kinesis Streams Developer Guide`
.. |ALY-dg| replace:: :title:`Amazon Lumberyard Developer Guide`
.. |ALY-gsg| replace:: :title:`Amazon Lumberyard Getting Started Guide`
.. |ALY-qsg| replace:: :title:`Amazon Lumberyard Quick Start Guide`
.. |ALY-ug| replace:: :title:`Amazon Lumberyard User Guide`
.. |AMP-ug| replace:: :title:`AWS Management Portal for vCenter User Guide`
.. |APPA-ug| replace:: :title:`AWS Application Auto Scaling User Guide`
.. |APPD-ug| replace:: :title:`AWS Application Discovery Service User Guide`
.. |ART-ug| replace:: :title:`AWS Artifact User Guide`
.. |AS-api| replace:: :title:`AutoScaling API Reference`
.. |AS-dg| replace:: :title:`AutoScaling Developer Guide`
.. |AS-gsg| replace:: :title:`AutoScaling Getting Started Guide`
.. |ATE-ug| replace:: :title:`Amazon Athena User Guide`
.. |ATE-api| replace:: :title:`Amazon Athena API Reference`
.. |ATP-dg| replace:: :title:`AWS Device Farm Developer Guide`
.. |AWS-gr| replace:: :title:`Amazon Web Services General Reference`
.. |AWSDC-api| replace:: :title:`AWS Direct Connect API Reference`
.. |AWSDC-ug| replace:: :title:`AWS Direct Connect User Guide`
.. |AWSDP-ug| replace:: :title:`AWS Data Pipeline User Guide`
.. |AWSDP-api| replace:: :title:`AWS Data Pipeline API Reference`
.. |AWSSG-api| replace:: :title:`AWS Storage Gateway API Reference`
.. |AWSSG-ug| replace:: :title:`AWS Storage Gateway User Guide`
.. |BATCH-ug| replace:: :title:`AWS Batch User Guide`
.. |BATCH-api| replace:: :title:`AWS Batch API Reference`
.. |CC-api| replace:: :title:`AWS Config API Reference`
.. |CC-dg| replace:: :title:`AWS Config Developer Guide`
.. |CF-api| replace:: :title:`Amazon CloudFront API Reference`
.. |CF-dg| replace:: :title:`Amazon CloudFront Developer Guide`
.. |CFN-api| replace:: :title:`AWS CloudFormation API Reference`
.. |CFN-gsg| replace:: :title:`AWS CloudFormation Getting Started Guide`
.. |CFN-ug| replace:: :title:`AWS CloudFormation User Guide`
.. |COG-api| replace:: :title:`Amazon Cognito API Reference`
.. |COG-dg| replace:: :title:`Amazon Cognito Developer Guide`
.. |COGSYNC-api| replace:: :title:`Amazon Cognito Sync API Reference`
.. |CON-ug| replace:: :title:`Amazon Connect User Guide`
.. |CON-ag| replace:: :title:`Amazon Connect Administrator Guide`
.. |CS-dg| replace:: :title:`Amazon CloudSearch Developer Guide`
.. |CT-api| replace:: :title:`AWS CloudTrail API Reference`
.. |CT-cli| replace:: :title:`AWS CloudTrail CLI Reference`
.. |CT-ug| replace:: :title:`AWS CloudTrail User Guide`
.. |CW-api| replace:: :title:`Amazon CloudWatch API Reference`
.. |CW-cli| replace:: :title:`Amazon CloudWatch CLI Reference`
.. |CW-ug| replace:: :title:`Amazon CloudWatch User Guide`
.. |CW-dg| replace:: :title:`Amazon CloudWatch User Guide`
.. |CW-gsg| replace:: :title:`Amazon CloudWatch Getting Started Guide`
.. |CW-qrc| replace:: :title:`Amazon CloudWatch Quick Reference Card`
.. |CWE-api| replace:: :title:`Amazon CloudWatch Events API Reference`
.. |CWE-ug| replace:: :title:`Amazon CloudWatch Events User Guide`
.. |CWL-api| replace:: :title:`Amazon CloudWatch Logs API Reference`
.. |CWL-ug| replace:: :title:`Amazon CloudWatch Logs User Guide`
.. |CWL-dg| replace:: :title:`Amazon CloudWatch Logs User Guide`
.. |DDB-api| replace:: :title:`Amazon DynamoDB API Reference`
.. |DDB-dg| replace:: :title:`Amazon DynamoDB Developer Guide`
.. |DDB-gsg| replace:: :title:`Amazon DynamoDB Getting Started Guide`
.. |DDB-streams-api| replace:: :title:`Amazon DynamoDB Streams API Reference`
.. |DMS-api| replace:: :title:`AWS DMS API Reference`
.. |DMS-ug| replace:: :title:`AWS DMS User Guide`
.. |DP-dg| replace:: :title:`Amazon DevPay Developer Guide`
.. |DP-gsg| replace:: :title:`Amazon DevPay Getting Started Guide`
.. |DP-qrc| replace:: :title:`Amazon DevPay Quick Reference Card`
.. |EB-dg| replace:: :title:`AWS Elastic Beanstalk Developer Guide`
.. |EB-api| replace:: :title:`AWS Elastic Beanstalk API Reference`
.. |EC2-api| replace:: :title:`Amazon EC2 API Reference`
.. |EC2-cli-ref| replace:: :title:`Amazon EC2 CLI Reference`
.. |EC2-gsg| replace:: :title:`Amazon EC2 Getting Started Guide`
.. |EC2-qrc| replace:: :title:`Amazon EC2 Quick Reference Card`
.. |EC2-ug-win| replace:: :title:`Amazon EC2 User Guide for Windows Instances`
.. |EC2-ug| replace:: :title:`Amazon EC2 User Guide for Linux Instances`
.. |ECR-api| replace:: :title:`Amazon ECR API Reference`
.. |ECR-ug| replace:: :title:`Amazon ECR User Guide`
.. |ECS-api| replace:: :title:`Amazon ECS API Reference`
.. |ECS-dg| replace:: :title:`Amazon ECS Developer Guide`
.. |EDP-api| replace:: :title:`AWS Data Pipeline API Reference`
.. |EDP-dg| replace:: :title:`AWS Data Pipeline Developer Guide`
.. |EDP-gsg| replace:: :title:`AWS Data Pipeline Getting Started Guide`
.. |EFS-ug| replace:: :title:`Amazon EFS User Guide`
.. |ELB-api| replace:: :title:`Elastic Load Balancing API Reference`
.. |ELB-dg| replace:: :title:`Elastic Load Balancing Developer Guide`
.. |ELB-qrc| replace:: :title:`Elastic Load Balancing Quick Reference Card`
.. |ELC-api| replace:: :title:`Amazon ElastiCache API Reference`
.. |ELC-cli-ref| replace:: :title:`Amazon ElastiCache CLI Reference`
.. |ELC-gsg| replace:: :title:`Amazon ElastiCache Getting Started Guide`
.. |ELC-qrc| replace:: :title:`Amazon ElastiCache Quick Reference Card`
.. |ELC-ug| replace:: :title:`Amazon ElastiCache User Guide`
.. |EMR-api| replace:: :title:`Amazon EMR API Reference`
.. |EMR-dg| replace:: :title:`Amazon EMR Developer Guide`
.. |EMR-gsg| replace:: :title:`Amazon EMR Getting Started Guide`
.. |EMR-mg| replace:: :title:`Amazon EMR Management Guide`
.. |EMR-qrc| replace:: :title:`Amazon EMR Quick Reference Card`
.. |ES-api| replace:: :title:`Amazon ES REST Configuration API Reference`
.. |ES-dg| replace:: :title:`Amazon ES Developer Guide`
.. |ET-dg| replace:: :title:`Amazon Elastic Transcoder Developer Guide`
.. |FF-dg| replace:: :title:`The Framework for Java Developer Guide`
.. |FPS-amqs| replace:: :title:`Amazon FPS Account Management Quick Start Guide`
.. |FPS-apgq| replace:: :title:`Amazon FPS Aggregated Payments Quick Start Guide`
.. |FPS-api| replace:: :title:`Amazon FPS API Reference`
.. |FPS-aqs| replace:: :title:`Amazon FPS Advanced Quick Start Guide`
.. |FPS-bqs| replace:: :title:`Amazon FPS Basic Quick Start Guide`
.. |FPS-gsg| replace:: :title:`Amazon FPS Getting Started Guide`
.. |FPS-mqs| replace:: :title:`Amazon FPS Marketplace Quick Start Guide`
.. |FWS-api| replace:: :title:`Amazon FWS API Reference`
.. |FWS-dg| replace:: :title:`Amazon FWS Developer Guide`
.. |FWS-gsg| replace:: :title:`Amazon FWS Getting Started Guide`
.. |FWS-qrc-inbound| replace:: :title:`Amazon FWS Quick Reference Card (Inbound)`
.. |FWS-qrc-inventory| replace:: :title:`Amazon FWS Quick Reference Card (Inventory)`
.. |FWS-qrc-outbound| replace:: :title:`Amazon FWS Quick Reference Card (Outbound)`
.. |GL-dg| replace:: :title:`Amazon Glacier Developer Guide`
.. |GOVCLOUD-US-ug| replace:: :title:`AWS GovCloud (US) User Guide`
.. |GSG-aws| replace:: :title:`Getting Started Guide`
.. |GSG-deploy| replace:: :title:`Getting Started Guide: Deploying a Web App`
.. |GSG-emr| replace:: :title:`Getting Started Guide: Analyzing Big Data`
.. |GSG-free| replace:: :title:`Getting Started Guide`
.. |GSG-lnx| replace:: :title:`Getting Started Guide (Linux)`
.. |GSG-swh| replace:: :title:`Getting Started Guide: Hosting a Static Website`
.. |GSG-wahl| replace:: :title:`Getting Started Guide: Hosting a Web App for Linux`
.. |GSG-wah| replace:: :title:`Getting Started Guide: Hosting a .NET Web App`
.. |GSG-win| replace:: :title:`Getting Started Guide (Windows)`
.. |HSM-api| replace:: :title:`AWS CloudHSM API Reference`
.. |HSM-cli| replace:: :title:`AWS CloudHSM CLI Guide`
.. |HSM-dg| replace:: :title:`AWS CloudHSM User Guide`
.. |HSM-gsg| replace:: :title:`AWS CloudHSM Getting Started Guide`
.. |HSM-ug| replace:: :title:`AWS CloudHSM User Guide`
.. |IAM-api| replace:: :title:`IAM API Reference`
.. |IAM-clt| replace:: :title:`IAM CLI Reference`
.. |IAM-qrc| replace:: :title:`IAM Quick Reference Card`
.. |IAM-ug| replace:: :title:`IAM User Guide`
.. |IE-dg| replace:: :title:`AWS Import/Export Developer Guide`
.. |IE-qrc| replace:: :title:`AWS Import/Export Command Line Quick Reference Card`
.. |INS-api| replace:: :title:`Amazon Inspector API Reference`
.. |INS-ug| replace:: :title:`Amazon Inspector User Guide`
.. |IOT-api| replace:: :title:`AWS IoT API Reference`
.. |IOT-gsg| replace:: :title:`AWS IoT Getting Started Guide`
.. |IOT-ug| replace:: :title:`AWS IoT User Guide`
.. |JSB-api| replace:: :title:`SDK for JavaScript in the Browser API Reference`
.. |JSB-gsg| replace:: :title:`SDK for JavaScript in the Browser Getting Started Guide`
.. |KMS-api| replace:: :title:`AWS KMS API Reference`
.. |KMS-dg| replace:: :title:`AWS KMS Developer Guide`
.. |LAM-dg| replace:: :title:`AWS Lambda Developer Guide`
.. |MA-api| replace:: :title:`Amazon Mobile Analytics API Reference`
.. |MA-ug| replace:: :title:`Amazon Mobile Analytics User Guide`
.. |ML-api| replace:: :title:`Amazon ML API Reference`
.. |ML-dg| replace:: :title:`Amazon ML Developer Guide`
.. |MT-api| replace:: :title:`Mechanical Turk API Reference`
.. |MT-clt| replace:: :title:`Mechanical Turk CLI Reference`
.. |MT-dg| replace:: :title:`Mechanical Turk Developer Guide`
.. |MT-gsg| replace:: :title:`Mechanical Turk Getting Started Guide`
.. |MT-qrc| replace:: :title:`Mechanical Turk Quick Reference Card`
.. |MT-rui| replace:: :title:`Mechanical Turk Requester User Interface`
.. |MT-wsdl| replace:: :title:`Mechanical Turk WSDL`
.. |OPS-api| replace:: :title:`AWS OpsWorks API Reference`
.. |OPS-ug| replace:: :title:`AWS OpsWorks User Guide`
.. |PAAPI-dg| replace:: :title:`PA API Developer Guide`
.. |PAAPI-gsg| replace:: :title:`PA API Getting Started`
.. |PS-ug| replace:: :title:`Policy Simulator User Guide`
.. |R53-api| replace:: :title:`Amazon Route 53 API Reference`
.. |R53-dg| replace:: :title:`Amazon Route 53 Developer Guide`
.. |RC-api| replace:: :title:`Amazon Remote Configuration API Reference`
.. |RDS-api| replace:: :title:`Amazon RDS API Reference`
.. |RDS-cli-ref| replace:: :title:`Amazon RDS CLI Reference`
.. |RDS-gsg| replace:: :title:`Amazon RDS Getting Started Guide`
.. |RDS-qrc| replace:: :title:`Amazon RDS Quick Reference Card`
.. |RDS-ug| replace:: :title:`Amazon RDS User Guide`
.. |REK-dg| replace:: Amazon Rekognition Developer Guide
.. |RS-api| replace:: :title:`Amazon Redshift API Reference`
.. |RS-cli-ug| replace:: :title:`Amazon Redshift CLI User Guide`
.. |RS-dg| replace:: :title:`Amazon Redshift Database Developer Guide`
.. |RS-gsg| replace:: :title:`Amazon Redshift Getting Started`
.. |RS-mgmt| replace:: :title:`Amazon Redshift Cluster Management Guide`
.. |S3-api| replace:: :title:`Amazon S3 API Reference`
.. |S3-dg| replace:: :title:`Amazon S3 Developer Guide`
.. |S3-gsg| replace:: :title:`Amazon S3 Getting Started Guide`
.. |S3-qrc| replace:: :title:`Amazon S3 Quick Reference Card`
.. |S3-ug| replace:: :title:`Amazon S3 User Guide`
.. |SC-ag| replace:: :title:`AWS Service Catalog Administration Guide`
.. |SC-ug| replace:: :title:`AWS Service Catalog User Guide`
.. |SDB-dg| replace:: :title:`Amazon SimpleDB Developer Guide`
.. |SDB-gsg| replace:: :title:`Amazon SimpleDB Getting Started Guide`
.. |SDB-qrc| replace:: :title:`Amazon SimpleDB Quick Reference Card`
.. |SES-api| replace:: :title:`Amazon SES API Reference`
.. |SES-dg| replace:: :title:`Amazon SES Developer Guide`
.. |SFN-api| replace:: :title:`AWS Step Functions API Reference`
.. |SFN-dg| replace:: :title:`AWS Step Functions Developer Guide`
.. |SLK-dg| replace:: :title:`Amazon Silk Developer Guide`
.. |SNS-api| replace:: :title:`Amazon SNS API Reference`
.. |SNS-cli-ref| replace:: :title:`Amazon SNS CLI Reference`
.. |SNS-dg| replace:: :title:`Amazon SNS Developer Guide`
.. |SNS-gsg| replace:: :title:`Amazon SNS Getting Started Guide`
.. |SNS-qrc| replace:: :title:`Amazon SNS Quick Reference Card`
.. |SP-gsg| replace:: :title:`Amazon Simple Pay Getting Started Guide`
.. |SP-ug| replace:: :title:`Amazon Simple Pay Advanced User Guide`
.. |SQS-api| replace:: :title:`Amazon SQS API Reference`
.. |SQS-dg| replace:: :title:`Amazon SQS Developer Guide`
.. |SQS-qrc| replace:: :title:`Amazon SQS Quick Reference Card`
.. |SSM-api| replace:: :title:`SSM API Reference`
.. |STS-api| replace:: :title:`AWS STS API Reference`
.. |STS-ug| replace:: :title:`AWS STS User Guide`
.. |SUP-api| replace:: :title:`AWS Support API Reference`
.. |SUP-ug| replace:: :title:`AWS Support User Guide`
.. |SWF-api| replace:: :title:`Amazon SWF API Reference`
.. |SWF-dg| replace:: :title:`Amazon SWF Developer Guide`
.. |TTS-dg| replace:: :title:`AWS Tools for Microsoft Visual Studio Team Services User Guide`
.. |TTS-ug| replace:: :title:`AWS Tools for Microsoft Visual Studio Team Services User Guide`
.. |TVS-ug| replace:: :title:`Toolkit for Visual Studio User Guide`
.. |TWP-ref| replace:: :title:`Tools for Windows PowerShell Reference`
.. |TWP-ug| replace:: :title:`Tools for Windows PowerShell User Guide`
.. |VPC-ag| replace:: :title:`Amazon VPC Network Administration Guide`
.. |VPC-gsg| replace:: :title:`Amazon VPC Getting Started Guide`
.. |VPC-peer| replace:: :title:`Amazon VPC Peering Guide`
.. |VPC-qrc| replace:: :title:`Amazon VPC Quick Reference Card`
.. |VPC-ug| replace:: :title:`Amazon VPC User Guide`
.. |WAF-api| replace:: :title:`AWS WAF API Reference`
.. |WAF-dg| replace:: :title:`AWS WAF Developer Guide`
.. |WAM-ag| replace:: :title:`Amazon WAM Administration Guide`
.. |WAM-ug| replace:: :title:`Amazon WAM User Guide`
.. |WD-ag| replace:: :title:`Amazon WorkDocs Administration Guide`
.. |WD-ug| replace:: :title:`Amazon WorkDocs User Guide`
.. |WM-ag| replace:: :title:`Amazon WorkMail Administration Guide`
.. |WM-ug| replace:: :title:`Amazon WorkMail User Guide`
.. |WSP-ag| replace:: :title:`Amazon WorkSpaces Administration Guide`
.. |WSP-dg| replace:: :title:`Amazon WorkSpaces User Guide`
.. |WSP-ug| replace:: :title:`Amazon WorkSpaces User Guide`
.. |xray-api| replace:: :title:`AWS X-Ray API Reference`
.. |xray-dg| replace:: :title:`AWS X-Ray Developer Guide`


.. SDK/framework/toolkit guide names
   ---------------------------------
.. |cli-ref| replace:: :title:`AWS CLI Reference`
.. |cli-ug| replace:: :title:`AWS CLI User Guide`
.. |jflow-dg| replace:: :title:`AWS Flow Framework for Java Developer Guide`
.. |jflow-ref| replace:: :title:`AWS Flow Framework for Java Reference`
.. |pst-ug| replace:: :title:`AWS Tools for Windows PowerShell User Guide`
.. |rbflow-dg| replace:: :title:`AWS Flow Framework for Ruby Developer Guide`
.. |rbflow-ref| replace:: :title:`AWS Flow Framework for Ruby Reference`
.. |sdk-android-api| replace:: :title:`AWS Mobile SDK for Android API Reference`
.. |sdk-android-dg| replace:: :title:`AWS Mobile SDK for Android Developer Guide`
.. |sdk-android-gsg| replace:: :title:`AWS Mobile SDK for Android Getting Started Guide`
.. |sdk-cpp-dg| replace:: :title:`AWS SDK for C++ Developer Guide`
.. |sdk-cpp-ref| replace:: :title:`AWS SDK for C++ Reference`
.. |sdk-go-dg| replace:: :title:`AWS SDK for Go Developer Guide`
.. |sdk-go-api| replace:: :title:`AWS SDK for Go API Reference`
.. |sdk-ios-api| replace:: :title:`AWS Mobile SDK for iOS API Reference`
.. |sdk-ios-dg| replace:: :title:`AWS Mobile SDK for iOS Developer Guide`
.. |sdk-ios-gsg| replace:: :title:`AWS Mobile SDK for iOS Getting Started Guide`
.. |sdk-java-api| replace:: :title:`AWS SDK for Java API Reference`
.. |sdk-java-api-v2| replace:: :title:`AWS SDK for Java 2.0 API Reference`
.. |sdk-java-dg| replace:: :title:`AWS SDK for Java Developer Guide`
.. |sdk-java-dg-v2| replace:: :title:`AWS SDK for Java 2.0 Developer Guide`
.. |sdk-java-ref| replace:: |sdk-java-api|
.. |sdk-java-ref-v2| replace:: |sdk-java-api-v2|
.. |sdk-js-dg| replace:: :title:`AWS SDK for JavaScript Developer Guide`
.. |sdk-js-ref| replace:: :title:`AWS SDK for JavaScript Reference`
.. |sdk-net-api| replace:: :title:`AWS SDK for .NET API Reference`
.. |sdk-net-dg| replace:: :title:`AWS SDK for .NET Developer Guide`
.. |sdk-net-ref| replace:: :title:`AWS SDK for .NET Reference`
.. |sdk-nodejs-api| replace:: :title:`AWS SDK for NodeJS API Reference`
.. |sdk-nodejs-gsg| replace:: :title:`AWS SDK for NodeJS Getting Started Guide`
.. |sdk-php-api-v2| replace:: :title:`AWS SDK for PHP (V2) API Reference`
.. |sdk-php-api| replace:: :title:`AWS SDK for PHP API Reference`
.. |sdk-php-dg| replace:: :title:`AWS SDK for PHP Developer Guide`
.. |sdk-php-gsg-v2| replace:: :title:`AWS SDK for PHP (V2) Getting Started Guide`
.. |sdk-php-gsg| replace:: :title:`AWS SDK for PHP Getting Started Guide`
.. |sdk-php-mg-v2| replace:: :title:`AWS SDK for PHP (V2) Migration Guide`
.. |sdk-php-mg| replace:: :title:`AWS SDK for PHP Migration Guide`
.. |sdk-php-ref| replace:: :title:`AWS SDK for PHP Reference`
.. |sdk-php-sbsg-v2| replace:: :title:`AWS SDK for PHP (V2) Side-by-Side Guide`
.. |sdk-php-tt| replace:: :title:`AWS SDK for PHP Tips and Tricks`
.. |sdk-python-api-v3| replace:: :title:`AWS SDK for Python (Boto 3) API Reference`
.. |sdk-python-api| replace:: :title:`AWS SDK for Python (Boto) API Reference`
.. |sdk-python-dg| replace:: :title:`AWS SDK for Python  Developer Guide`
.. |sdk-python-gsg-v3| replace:: :title:`AWS SDK for Python (Boto 3) Getting Started`
.. |sdk-python-gsg| replace:: :title:`boto: A Python interface to AWS`
.. |sdk-python-ref| replace:: :title:`AWS SDK for Python Reference`
.. |sdk-ruby-api| replace:: :title:`AWS SDK for Ruby API Reference`
.. |sdk-ruby-dg| replace:: :title:`AWS SDK for Ruby Developer Guide`
.. |sdk-ruby-gsg| replace:: :title:`AWS SDK for Ruby Getting Started Guide`
.. |sdk-ruby-ref| replace:: :title:`AWS SDK for Ruby Reference`
.. |sdk-xray-java-api| replace:: :title:`AWS X-Ray SDK for Java API Reference`
.. |sdk-xray-net-api| replace:: :title:`AWS X-Ray SDK for .NET API Reference`
.. |sdk-xray-nodejs-api| replace:: :title:`AWS X-Ray SDK for Node.js API Reference`
.. |sdk-xray-python-api| replace:: :title:`AWS X-Ray SDK for Python API Reference`
.. |tke-ug| replace:: :title:`AWS Toolkit for Eclipse User Guide`



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

|CWlong| monitors your Amazon Web Services (AWS) resources and the applications
you run on AWS in real time. You can use |CW| to collect and track metrics,
which are variables you can measure for your resources and applications. |CW|
alarms send notifications or automatically make changes to the resources you are
monitoring based on rules that you define.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

|EC2| *spot instances* allow you to bid on spare EC2 computing capacity. Since spot instances are
often available at a discount compared to on-demand pricing, you can significantly reduce the cost
of running your applications, grow your application’s compute capacity and throughput for the same
budget, and enable new types of cloud computing applications.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

|lamlong|_ (|lam|) is a compute service where you can upload your code to |lam| and the service can
run the code on your behalf using AWS infrastructure. After you upload your code and create what we
call a *Lambda function*, |lam| takes care of provisioning and managing the servers that you use to
run the code. For complete information about |lam|, visit the |lam-dg|_.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. admonition:: Best Practice

    We recommend that you enable the :s3-api:`AbortIncompleteMultipartUpload
    <RESTBucketPUTlifecycle>` lifecycle rule on your |S3| buckets.

    This rule directs |S3| to abort multipart uploads that don't complete within a specified number of days
    after being initiated. When the set time limit is exceeded, |S3| aborts the upload and then
    deletes the incomplete upload data.

    For more information, see :s3-ug:`Lifecycle Configuration for a Bucket with Versioning
    <lifecycle-configuration-bucket-with-versioning>` in the |s3-ug|.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

   -----------------------------------------------------------------------------

   This file explains how to set shared credentials for the AWS SDKs and the AWS
   CLI.

   To use it, add a line such as the following to your topic:

   .. include:: common/sdk-shared-credentials.txt

   -----------------------------------------------------------------------------

* Set credentials in the AWS credentials profile file on your local system, located at:

    * |aws-credfile-loc-unixes| on |unixes|
    * |aws-credfile-loc-windows| on Windows

    This file should contain lines in the following format:

    .. code-block:: cfg

        [default]
        aws_access_key_id = your_access_key_id
        aws_secret_access_key = your_secret_access_key

    Substitute your own AWS credentials values for the values *your_access_key_id* and
    *your_secret_access_key*.

* Set the :envvar:`AWS_ACCESS_KEY_ID` and :envvar:`AWS_SECRET_ACCESS_KEY` environment variables.

    To set these variables on |unixes|, use :command:`export`:

    .. code-block:: sh

        export AWS_ACCESS_KEY_ID=your_access_key_id
        export AWS_SECRET_ACCESS_KEY=your_secret_access_key

    To set these variables on Windows, use :command:`set`:

    .. code-block:: bat

        set AWS_ACCESS_KEY_ID=your_access_key_id
        set AWS_SECRET_ACCESS_KEY=your_secret_access_key

* For an EC2 instance, specify an IAM role and then give your EC2 instance access to that role. See
  :ec2-ug:`IAM Roles for Amazon EC2 <iam-roles-for-amazon-ec2>` in the |EC2-ug| for a detailed
  discussion about how this works.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

|iamlong| (|IAM|) enables you to securely control access to AWS services and resources for your
users. Using |iam|, you can create and manage AWS users and groups, and use permissions to allow and
deny their access to AWS resources. For a complete guide to |IAM|, visit the |iam-ug|_.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

   -----------------------------------------------------------------------------

   This file explains how to set a shared AWS Region for the AWS SDKs and the
   AWS CLI.

   To use it, add a line such as the following to your topic:

   .. include:: common/sdk-shared-region.txt

   -----------------------------------------------------------------------------

* Set the AWS Region in the AWS config file on your local system, located at:

    * |aws-configfile-loc-unixes| on |unixes|
    * |aws-configfile-loc-windows| on Windows

    This file should contain lines in the following format:

    .. code-block:: cfg

       [default]
       region = your_aws_region

    Substitute your desired AWS Region (for example, "us-west-2") for *your_aws_region*.

* Set the :envvar:`AWS_REGION` environment variable.

    On |unixes|, use :command:`export`:

    .. code-block:: sh

       export AWS_REGION=your_aws_region

    On Windows, use :command:`set`:

    .. code-block:: bat

       set AWS_REGION=your_aws_region

    Where *your_aws_region* is the desired AWS Region name.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. topic:: To override the default credentials file location

    * Set the |aws-credfile-var| environment variable to the location of your AWS
      credentials file.

      * On |unixes|, use :command:`export`:

        .. code-block:: sh

            export AWS_CREDENTIAL_PROFILES_FILE=path/to/credentials_file

      * On Windows, use :command:`set`:

        .. code-block:: bat

            set AWS_CREDENTIAL_PROFILES_FILE=path/to/credentials_file




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

|cwe| delivers a near real-time stream of system events that describe changes in AWS resources to
|ec2| instances, |lam| functions, |ak| streams, |ecs| tasks, |sfn| state machines, |sns| topics,
|sqs| queues, or built-in targets. You can match events and route them to one or more target
functions or streams by using simple rules.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Access keys consist of an *access key ID* and *secret access key*, which are used to sign
programmatic requests that you make to AWS. If you don't have access keys, you can create them by
using the |console|_. We recommend that you use IAM access keys instead of AWS root account access
keys. IAM lets you securely control access to AWS services and resources in your AWS account.

.. note:: To create access keys, you must have permissions to perform the required IAM actions. For
   more information, see :iam-ug:`Granting IAM User Permission to Manage Password Policy and
   Credentials <id_credentials_delegate-permissions>` in the |iam-ug|.

.. topic:: To get your access key ID and secret access key

    #. Open the :console:`IAM console <iam>`.

    #. From the navigation menu, click :guilabel:`Users`.

    #. Select your IAM user name.

    #. Click :guilabel:`User Actions`, and then click :guilabel:`Manage Access Keys`.

    #. Click :guilabel:`Create Access Key`.

        Your keys will look something like this:

        + Access key ID example: ``AKIAIOSFODNN7EXAMPLE``

        + Secret access key example: ``wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY``

    #. Click :guilabel:`Download Credentials`, and store the keys in a secure location.

   .. important:: Your secret key will no longer be available through the |console|; you will have
      the only copy. Keep it confidential in order to protect your account, and never email it. Do
      not share it outside your organization, even if an inquiry appears to come from AWS or
      Amazon.com.

      *No one who legitimately represents Amazon will ever ask you for your secret key.*

**Related topics**

* :iam-ug:`What Is IAM? <introduction>` in |iam-ug|.
* :aws-gr:`AWS Security Credentials <aws-security-credentials>` in |aws-gr|.




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. topic:: To create an IAM user

    #.  Go to the :console:`IAM console <iam>` (you may need to sign in to AWS first).

    #.  Click :guilabel:`Users` in the sidebar to view your IAM users.

    #.  If you don't have any IAM users set up, click :guilabel:`Create New Users` to create one.

    #.  Select the IAM user in the list that you'll use to access AWS.

    #.  Open the :guilabel:`Security Credentials` tab, and click :guilabel:`Create Access Key`.

        .. note:: You can have a maximum of two active access keys for any given IAM user. If your IAM
            user has two access keys already, then you'll need to delete one of them before creating a
            new key.

    #.  On the resulting dialog box, click the :guilabel:`Download Credentials` button to download the
        credential file to your computer, or click :guilabel:`Show User Security Credentials` to view
        the IAM user's access key ID and secret access key (which you can copy and paste).

        .. important:: There is no way to obtain the secret access key once you close the dialog box. You
            can, however, delete its associated access key ID and create a new one.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. topic:: To sign up for AWS

   #. Open https://aws.amazon.com/ and click :guilabel:`Sign Up`.

   #. Follow the on-screen instructions. Part of the sign-up procedure involves receiving a phone
      call and entering a PIN using your phone keypad.




# -*- coding: utf-8 -*-
#
# AWS Sphinx configuration file.
#
# For more information about how to configure this file, see:
#
# https://w.amazon.com/index.php/AWSDevDocs/Sphinx
#

#
# General information about the project.
#

# Optional service/SDK name, typically the three letter acronym (TLA) that
# represents the service, such as 'SWF'. If this is an SDK, you can use 'SDK'
# here.
service_name = u'Mobile SDK'

# The long version of the service or SDK name, such as "Amazon Simple Workflow
# Service", "AWS Flow Framework for Ruby" or "AWS SDK for Java"
service_name_long = u'AWS ' + service_name

# The landing page for the service documentation.
service_docs_home = u'http://aws.amazon.com/documentation/mobile-sdk/'

project = u'iOS Developer Guide'

# A short description of the project.
project_desc = u'%s %s' % (service_name_long, project)

# the output will be generated in latest/<project_basename> and will appear on
# the web using the same basename.
project_basename = 'mobile/sdkforios/developerguide'

# This name is used as the manual / PDF name. Don't include the extension
# (.pdf) here.
man_name = 'aws-ios-dg'

# The language for this version of the docs. Typically 'en'. For a full list of
# values, see: http://sphinx-doc.org/config.html#confval-language
language = u'en'

# Whether or not to show the PDF link. If you generate a PDF for your
# documentation, set this to True.
show_pdf_link = True

# Whether or not to show the language selector
show_lang_selector = True

# The link to the top of the doc source tree on GitHub. This allows generation
# of per-page "Edit on GitHub" links.
github_doc_url = 'https://github.com/awsdocs/aws-ios-developer-guide/tree/master/doc_source'

#
# Version Information
#

# The version info for the project you're documenting, acts as replacement for
# |version| and |release| substitutions in the documentation, and is also used
# in various other places throughout the built documents.

# The short X.Y version.
version = '0.0.3'

# The full version, including alpha/beta/rc tags.
release = '0.0.3'

#
# Forum Information
#

# Optional forum ID. If there's a relevant forum at forums.aws.amazon.com, then
# set the ID here. If not set, then no forum ID link will be generated.
forum_id = '88'

#
# Navlinks
#

# Extra navlinks. You can specify additional links to appear in the top bar here
# as navlink name / url pairs. If extra_navlinks is not set, then no extra
# navlinks will be generated.
#
# extra_navlinks = [
#         ('API Reference', 'http://path/to/api/reference'),
#         ('GitHub', 'http://path/to/github/project'),
#         ]
extra_navlinks = [
        ('API Reference', 'http://docs.aws.amazon.com/AWSiOSSDK/latest/'),
        ('GitHub', 'https://github.com/aws/aws-sdk-ios'),
        ('Samples', 'https://github.com/awslabs/aws-sdk-ios-samples'),
        ('Download SDK',
            'http://sdk-for-ios.amazonwebservices.com/latest/aws-ios-sdk.zip'),
    ]

#
# EXTRA_CONF_CONTENT -- don't change, move or remove this line!
#
# Any settings *below* this act as overrides for the default config content.
# Declare extlinks <http://sphinx-doc.org/latest/ext/extlinks.html> and
# additional configuration details specific to this documentation set here.

if 'extlinks' not in vars():
    extlinks = {}

# The feedback name is different than the service name...
html_theme_options['feedback_name'] = u'Mobile SDK Docs'

#-- Intersphinx mappings ------------------------------------------------------

# Mappings are used if you have more than one doc set that you'd like to refer
# to. The syntax is generally::
#
#  intersphinx_mapping = { 'mapname' : ('url', None) }
#
# For more information about intersphinx mappings, see:
#
# * http://sphinx-doc.org/latest/ext/intersphinx.html
#
aws_docs_url = 'http://' + aws_domains['documentation']
intersphinx_mapping = {
        'sdkforandroid': (aws_docs_url + '/mobile/sdkforandroid/developerguide', None),
#        'sdkforios': (aws_docs_url + '/mobile/sdkforios/developerguide', None),
        'sdkforunity': (aws_docs_url + '/mobile/sdkforunity/developerguide', None),
        'sdkforxamarin': (aws_docs_url + '/mobile/sdkforxamarin/developerguide', None),
        }

extlinks.update({
    # links to API pages or other non-standard guide links.
    'pol-dg': (aws_docs_url + '/lex/latest/developerguide/%s.html', ''),
    'lex-dg': (aws_docs_url + '/polly/latest/dg/%s.html', '')
})

# ** added by extra conf file: default_extlinks.py **
# Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

# External link (intersphinx + extlink) definitions

# this is used throughout.
aws_docs_url = 'https://docs.aws.amazon.com/'

# intersphinx locations - with these, you can specify :ref: links directly into
# various guides. For example:
#
#  :ref:`tke-ug:allow-lam-to-assume-an-iam-role`
#
# You just specify the guide name as the first parameter in the <link>, and then
# the reference name as the second parameter. The title of the referenced
# section will be used as the title of the link.
#
# For more information, see: http://www.sphinx-doc.org/en/stable/ext/intersphinx.html

if 'sphinx.ext.intersphinx' not in extensions:
    extensions.append('sphinx.ext.intersphinx')

if 'intersphinx_mapping' not in locals():
    intersphinx_mapping = {}

intersphinx_mapping.update({
    'androiddg': (aws_docs_url + 'mobile/sdkforandroid/developerguide', None),
    'cppdg': (aws_docs_url + 'sdk-for-cpp/v1/developer-guide', None),
    'godg': (aws_docs_url + 'sdk-for-go/v1/developer-guide', None),
    'iosdg': (aws_docs_url + 'mobile/sdkforios/developerguide', None),
    'javadg': (aws_docs_url + 'sdk-for-java/v1/developer-guide', None),
    'netdg2': (aws_docs_url + 'sdk-for-net/v2/developer-guide', None),
    'netdg3': (aws_docs_url + 'sdk-for-net/v3/developer-guide', None),
    'pstug': (aws_docs_url + 'powershell/latest/userguide', None),
    'rubydg': (aws_docs_url + 'sdk-for-ruby/v2/developer-guide', None),
    'tkeug': (aws_docs_url + 'toolkit-for-eclipse/v1/user-guide', None),
    'tkvug': (aws_docs_url + 'toolkit-for-visual-studio/latest/user-guide', None),
    'unitydg': (aws_docs_url + 'mobile/sdkforunity/developerguide', None),
    'xamarindg': (aws_docs_url + 'mobile/sdkforxamarin/developerguide', None),
    })

# default extlinks.
#
# You can use them in your document source by specifying a link to an API entry like this::
#
#     The :swf-api:`DescribeWorkflowExecution` action returns the taskPriority
#     of the workflow.
#
# A link will be created to the SWF API reference, pointing to the action described in the role's
# text.
#
# You can also specify link text that's different from the link address by enclosing the address in
# angle-brackets, such as:
#
#    :rande:`SWF <swf>`
#
# This is useful when the link address is cased differently than the desired output text, or when
# you want the link to appear differently than the standard presentation.
#
# The links in this file are meant to be available to all guides and shared among them. To add
# non-shared or more specific extlinks of your own, add them to the end of your ``conf.py`` file
# like this::
#
#     extlinks['my-link-role'] = ('link_url', 'link_prefix')
#
# For more information, see: http://sphinx-doc.org/ext/extlinks.html

if 'sphinx.ext.extlinks' not in extensions:
    extensions.append('sphinx.ext.extlinks')

if 'extlinks' not in locals():
    extlinks = {}

# a function to add guide extlinks
def get_guide_extlinks():
    """add extlinks for all of the entries in ../_includes/guide_links.txt"""
    import re
    guide_extlinks = {}
    guide_links_file = open('_includes/guide_links.txt')
    guide_links_contents = guide_links_file.read()
    guide_links_file.close()
    m = '.. _(.*):\s+(.*)/'
    matches = re.findall(m, guide_links_contents)
    for i in matches:
        guide_extlinks[str.lower(i[0])] = (i[1] + '/%s.html', '')
    return guide_extlinks

extlinks.update(get_guide_extlinks())

# the only things that should be here are extlinks that don't fit the standard
# pattern of 'guide_url/%s.html'
extlinks.update({
    # links to API pages or other non-standard guide links.
    'cog-api': (aws_docs_url + 'cognitoidentity/latest/APIReference/API_%s.html', ''),
    'ec2-api': (aws_docs_url + 'AWSEC2/latest/APIReference/API_%s.html', ''),
    'emr-api': (aws_docs_url + 'ElasticMapReduce/latest/API/API_%s.html', ''),
    'github': ('https://github.com/%s', ''),
    'gloss': (aws_docs_url + 'general/latest/gr/glos-chap.html#%s', ''),
    'iam-api': (aws_docs_url + 'IAM/latest/APIReference/API_%s.html', ''),
    'lam-api': (aws_docs_url + 'lambda/latest/dg/API_%s.html', ''),
    'r53-api': (aws_docs_url + 'Route53/latest/APIReference/API_%s.html', ''),
    's3-bucket-api': (aws_docs_url + 'AmazonS3/latest/API/RESTBucket%s.html', ''),
    's3-object-api': (aws_docs_url + 'AmazonS3/latest/API/RESTObject%s.html', ''),
    's3-service-api': (aws_docs_url + 'AmazonS3/latest/API/RESTService%s.html', ''),
    'sdk-doc-examples' : ('https://github.com/awsdocs/aws-doc-sdk-examples/tree/master/%s', ''),
    'sdk-net-api': (aws_docs_url + 'sdkfornet/v3/apidocs/items/%s.html', ''),
    'sns-api': (aws_docs_url + 'sns/latest/api/API_%s.html', ''),
    'sqs-api': (aws_docs_url + 'AWSSimpleQueueService/latest/APIReference/API_%s.html', ''),
    'sts-api': (aws_docs_url + 'STS/latest/APIReference/API_%s.html', ''),
    'swf-api': (aws_docs_url + 'amazonswf/latest/apireference/API_%s.html', ''),

    # AWS Blogs. Specify the URL past the initial address.
    # Ex. :blog:`developer/category/java`
    'blog': ('https://aws.amazon.com/blogs/%s', ''),

    # AWS Management Console links - Specify the service TLA.
    # Ex. :console:`IAM console <iam>`
    'console': ('https://console.aws.amazon.com/%s/home', ''),

    # Ex. :forum:`Mobile Developer forum <88>`
    'forum': ('https://forums.aws.amazon.com/forum.jspa?forumID=%s', ''),

    # Ex. :forum:`Amazon S3 pricing <s3>`
    'pricing': ('https://aws.amazon.com/%s/pricing/', ''),

    # AWS Regions and Endpoints - Specify the service TLA.
    # Ex. :rande:`Regions and Endpoints: SWF <swf>`
    'rande': (aws_docs_url + 'general/latest/gr/rande.html#%s_region', ''),

    })

# ** end of content from default_extlinks.py **
# ** added by extra conf file: default_includes.py **
# Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

# Although you can include files like this:
#
#  .. include _includes/common_includes.txt
#
# Adding this to the rst_prolog/rst_epilog would break includes for topics that exist in
# subdirectories of the 'source' directory.
#
# Instead, we simply gather the information that exists in the default include locations and make
# *that* the rst_epilog.

import os, codecs

# start with a newline, in case the file doesn't end with one...
rst_epilog = '\n'

common_includes = [
    '_includes/common_includes.txt',
    '_includes/guide_links.txt',
    '_includes/service_links.txt',
    '_includes/region_includes.txt',
    '_includes.txt'
    ]

for i in common_includes:
    if os.path.exists(i):
        f = codecs.open(i, 'r', 'utf-8')
        rst_epilog += f.read()
        f.close()

if 'exclude_patterns' not in vars():
    exclude_patterns = []

exclude_patterns += ['README.*', '**/README.*']

# ** end of content from default_includes.py **
# ** added by extra conf file: default_setup.py **
# Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

# default setup. This is where you can add custom config values and so on.

if 'sphinx.ext.intersphinx' not in extensions:
    extensions.append('sphinx.ext.ifconfig')

def setup(app):
    app.add_config_value('audience', 'public', 'env')

# ** end of content from default_setup.py **



{
	"auto_complete":
	{
		"selected_items":
		[
		]
	},
	"buffers":
	[
		{
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Unix"
			}
		},
		{
			"file": "analytics.rst",
			"settings":
			{
				"buffer_size": 6824,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			}
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 392.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 392.0
	},
	"console":
	{
		"height": 83.0,
		"history":
		[
			"import urllib.request,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by) "
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileiOSDocs/source"
	],
	"file_history":
	[
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileiOSDocs/source/getting-started-s3-objc.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/analytics.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/README.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/cognito-auth.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/cognito-sync.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/dynamodb_om.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-analytics.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-android.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-interactive-user-campaigns-pinpoint.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-kinesis.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-lambda.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-machine-learning.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-store-query-app-data.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-store-retrieve-s3-transferutility.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-sync-data.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-text-to-speech-polly.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/getting-started-understand-natural-language-lex.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/index.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/kinesis.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/lambda.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/lex.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/pinpoint.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/polly.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/s3transferutility.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/setup.rst",
		"/Users/dzucker/src/aws-android-developer-guide/doc_source/Welcome.rst",
		"/Users/dzucker/src/aws-android-developer-guide/README.rst",
		"/Users/dzucker/src/aws-doc-shared-content/README.rst",
		"/Users/dzucker/src/aws-doc-shared-content/sphinx_shared/_conf/default_extlinks.py",
		"/Users/dzucker/src/aws-doc-shared-content/sphinx_shared/_conf/default_includes.py",
		"/Users/dzucker/src/aws-doc-shared-content/sphinx_shared/_includes/common_includes.txt",
		"/Users/dzucker/src/aws-doc-shared-content/sphinx_shared/_includes/service_links.txt",
		"/Users/dzucker/src/aws-doc-shared-content/sphinx_shared/about-aws.txt",
		"/Users/dzucker/src/aws-doc-shared-content/sphinx_shared/common/procedure-get-access-keys.txt",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/analytics.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/ats.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/awstask.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/cognito-auth.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/cognito-sync.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/dynamodb_om.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-analytics.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-cognito.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-dynamodb.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-interactive-user-campaigns-pinpoint.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-ios.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-kinesis.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-lambda.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-machine-learning.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-s3.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-text-to-speech-polly.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/getting-started-understand-natural-language-lex.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/index.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/install-ios-sdk.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/kinesis.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/lambda.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/lex.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/pinpoint.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/polly.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/s3transfermanager.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/s3transferutility.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/setup.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/doc_source/Welcome.rst",
		"/Users/dzucker/src/aws-ios-developer-guide/README.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/analytics.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/cognito-identity.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/cognito-sync.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/conf.py",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/dynamodb.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/getting-started-unity.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/index.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/lambda.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/s3.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/setup-unity.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/sns.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/troubleshooting-unity.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/doc_source/what-is-unity-plugin.rst",
		"/Users/dzucker/src/aws-unity-developer-guide/README.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/analytics.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/best-practices.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/cognito-identity.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/cognito-sync.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/conf.py",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/document-history.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/dynamodb-integration-docmodel.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/dynamodb-integration-lowlevelapi.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/dynamodb-integration-objectpersistencemodel.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/dynamodb.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-analytics.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-sns-android.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-sns-ios.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-store-retrieve-data.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-store-retrieve-s3-transferutility.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-sync-data.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/getting-started-xamarin.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/index.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/s3-integration-lowlevelapi.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/s3-integration-transferutility.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/s3.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/setup.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/sns-send-http.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/sns-send-push-notifications-android.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/sns-send-push-notifications-ios.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/sns-send-sms.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/sns-troubleshooting.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/sns.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/troubleshooting-xamarin.rst",
		"/Users/dzucker/src/aws-xamarin-developer-guide/doc_source/Welcome.rst",
		"/Users/dzucker/bin/srep.py",
		"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-ios-objc/v0.10/isteps/push.md",
		"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-android/v0.10/isteps/sign-in-facebook.md",
		"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-android/v0.10/isteps/sign-in-google.md",
		"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-android/v0.10/isteps/cloud-logic.md",
		"/Users/dzucker/brazil/amh-env/src/AWSMobileHubConsoleApp/editor.html",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/Welcome.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/pinpoint.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/getting-started-android.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforios/source/getting-started-ios.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/lex.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/getting-started-understand-natural-language-lex.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforios/source/pinpoint.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforios/source/lex.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforios/source/getting-started-interactive-user-campaigns-pinpoint.rst",
		"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-ios-swift/v0.4/isteps",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforios/source/polly.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/getting-started-interactive-user-campaigns-pinpoint.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/index.rst",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforandroid/source/_includes.txt",
		"/Users/dzucker/brazil/sphinx-env/src/AWSMobileGuzzleDocs/sdkforios/source/Welcome.rst"
	],
	"find":
	{
		"height": 23.0
	},
	"find_in_files":
	{
		"height": 93.0,
		"where_history":
		[
			"/Users/dzucker/src",
			"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-ios-swift/v0.4/isteps,/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-android/v0.9/isteps,/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-ios-objc/v0.9/isteps",
			"<open files>",
			"",
			"<open files>",
			"/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-ios-swift/v0.4/isteps,/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-android/v0.9/isteps,/Users/dzucker/brazil/AMHIntegrate-env/src/AWSMSHSampleAppTemplate/configuration/templates/aws-my-sample-app-ios-objc/v0.9/isteps",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			".. code-block:: objc\n",
			":subscript:`Objective-C`\n\n",
			"Objective C",
			"Swift**",
			"**Objective C**",
			"**Swift**",
			"xxxx",
			"**Objective C**\n\n",
			"::\n\n    ",
			"**Swift**",
			"**Objective C**",
			"Objective C\n===========",
			"Swift\n=====",
			"dg",
			"2016 Amazon",
			"integ",
			"alpha",
			"Pinpoint",
			"lex",
			"ios",
			"lex",
			"ios",
			"poll",
			"lex",
			"android",
			"lex",
			"polly",
			"iOS",
			"ios",
			"poll",
			"iOS",
			"Android",
			"polly",
			"android",
			"polly",
			"target",
			"AmazonLex ",
			"Amazon Lex",
			"AmazonLex",
			"*|",
			"integ-docs-",
			"Amazon L",
			"\\|LEX\\|",
			"LEX",
			"\\|LEX\\|",
			"\\|LEX|",
			"\\|LEX\\|",
			"\\|LE|",
			"|LEX|",
			"Amazon Lex",
			"Lex",
			"Salesforce",
			"Zendesk",
			"Salesforce",
			"objectivec",
			"OBJC",
			"Salesforce",
			"up",
			"href",
			"_blank",
			"```",
			"2.2.18",
			"2.3.1",
			"2.2.18",
			"2.3.1",
			"2.2.18",
			"Xcode",
			"project",
			"**",
			"s#",
			"\\n\\n\\n",
			"\\t",
			"(###[a-zA-Z ]+\\n)(\\n####[a-zA-Z ]+)",
			"[*][*][*]Note",
			"\\t```",
			" ```",
			"\\t```json-meta",
			" ```json-meta",
			"```json-meta",
			"etadata\n { \"id\" : \"gradle-app-content-delivery\" }\n```",
			"```json-meta",
			"<<<<",
			">>>",
			"==="
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			".. code-block:: \n",
			"",
			"Objective-C",
			":subscript:`Swift`",
			":subscript:`Objective C`",
			":subscript:`Swift`",
			"    xxxxx",
			"**Objective C**\n\n.. code-block:: objc\n\n ",
			"**Objective C**\n\n.. code-block:: objc",
			"\n**Swift**\n\n.. code-block:: swift\n\nxxxx\n\n**Objective C**\n\n",
			"    **Swift**",
			"    **Objective C**",
			"**Objective C**",
			"**Swift**",
			"2017 Amazon",
			"Amazon Pinpoint",
			"Android",
			"iOS",
			"ios",
			"docs.",
			"Amazon Lex",
			"\\|LEX\\|",
			"LEX",
			"|LEX",
			"LEX",
			"|LEX|",
			"QuickBooks",
			"HubSpot",
			"Microsoft Dynamics",
			"Zendesk",
			"swift",
			"Swift",
			"Zendesk",
			"2.3.1",
			"2.2.18",
			"2.3.1"
		],
		"reverse": false,
		"show_context": true,
		"use_buffer2": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"selected": 1,
			"sheets":
			[
				{
					"buffer": 0,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "analytics.rst",
					"semi_transient": true,
					"settings":
					{
						"buffer_size": 6824,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/RestructuredText/reStructuredText.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 0.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "swift3-prototype.sublime-project",
	"replace":
	{
		"height": 42.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": true,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 204.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Working with Asynchronous Tasks
###############################

To work with asynchronous operations without blocking the UI thread, the SDK provides two options:

    - ``completionHandler``, a streamlined class which offers a simple, common pattern for most API calls

and

    - ``AWSTask``, a class which is a renamed version of BFTask from the Bolts framework. AWSTasks
      gives advantages for more complex operations like chaining asynchronous requests.

      For complete documentation on Bolts, see the
      `Bolts-ObjC repo <https://github.com/BoltsFramework/Bolts-ObjC>`_.

.. _completionHandler:

Using completionHandler
=======================

Most simple asynchronous API method calls can use ``completionHandler`` to handle
method callbacks. When an asynchronous method is complete, ``completionHandler`` returns two parts: a response
object containing the method's return if the call was successful, or ``nil`` if failed; and an error object containing the ``NSError`` state when a call fails, or ``nil`` upon success.

Handling Asynchronous Method Returns with completionHandler
-----------------------------------------------------------

The following code shows typical usage of ``completionHandler`` using Amazon Kinesis Firehose as the example.

   .. container:: option

        Swift
            .. code-block:: swift

                var firehose = AWSFirehose.default()
                firehose.putRecord(AWSFirehosePutRecordInput(), completionHandler: {(_ response: AWSFirehosePutRecordOutput?, _ error: Error?) -> Void in
                    if error != nil {
                        //handle error
                    }
                    else {
                        //handle response
                    }
                })

        Objective-C
            .. code-block:: objc

                AWSFirehose *firehose = [AWSFirehose defaultFirehose];

                [firehose putRecord:[AWSFirehosePutRecordInput new] completionHandler:^(AWSFirehosePutRecordOutput* _Nullable response, NSError * _Nullable error) {
                       if(error){
                        //handle error
                       }else{
                        //handle response
                       }
                    }];

.. _awstask:

Using AWSTask
=============

An ``AWSTask`` object represents the result of an asynchronous method. Using ``AWSTask``,
you can wait for an asynchronous method to return a value, and then something with that
value after it has returned. You can chain asynchronous requests instead of nesting them. This
helps keep logic clean and code readable.

Handling Asynchronous Method Returns with AWSTask
-------------------------------------------------

The following code shows how to use ``continueOnSuccessBlockWith:`` and ``continueWith:`` to handle methods calls
that return an ``AWSTask`` object.

   .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    // Guaranteed to happen after saveRecord has executed and completed successfully.
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    return nil
                })

        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData
                                   streamName:@"test-stream-name"] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    return nil;
                }];

The ``submitAllRecords`` call is made within the ``continueOnSuccessWith`` /
``continueWithSuccessBlock:`` because we want to run ``submitAllRecords`` after
``saveRecord:streamName:`` successfully finishes running. The ``continueWith``
and ``continueOnSuccessWith`` won't run until the previous asynchronous call finishes.
In this example, ``submitAllRecords`` is guaranteed to see the result of ``saveRecord:streamName:``.

Handling Errors with AWSTask
----------------------------

The ``continueWith:``   and ``continueOnSuccessWith:`` block calls work in similar ways. Both ensure
that the previous asynchronous method finishes executing before the subsequent block runs. However, they
have one important difference: ``continueOnSuccessWith:`` is skipped if an error occurred in the previous operation, but ``continueWith:`` is always executed.

For example, consider the following scenarios, which refer to the preceding code snippet above.

    * ``saveRecord:streamName:`` succeeded and ``submitAllRecords`` succeeded.

      In this scenario, the program flow  proceeds as follows:

        1. ``saveRecord:streamName:`` is successfully executed.
        2. ``continueOnSuccessWith:`` is executed.
        3. ``submitAllRecords`` is successfully executed.
        4. ``continueWith:`` is executed.
        5. Because ``task.error`` is nil, it doesn't log an error.
        6. Done.

    * ``saveRecord:streamName:`` succeeded and ``submitAllRecords`` failed.

      In this scenario, the program flow  proceeds as follows:

        1. ``saveRecord:streamName:`` is successfully executed.
        2. ``continueOnSuccessWith`` is executed.
        3. ``submitAllRecords`` is executed with an error.
        4. ``continueWithBlock:`` is executed.
        5. Because ``task.error`` is NOT nil, it logs an error from ``submitAllRecords``.
        6. Done.

    * ``saveRecord:streamName:`` failed.

      In this scenario, the program flow  proceeds as follows:

        1. ``saveRecord:streamName:`` is executed with an error.
        2. ``continueOnSuccessWith:`` is skipped and will NOT be executed.
        3. ``continueWithBlock:`` is executed.
        4. Because ``task.error`` is NOT nil, it logs an error from ``saveRecord:streamName:``.
        5. Done.


Consolidated Error Logic with AWSTask
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The preceding example consolidates error handling logic at the end of the execution chain for both methods called. It doesn't check for ``task.error`` in ``continueOnSuccessBlockWith:``, but waits until the ``continueWith:`` block executes to do so. An error from either the ``submitAllRecords`` or the ``saveRecord:streamName:`` method will be printed.

Per Method Error Logic with AWSTask
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The following code shows how to implement the same behavior, but makes error handling specific to each method. ``submitAllRecords`` is only called if ``saveRecord:streamName`` succeeds, however, in this case, the ``saveRecord:streamName`` call uses ``continueWith:``, the block logic checks ``task.error`` and returns nil upon error. If that block succeeds then ``submitAllRecords`` is called using  ``continueWith:`` in a block that also checks ``task.error`` for its own context.

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    if let error = task.error as? NSError {
                        print("Error from 'saveRecord:streamName:': \(error)")
                        return nil
                    }
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error from 'submitAllRecords': \(error)")
                        return nil
                    }

                    return nil
                })


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData
                    streamName:@"test-stream-name"] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error from 'saveRecord:streamName:': %@", task.error);
                        return nil;
                    }
                    return [kinesisRecorder submitAllRecords];
                }]continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                          NSLog(@"Error from 'submitAllRecords': %@", task.error);
                    }
                    return nil;
                }];



Returning AWSTask or nil
------------------------

Remember to return either an ``AWSTask`` object or ``nil`` in every usage of ``continueWith:`` and ``continueOnSuccessWith:``. In most cases, Xcode provides a warning if there is no valid return present, but in some cases an undefined error can occur.

Executing Multiple Tasks with AWSTask
-------------------------------------

If you want to execute a large number of operations, you have two options: executing in sequence or executing in parallel.

In Sequence
~~~~~~~~~~~

You can  submit 100 records to an Amazon Kinesis stream in sequence as follows:

    .. container:: option

        Swift
            .. code-block:: swift

                var task = AWSTask<AnyObject>(result: nil)

                for i in 0...100 {
                    task = task.continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                        return kinesisRecorder!.saveRecord(String(format: "TestString-%02d", i).data(using: .utf8), streamName: "YourStreamName")
                    })
                }

                task.continueOnSuccessWith { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                AWSTask *task = [AWSTask taskWithResult:nil];
                for (int32_t i = 0; i < 100; i++) {
                    task = [task continueWithSuccessBlock:^id(AWSTask *task) {
                        NSData *testData = [[NSString stringWithFormat:@"TestString-%02d", i] dataUsingEncoding:NSUTF8StringEncoding];
                        return [kinesisRecorder saveRecord:testData
                                                streamName:@"test-stream-name"];
                    }];
                }

                [task continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }];

In this case, the key is to concatenate a series of tasks by reassigning ``task``.

    .. container:: option

        Swift
            .. code-block:: swift

                task.continueOnSuccessWith { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in

        Objective-C
            .. code-block:: objc

                task = [task continueWithSuccessBlock:^id(AWSTask *task) {

In Parallel
~~~~~~~~~~~

You can execute multiple methods in parallel by using ``taskForCompletionOfAllTasks:`` as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                var tasks = Array<AWSTask<AnyObject>>()
                for i in 0...100 {
                    tasks.append(kinesisRecorder!.saveRecord(String(format: "TestString-%02d", i).data(using: .utf8), streamName: "YourStreamName")!)
                }

                AWSTask(forCompletionOfAllTasks: tasks).continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    return nil
                })

        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSMutableArray *tasks = [NSMutableArray new];
                for (int32_t i = 0; i < 100; i++) {
                    NSData *testData = [[NSString stringWithFormat:@"TestString-%02d", i] dataUsingEncoding:NSUTF8StringEncoding];
                    [tasks addObject:[kinesisRecorder saveRecord:testData
                                                      streamName:@"test-stream-name"]];
                }

                [[AWSTask taskForCompletionOfAllTasks:tasks] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }];

In this example you create an instance of ``NSMutableArray``, put all of our tasks in it, and then pass it to ``taskForCompletionOfAllTasks:``, which is successful only when all of the tasks are successfully executed. This approach may be faster, but it may consume more system resources. Also, some AWS services, such as Amazon DynamoDB, throttle a large number of certain requests. Choose a sequential or parallel approach based on your use case.

Executing a Block on the Main Thread with AWSTask
-------------------------------------------------

By default, ``continueWithBlock:`` and ``continueWithSuccessBlock:`` are executed on a background thread. But in some cases (for example, updating a UI component based on the result of a service call), you need to execute an operation on the main thread. To execute an operation on the main thread, you can use Grand Central Dispatch or ``AWSExecutor``.

Grand Central Dispatch
~~~~~~~~~~~~~~~~~~~~~~

The following example shows the use of ``dispatch_async(dispatch_get_main_queue(), ^{...});`` to execute a block on the main thread. For error handling, it creates a ``UIAlertView`` on the main thread when record submission fails.

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        DispatchQueue.main.async(execute: {
                            let alertController = UIAlertView(title: "Error!", message: error.description, delegate: nil, cancelButtonTitle: "OK")
                            alertController.show()
                        })
                        return nil
                    }

                    return nil
                })


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData
                                   streamName:@"test-stream-name"] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        dispatch_async(dispatch_get_main_queue(), ^{
                            UIAlertView *alertView =
                                [[UIAlertView alloc] initWithTitle:@"Error!"
                                                           message:[NSString stringWithFormat:@"Error: %@", task.error]
                                                          delegate:nil
                                                 cancelButtonTitle:@"OK"
                                                 otherButtonTitles:nil];
                            [alertView show];
                        });
                    }
                    return nil;
                }];

AWSExecutor
~~~~~~~~~~~

Another option is to use ``AWSExecutor`` as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(executor: AWSExecutor.mainThread(), block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        let alertController = UIAlertView(title: "Error!", message: error.description, delegate: nil, cancelButtonTitle: "OK")
                        alertController.show()
                        return nil
                    }

                    return nil
                })


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData streamName:@"test-stream-name"]
                          continueWithSuccessBlock:^id(AWSTask *task) {
                      return [kinesisRecorder submitAllRecords];
                }] continueWithExecutor:[AWSExecutor mainThreadExecutor] withBlock:^id(AWSTask *task) {
                    if (task.error) {
                        UIAlertView *alertView =
                            [[UIAlertView alloc] initWithTitle:@"Error!"
                                    message:[NSString stringWithFormat:@"Error: %@", task.error]
                                    delegate:nil
                                    cancelButtonTitle:@"OK"
                                    otherButtonTitles:nil];
                        [alertView show];
                    }
                    return nil;
                }];

In this case, ``withBlock:`` (Objective-C) or ``block:`` (Swift) is executed on the main thread.


.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon S3 Pre-Signed URLs: For Background Transfer
##################################################

If you are working with large file transfers, you
may want to perform uploads and downloads in the background. To do this, you need to create a
background session using ``NSURLSession`` and then transfer your objects using pre-signed URLs.

The following sections describe pre-signed S3 URLs. To learn more about ``NSURLSession``, see
`Using NSURLSession <https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/UsingNSURLSession.html>`_.

Pre-Signed URLs
---------------
By default, all Amazon S3 resources are private. If you want your users to have access to Amazon S3 buckets
or objects, you can assign appropriate permissions with an `IAM policy <http://docs.aws.amazon.com/IAM/latest/UserGuide/PoliciesOverview.html>`_.

Alternatively, you can use pre-signed URLs to give your users access to Amazon S3 objects. A pre-signed URL
provides access to an object without requiring AWS security credentials or permissions.

When you create a pre-signed URL, you must provide your security credentials, specify a bucket name,
an object key, an HTTP method, and an expiration date and time. The pre-signed URL is valid only for the specified duration.

Build a Pre-Signed URL
----------------------

The following example shows how to build a pre-signed URL for an Amazon S3 download in the background.

    .. container:: option

        Swift
            .. code-block:: swift

                AWSS3PreSignedURLBuilder.default().getPreSignedURL(getPreSignedURLRequest).continueWith { (task:AWSTask<NSURL>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    let presignedURL = task.result
                    print("Download presignedURL is: \(presignedURL)")

                    let request = URLRequest(url: presignedURL as! URL)
                    let downloadTask: URLSessionDownloadTask = URLSession.shared.downloadTask(with: request)
                    downloadTask.resume()

                    return nil
                }

        Objective-C
            .. code-block:: objc

                AWSS3GetPreSignedURLRequest *getPreSignedURLRequest = [AWSS3GetPreSignedURLRequest new];
                getPreSignedURLRequest.bucket = @"myBucket";
                getPreSignedURLRequest.key = @"myImage.jpg";
                getPreSignedURLRequest.HTTPMethod = AWSHTTPMethodGET;
                getPreSignedURLRequest.expires = [NSDate dateWithTimeIntervalSinceNow:3600];

                [[[AWSS3PreSignedURLBuilder defaultS3PreSignedURLBuilder] getPreSignedURL:getPreSignedURLRequest]
                    continueWithBlock:^id(AWSTask *task) {

                    if (task.error) {
                        NSLog(@"Error: %@",task.error);
                    } else {

                        NSURL *presignedURL = task.result;
                        NSLog(@"download presignedURL is: \n%@", presignedURL);

                        NSURLRequest *request = [NSURLRequest requestWithURL:presignedURL];
                        self.downloadTask = [self.session downloadTaskWithRequest:request];
                        //downloadTask is an instance of NSURLSessionDownloadTask.
                        //session is an instance of NSURLSession.
                        [self.downloadTask resume];

                    }
                    return nil;
                }];

The preceding example uses ``GET`` as the HTTP method: ``AWSHTTPMethodGET``. For an upload request to Amazon S3,
we would need to use a PUT method and also specify a content type.

    .. container:: option

        Swift
            .. code-block:: swift

                getPreSignedURLRequest.httpMethod = .PUT
                let fileContentTypeStr = "text/plain"
                getPreSignedURLRequest.contentType = fileContentTypeStr


        Objective-C
            .. code-block:: objc

                getPreSignedURLRequest.HTTPMethod = AWSHTTPMethodPUT;
                NSString *fileContentTypeStr = @"text/plain";
                getPreSignedURLRequest.contentType = fileContentTypeStr;

Here's an example of building a pre-signed URL for a background upload to S3.

    .. container:: option

        Swift
            .. code-block:: swift

                let getPreSignedURLRequest = AWSS3GetPreSignedURLRequest()
                getPreSignedURLRequest.bucket = "myBucket"
                getPreSignedURLRequest.key = "myFile.txt"
                getPreSignedURLRequest.httpMethod = .PUT
                getPreSignedURLRequest.expires = Date(timeIntervalSinceNow: 3600)

                //Important: set contentType for a PUT request.
                let fileContentTypeStr = "text/plain"
                getPreSignedURLRequest.contentType = fileContentTypeStr

                AWSS3PreSignedURLBuilder.default().getPreSignedURL(getPreSignedURLRequest).continueWith { (task:AWSTask<NSURL>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    let presignedURL = task.result
                    print("Download presignedURL is: \(presignedURL)")

                    var request = URLRequest(url: presignedURL as! URL)
                    request.cachePolicy = .reloadIgnoringLocalCacheData
                    request.httpMethod = "PUT"
                    request.setValue(fileContentTypeStr, forHTTPHeaderField: "Content-Type")

                    let uploadTask: URLSessionTask = URLSession.shared.uploadTask(with: request, fromFile: URL(fileURLWithPath: "your/file/path/myFile.txt"))
                    uploadTask.resume()

                    return nil
                }


        Objective-C
            .. code-block:: objc

                AWSS3GetPreSignedURLRequest *getPreSignedURLRequest = [AWSS3GetPreSignedURLRequest new];
                getPreSignedURLRequest.bucket = @"myBucket";
                getPreSignedURLRequest.key = @"myFile";
                getPreSignedURLRequest.HTTPMethod = AWSHTTPMethodPUT;
                getPreSignedURLRequest.expires = [NSDate dateWithTimeIntervalSinceNow:3600];

                //Important: set contentType for a PUT request.
                NSString *fileContentTypeStr = @"text/plain";
                getPreSignedURLRequest.contentType = fileContentTypeStr;

                [[[AWSS3PreSignedURLBuilder defaultS3PreSignedURLBuilder] getPreSignedURL:getPreSignedURLRequest]
                                                                continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@",task.error);
                    } else {
                        NSURL *presignedURL = task.result;
                        NSLog(@"upload presignedURL is: \n%@", presignedURL);

                        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:presignedURL];
                        request.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData;
                        [request setHTTPMethod:@"PUT"];
                        [request setValue:fileContentTypeStr forHTTPHeaderField:@"Content-Type"];

                        self.uploadTask = [self.session uploadTaskWithRequest:request fromFile:self.uploadFileURL];
                        //uploadTask is an instance of NSURLSessionDownloadTask.
                        //session is an instance of NSURLSession.
                        [self.uploadTask resume];
                    }
                    return nil;
                }];


Additional Resources
====================

* `Amazon Simple Storage Service Getting Started Guide <http://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html>`_
* `Amazon Simple Storage Service API Reference <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_
* `Amazon Simple Storage Service Developer Guide <http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html>`_

.. _Identity and Access Management Console: https://console.aws.amazon.com/iam/home
.. _Granting Access to an Amazon S3 Bucket: http://blogs.aws.amazon.com/security/post/Tx3VRSWZ6B3SHAV/Writing-IAM-Policies-How-to-grant-access-to-an-Amazon-S3-bucket



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Working with AWSTask
####################

To work with asynchronous operations without blocking the UI thread, the SDK provides AWSTask objects.

The ``AWSTask`` class is a renamed version of BFTask from the Bolts framework. For complete
documentation on Bolts, see the `Bolts-iOS repo <https://github.com/BoltsFramework/Bolts-ObjC>`_.

What is AWSTask?
----------------

An ``AWSTask`` object represents the result of an asynchronous method. Using ``AWSTask``,
you can wait for an asynchronous method to return a value, and then do something with that
value after it has returned. You can chain asynchronous requests instead of nesting them. This
helps keep logic clean and code readable.

Handle Returns for Asynchronous Methods
------------------------------------------------

The following code shows how to use ``continueOnSuccessBlockWith:`` and ``continueWith:`` to handle methods calls
that return an ``AWSTask`` object.

   .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    // Guaranteed to happen after saveRecord has executed and completed successfully.
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    return nil
                })

        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData
                                   streamName:@"test-stream-name"] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@", task.error);
                    }
                    return nil;
                }];

The ``submitAllRecords`` call is made within the ``continueOnSuccessWith`` /
``continueWithSuccessBlock:`` because we want to run ``submitAllRecords`` after
``saveRecord:streamName:`` successfully finishes running. The ``continueWith``
and ``continueOnSuccessWith`` won't run until the previous asynchronous call finishes.
In this example, ``submitAllRecords`` is guaranteed to see the result of ``saveRecord:streamName:``.

Handling Errors
---------------

The ``continueWith:``   and ``continueOnSuccessWith:`` block calls work in similar ways. Both ensure
that the previous asynchronous method finishes executing before the subsequent block runs. However, they
have one important difference: ``continueOnSuccessWith:`` is skipped if an error occurred in the previous operation, but ``continueWith:`` is always executed.

For example, consider the following scenarios, which refer to the preceding code snippet above.

    * ``saveRecord:streamName:`` succeeded and ``submitAllRecords`` succeeded.

      In this scenario, the program flow  proceeds as follows:

        1. ``saveRecord:streamName:`` is successfully executed.
        2. ``continueOnSuccessWith:`` is executed.
        3. ``submitAllRecords`` is successfully executed.
        4. ``continueWith:`` is executed.
        5. Because ``task.error`` is nil, it doesn't log an error.
        6. Done.

    * ``saveRecord:streamName:`` succeeded and ``submitAllRecords`` failed.

      In this scenario, the program flow  proceeds as follows:

        1. ``saveRecord:streamName:`` is successfully executed.
        2. ``continueOnSuccessWith`` is executed.
        3. ``submitAllRecords`` is executed with an error.
        4. ``continueWithBlock:`` is executed.
        5. Because ``task.error`` is NOT nil, it logs an error from ``submitAllRecords``.
        6. Done.

    * ``saveRecord:streamName:`` failed.

      In this scenario, the program flow  proceeds as follows:

        1. ``saveRecord:streamName:`` is executed with an error.
        2. ``continueOnSuccessWith:`` is skipped and will NOT be executed.
        3. ``continueWithBlock:`` is executed.
        4. Because ``task.error`` is NOT nil, it logs an error from ``saveRecord:streamName:``.
        5. Done.


Consolidated Error Logic
^^^^^^^^^^^^^^^^^^^^^^^^

The preceding example consolidates error handling logic at the end of the execution chain for both methods called. It doesn't check for ``task.error`` in ``continueOnSuccessBlockWith:``, but waits until the ``continueWith:`` block executes to do so. An error from either the ``submitAllRecords`` or the ``saveRecord:streamName:`` method will be printed.

Per Method Error Logic
^^^^^^^^^^^^^^^^^^^^^^

The following code shows how to implement the same behavior, but makes error handling specific to each method. ``submitAllRecords`` is only called if ``saveRecord:streamName`` succeeds, however, in this case, the ``saveRecord:streamName`` call uses ``continueWith:``, the block logic checks ``task.error`` and returns nil upon error. If that block succeeds then ``submitAllRecords`` is called using  ``continueWith:`` in a block that also checks ``task.error`` for its own context.

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    if let error = task.error as? NSError {
                        print("Error from 'saveRecord:streamName:': \(error)")
                        return nil
                    }
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error from 'submitAllRecords': \(error)")
                        return nil
                    }

                    return nil
                })


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData
                    streamName:@"test-stream-name"] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error from 'saveRecord:streamName:': %@", task.error);
                        return nil;
                    }
                    return [kinesisRecorder submitAllRecords];
                }]continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                          NSLog(@"Error from 'submitAllRecords': %@", task.error);
                    }
                    return nil;
                }];



Returning AWSTask or nil
------------------------

Remember to return either an ``AWSTask`` object or ``nil`` in every usage of ``continueWith:`` and ``continueOnSuccessWith:``. In most cases, Xcode provides a warning if there is no valid return present, but in some cases an undefined error can occur.

Executing Multiple Tasks
------------------------

If you want to execute a large number of operations, you have two options: executing in sequence or executing in parallel.

In Sequence
^^^^^^^^^^^

You can  submit 100 records to an Amazon Kinesis stream in sequence as follows:

    .. container:: option

        Swift
            .. code-block:: swift

                var task = AWSTask<AnyObject>(result: nil)

                for i in 0...100 {
                    task = task.continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                        return kinesisRecorder!.saveRecord(String(format: "TestString-%02d", i).data(using: .utf8), streamName: "YourStreamName")
                    })
                }

                task.continueOnSuccessWith { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                AWSTask *task = [AWSTask taskWithResult:nil];
                for (int32_t i = 0; i < 100; i++) {
                    task = [task continueWithSuccessBlock:^id(AWSTask *task) {
                        NSData *testData = [[NSString stringWithFormat:@"TestString-%02d", i] dataUsingEncoding:NSUTF8StringEncoding];
                        return [kinesisRecorder saveRecord:testData
                                                streamName:@"test-stream-name"];
                    }];
                }

                [task continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }];

In this case, the key is to concatenate a series of tasks by reassigning ``task``.

    .. container:: option

        Swift
            .. code-block:: swift

                task.continueOnSuccessWith { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in

        Objective-C
            .. code-block:: objc

                task = [task continueWithSuccessBlock:^id(AWSTask *task) {

In Parallel
^^^^^^^^^^^

You can execute multiple methods in parallel by using ``taskForCompletionOfAllTasks:`` as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                var tasks = Array<AWSTask<AnyObject>>()
                for i in 0...100 {
                    tasks.append(kinesisRecorder!.saveRecord(String(format: "TestString-%02d", i).data(using: .utf8), streamName: "YourStreamName")!)
                }

                AWSTask(forCompletionOfAllTasks: tasks).continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    return nil
                })

        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSMutableArray *tasks = [NSMutableArray new];
                for (int32_t i = 0; i < 100; i++) {
                    NSData *testData = [[NSString stringWithFormat:@"TestString-%02d", i] dataUsingEncoding:NSUTF8StringEncoding];
                    [tasks addObject:[kinesisRecorder saveRecord:testData
                                                      streamName:@"test-stream-name"]];
                }

                [[AWSTask taskForCompletionOfAllTasks:tasks] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }];

In this example you create an instance of ``NSMutableArray``, put all of our tasks in it, and then pass it to ``taskForCompletionOfAllTasks:``, which is successful only when all of the tasks are successfully executed. This approach may be faster, but it may consume more system resources. Also, some AWS services, such as Amazon DynamoDB, throttle a large number of certain requests. Choose a sequential or parallel approach based on your use case.

Executing a Block on the Main Thread
------------------------------------

By default, ``continueWithBlock:`` and ``continueWithSuccessBlock:`` are executed on a background thread. But in some cases (for example, updating a UI component based on the result of a service call), you need to execute an operation on the main thread. To execute an operation on the main thread, you can use Grand Central Dispatch or ``AWSExecutor``.

Grand Central Dispatch
^^^^^^^^^^^^^^^^^^^^^^

The following example shows the use of ``dispatch_async(dispatch_get_main_queue(), ^{...});`` to execute a block on the main thread. For error handling, it creates a ``UIAlertView`` on the main thread when record submission fails.

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        DispatchQueue.main.async(execute: {
                            let alertController = UIAlertView(title: "Error!", message: error.description, delegate: nil, cancelButtonTitle: "OK")
                            alertController.show()
                        })
                        return nil
                    }

                    return nil
                })


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData
                                   streamName:@"test-stream-name"] continueWithSuccessBlock:^id(AWSTask *task) {
                    return [kinesisRecorder submitAllRecords];
                }] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        dispatch_async(dispatch_get_main_queue(), ^{
                            UIAlertView *alertView =
                                [[UIAlertView alloc] initWithTitle:@"Error!"
                                                           message:[NSString stringWithFormat:@"Error: %@", task.error]
                                                          delegate:nil
                                                 cancelButtonTitle:@"OK"
                                                 otherButtonTitles:nil];
                            [alertView show];
                        });
                    }
                    return nil;
                }];

AWSExecutor
^^^^^^^^^^^

Another option is to use ``AWSExecutor`` as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                let kinesisRecorder = AWSKinesisRecorder.default()

                let testData = "test-data".data(using: .utf8)
                kinesisRecorder?.saveRecord(testData, streamName: "test-stream-name").continueOnSuccessWith(block: { (task:AWSTask<AnyObject>) -> AWSTask<AnyObject>? in
                    return kinesisRecorder?.submitAllRecords()
                }).continueWith(executor: AWSExecutor.mainThread(), block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        let alertController = UIAlertView(title: "Error!", message: error.description, delegate: nil, cancelButtonTitle: "OK")
                        alertController.show()
                        return nil
                    }

                    return nil
                })


        Objective-C
            .. code-block:: objc

                AWSKinesisRecorder *kinesisRecorder = [AWSKinesisRecorder defaultKinesisRecorder];

                NSData *testData = [@"test-data" dataUsingEncoding:NSUTF8StringEncoding];
                [[[kinesisRecorder saveRecord:testData streamName:@"test-stream-name"]
                          continueWithSuccessBlock:^id(AWSTask *task) {
                      return [kinesisRecorder submitAllRecords];
                }] continueWithExecutor:[AWSExecutor mainThreadExecutor] withBlock:^id(AWSTask *task) {
                    if (task.error) {
                        UIAlertView *alertView =
                            [[UIAlertView alloc] initWithTitle:@"Error!"
                                    message:[NSString stringWithFormat:@"Error: %@", task.error]
                                    delegate:nil
                                    cancelButtonTitle:@"OK"
                                    otherButtonTitles:nil];
                        [alertView show];
                    }
                    return nil;
                }];

In this case, ``withBlock:`` (Objective-C) or ``block:`` (Swift) is executed on the main thread.


.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. highlight:: java

#######################################################
Amazon Pinpoint: Create Push Notification Campaigns
#######################################################

What is Amazon Pinpoint?
========================

Using Amazon Pinpoint, you can create push notification campaigns that provide your users with timely, relevant, personalized information to encourage them to keep using your mobile app. You can use push notification campaigns to increase app awareness, downloads, and launches; build customer loyalty; and ultimately boost your mobile revenues.

Campaigns can include things such as welcome and onboarding messages, invites to less-engaged or lapsed users, location-based invites, time-based reminders, and special offers for frequent users. You can use Amazon Pinpoint to create and push different campaigns based on groupings of specific user characteristics, which we refer to as user segments.

Using the following resources, you can integrate Amazon Pinpoint with your iOS app to make it ready to be part of a campaign.

For information on Amazon Pinpoint concepts and service configuration, see the `Amazon Pinpoint Developer Guide <http://docs.aws.amazon.com/pinpoint/latest/developerguide/welcome.html>`_.

For instructions on how to integrate Amazon Pinpoint into your iOS application, see `Integrating Amazon Pinpoint With iOS Apps <http://docs.aws.amazon.com/pinpoint/latest/developerguide/mobile-sdk-ios.html>`_.


# Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

# External link (intersphinx + extlink) definitions

# this is used throughout.
aws_docs_url = 'https://docs.aws.amazon.com/'

# intersphinx locations - with these, you can specify :ref: links directly into
# various guides. For example:
#
#  :ref:`tke-ug:allow-lam-to-assume-an-iam-role`
#
# You just specify the guide name as the first parameter in the <link>, and then
# the reference name as the second parameter. The title of the referenced
# section will be used as the title of the link.
#
# For more information, see: http://www.sphinx-doc.org/en/stable/ext/intersphinx.html

if 'sphinx.ext.intersphinx' not in extensions:
    extensions.append('sphinx.ext.intersphinx')

if 'intersphinx_mapping' not in locals():
    intersphinx_mapping = {}

intersphinx_mapping.update({
    'androiddg': (aws_docs_url + 'mobile/sdkforandroid/developerguide', None),
    'cppdg': (aws_docs_url + 'sdk-for-cpp/v1/developer-guide', None),
    'godg': (aws_docs_url + 'sdk-for-go/v1/developer-guide', None),
    'iosdg': (aws_docs_url + 'mobile/sdkforios/developerguide', None),
    'javadg': (aws_docs_url + 'sdk-for-java/v1/developer-guide', None),
    'netdg2': (aws_docs_url + 'sdk-for-net/v2/developer-guide', None),
    'netdg3': (aws_docs_url + 'sdk-for-net/v3/developer-guide', None),
    'pstug': (aws_docs_url + 'powershell/latest/userguide', None),
    'rubydg': (aws_docs_url + 'sdk-for-ruby/v2/developer-guide', None),
    'tkeug': (aws_docs_url + 'toolkit-for-eclipse/v1/user-guide', None),
    'tkvug': (aws_docs_url + 'toolkit-for-visual-studio/latest/user-guide', None),
    'unitydg': (aws_docs_url + 'mobile/sdkforunity/developerguide', None),
    'xamarindg': (aws_docs_url + 'mobile/sdkforxamarin/developerguide', None),
    })

# default extlinks.
#
# You can use them in your document source by specifying a link to an API entry like this::
#
#     The :swf-api:`DescribeWorkflowExecution` action returns the taskPriority
#     of the workflow.
#
# A link will be created to the SWF API reference, pointing to the action described in the role's
# text.
#
# You can also specify link text that's different from the link address by enclosing the address in
# angle-brackets, such as:
#
#    :rande:`SWF <swf>`
#
# This is useful when the link address is cased differently than the desired output text, or when
# you want the link to appear differently than the standard presentation.
#
# The links in this file are meant to be available to all guides and shared among them. To add
# non-shared or more specific extlinks of your own, add them to the end of your ``conf.py`` file
# like this::
#
#     extlinks['my-link-role'] = ('link_url', 'link_prefix')
#
# For more information, see: http://sphinx-doc.org/ext/extlinks.html

if 'sphinx.ext.extlinks' not in extensions:
    extensions.append('sphinx.ext.extlinks')

if 'extlinks' not in locals():
    extlinks = {}

# a function to add guide extlinks
def get_guide_extlinks():
    """add extlinks for all of the entries in ../_includes/guide_links.txt"""
    import re
    guide_extlinks = {}
    guide_links_file = open('_includes/guide_links.txt')
    guide_links_contents = guide_links_file.read()
    guide_links_file.close()
    m = '.. _(.*):\s+(.*)/'
    matches = re.findall(m, guide_links_contents)
    for i in matches:
        guide_extlinks[str.lower(i[0])] = (i[1] + '/%s.html', '')
    return guide_extlinks

extlinks.update(get_guide_extlinks())

# the only things that should be here are extlinks that don't fit the standard
# pattern of 'guide_url/%s.html'
extlinks.update({
    # links to API pages or other non-standard guide links.
    'cog-api': (aws_docs_url + 'cognitoidentity/latest/APIReference/API_%s.html', ''),
    'ec2-api': (aws_docs_url + 'AWSEC2/latest/APIReference/API_%s.html', ''),
    'emr-api': (aws_docs_url + 'ElasticMapReduce/latest/API/API_%s.html', ''),
    'github': ('https://github.com/%s', ''),
    'gloss': (aws_docs_url + 'general/latest/gr/glos-chap.html#%s', ''),
    'iam-api': (aws_docs_url + 'IAM/latest/APIReference/API_%s.html', ''),
    'lam-api': (aws_docs_url + 'lambda/latest/dg/API_%s.html', ''),
    'r53-api': (aws_docs_url + 'Route53/latest/APIReference/API_%s.html', ''),
    's3-bucket-api': (aws_docs_url + 'AmazonS3/latest/API/RESTBucket%s.html', ''),
    's3-object-api': (aws_docs_url + 'AmazonS3/latest/API/RESTObject%s.html', ''),
    's3-service-api': (aws_docs_url + 'AmazonS3/latest/API/RESTService%s.html', ''),
    'sdk-doc-examples' : ('https://github.com/awsdocs/aws-doc-sdk-examples/tree/master/%s', ''),
    'sdk-net-api': (aws_docs_url + 'sdkfornet/v3/apidocs/items/%s.html', ''),
    'sns-api': (aws_docs_url + 'sns/latest/api/API_%s.html', ''),
    'sqs-api': (aws_docs_url + 'AWSSimpleQueueService/latest/APIReference/API_%s.html', ''),
    'sts-api': (aws_docs_url + 'STS/latest/APIReference/API_%s.html', ''),
    'swf-api': (aws_docs_url + 'amazonswf/latest/apireference/API_%s.html', ''),

    # AWS Blogs. Specify the URL past the initial address.
    # Ex. :blog:`developer/category/java`
    'blog': ('https://aws.amazon.com/blogs/%s', ''),

    # AWS Management Console links - Specify the service TLA.
    # Ex. :console:`IAM console <iam>`
    'console': ('https://console.aws.amazon.com/%s/home', ''),

    # Ex. :forum:`Mobile Developer forum <88>`
    'forum': ('https://forums.aws.amazon.com/forum.jspa?forumID=%s', ''),

    # Ex. :forum:`Amazon S3 pricing <s3>`
    'pricing': ('https://aws.amazon.com/%s/pricing/', ''),

    # AWS Regions and Endpoints - Specify the service TLA.
    # Ex. :rande:`Regions and Endpoints: SWF <swf>`
    'rande': (aws_docs_url + 'general/latest/gr/rande.html#%s_region', ''),

    })




# Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

# default setup. This is where you can add custom config values and so on.

if 'sphinx.ext.intersphinx' not in extensions:
    extensions.append('sphinx.ext.ifconfig')

def setup(app):
    app.add_config_value('audience', 'public', 'env')




# Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

# Although you can include files like this:
#
#  .. include _includes/common_includes.txt
#
# Adding this to the rst_prolog/rst_epilog would break includes for topics that exist in
# subdirectories of the 'source' directory.
#
# Instead, we simply gather the information that exists in the default include locations and make
# *that* the rst_epilog.

import os, codecs

# start with a newline, in case the file doesn't end with one...
rst_epilog = '\n'

common_includes = [
    '_includes/common_includes.txt',
    '_includes/guide_links.txt',
    '_includes/service_links.txt',
    '_includes/region_includes.txt',
    '_includes.txt'
    ]

for i in common_includes:
    if os.path.exists(i):
        f = codecs.open(i, 'r', 'utf-8')
        rst_epilog += f.read()
        f.close()

if 'exclude_patterns' not in vars():
    exclude_patterns = []

exclude_patterns += ['README.*', '**/README.*']




.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon Mobile Analytics: Try Amazon Pinpoint
############################################

    .. note::

        Amazon Mobile Analytics is now part of a more fully featured service called `Amazon Pinpoint <http://docs.aws.amazon.com/pinpoint/latest/developerguide/welcome.html>`_. Using Amazon Pinpoint, you can gather and view customized metrics, as in Amazon Mobile Analytics, and then create a campaign to respond to your user's behavior via push notification based on the data you receive.

        Existing Amazon Mobile Analytics for your mobile apps are automatically ported to the `Amazon Pinpoint console <https://console.aws.amazon.com/pinpoint/home/>`_ and will continue to function as expected.

Using Amazon Mobile Analytics, you can track customer behaviors, aggregate metrics, generate
data visualizations, and identify meaningful patterns. The AWS SDK for iOS provides
integration with the Amazon Mobile Analytics service. For information about AWS service region availability
or Mobile Analytics region availability, see `AWS Service Region Availability <http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.


What is Amazon Mobile Analytics?
================================

Amazon Mobile Analytics lets you collect, visualize, and understand app usage for your iOS,
Android, FireOS, Windows Phone, Blackberry mobile apps as well as desktop and web apps running
on Windows, OS X, and Linux. Reports are available for metrics on active users, sessions,
retention, in-app revenue, and custom events, and can be filtered by platform and date
range. Amazon Mobile Analytics is built to scale with your business and can collect and process
billions of events from many millions of endpoints.

To learn more about Mobile Analytics, see the `Amazon Mobile Analytics User Guide <http://docs.aws.amazon.com/mobileanalytics/latest/ug/>`_

IAM Policy for Amazon Mobile Analytics
--------------------------------------

To use Amazon Mobile Analytics, AWS users must have the correct permissions. The following IAM
policy allows the user to submit events to Amazon Mobile Analytics.

    .. code-block:: json

        {
            "Statement": [{
                "Effect": "Allow",
                "Action": "mobileanalytics:PutEvents",
                "Resource": "*"
            }]
        }

This policy should be assigned to roles associated with the Amazon Cognito
identity pool for your app. The policy allows clients to record events with the Mobile
Analytics service. Amazon Cognito will set this policy for you, if you let it create new
roles. Other policies are required to allow IAM users to view reports.

You can set permissions at https://console.aws.amazon.com/iam/. To learn more about IAM policies, see
`Using IAM <http://docs.aws.amazon.com/IAM/latest/UserGuide/IAM_Introduction.html>`_.

Integrating Amazon Mobile Analytics
===================================

The sections below explain how to integrate Amazon Mobile Analytics with your app.

Create an App in the Amazon Mobile Analytics Console
----------------------------------------------------

Go to the `Amazon Mobile Analytics console <https://console.aws.amazon.com/mobileanalytics/home>`_
and create an app. Note the :code:`appId` value, as you'll need it later.

To learn more about creating new apps in the console, see `Managing Apps <http://docs.aws.amazon.com/mobileanalytics/latest/ug/managing-apps.html>`_ in the Amazon Mobile Analytics User Guide.

Integrate the SDK into Your App
-------------------------------

If you haven't already done so, `download the SDK for iOS <http://aws.amazon.com/mobile/sdk/>`_,
unzip it, and include it in your application as described at :doc:`setup-aws-sdk-for-ios`. The
instructions direct you to import the headers for the services you'll be
using.

    .. container:: option

        Objective-C
            .. code-block:: objc

                #import <AWSMobileAnalytics/AWSMobileAnalytics.h>

Initialize an :command:`AWSMobileAnalytics` client. In doing so, you'll
need to provide the :code:`appId` value that you generated in the Amazon Mobile Analytics console.
The :code:`appId` is used to group your data in the Amazon Mobile Analytics console.

    .. container:: option

        Objective-C
            .. code-block:: objc

                AWSMobileAnalyticsConfiguration *analyticsConfiguration = [[AWSMobileAnalyticsConfiguration alloc] init];
                [analyticsConfiguration setServiceConfiguration:serviceConfiguration];
                AWSMobileAnalytics *analytics = [AWSMobileAnalytics mobileAnalyticsForAppId:@"yourAppId" configuration: analyticsConfiguration];


where "yourAppId" is the :code:`appId` value from the Amazon Mobile Analytics console.

Add Monetization Events
-----------------------

The SDK for iOS provides the :code:`AWSMobileAnalyticsAppleMonetizationEventBuilder` class, which helps you
build monetization events to track purchases from Apple’s IAP Framework.

To learn more about monetization events, see:

* `AWSMobileAnalyticsAppleMonetizationEventBuilder <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSMobileAnalyticsAppleMonetizationEventBuilder.html>`_ in the API Reference Guide.
* `Creating Monetization Events <http://docs.aws.amazon.com/mobileanalytics/latest/ug/defining-a-monetization-event-sdk.html>`_ in the Amazon Mobile Analytics User Guide.

Record Custom Events
--------------------

To record custom events, we first need to get the event client from the AWSMobileAnalytics instance.

    .. container:: option

        Objective-C
            .. code-block:: objc

                id<AWSMobileAnalyticsEventClient> eventClient = analytics.eventClient;

For this example, let's say your app is a game, and you want to record an
event when a user completes a level. Create a "LevelComplete" event.

    .. container:: option

        Objective-C
            .. code-block:: objc

                id<AWSMobileAnalyticsEvent> levelEvent = [eventClient createEventWithEventType:@"LevelComplete"];

Note that custom events can't start with an underscore (_), or they'll be
filtered out.

Add attributes and metrics to the event in key-value pairs.

    .. container:: option

        Objective-C
            .. code-block:: objc

                [levelEvent addAttribute:@"Upper Dungeon" forKey:@"LevelName"];
                [levelEvent addAttribute:@"Moderately difficult" forKey:@"Difficulty"];
                [levelEvent addMetric:@1763 forKey:@"TimeToComplete"];

Record the event.

    .. container:: option

        Objective-C
            .. code-block:: objc

                [eventClient recordEvent:levelEvent];

Events are submitted automatically when the user goes into the background.
However, if you want to submit events manually, you can do so with the
:command:`submitEvents` method.

    .. container:: option

        Objective-C
            .. code-block:: objc

                [eventClient submitEvents];

If you don't call :command:`submitEvents`, events will automatically be
submitted at periodic intervals.

To learn more about custom events, see:

* `AWSMobileAnalyticsEventClient <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSMobileAnalytics.html#//api/name/eventClient>`_ in the API Reference Guide.
* `AWSMobileAnalyticsEvent <http://docs.aws.amazon.com/AWSiOSSDK/latest/Protocols/AWSMobileAnalyticsEvent.html>`_ in the API Reference Guide.
* `Creating a Custom Event <http://docs.aws.amazon.com/mobileanalytics/latest/ug/creating-a-custom-event-sdk.html>`_ in the Amazon Mobile Analytics User Guide.



{
	"folders":
	[
		{
			"path": "."
		}
	]
}



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

======================
AWS Mobile SDK for iOS
======================

Welcome to the *AWS Mobile SDK for iOS Developer Guide*. This guide will help you start
developing iOS applications using Amazon Web Services.

If you're new to the AWS Mobile SDK, you'll probably want to look first at :doc:`Welcome`
and :doc:`getting-started-ios`. These topics explain what the AWS Mobile SDK includes, how
to set up the SDK, and how to get started using AWS services from an iOS application.

After you've set up the SDK, you can start working with the mobile clients for Amazon Web
Services. The mobile clients are described in the service-specific topics. No matter which
services you're using, you should provide AWS credentials to your app via Amazon Cognito.
The Amazon Cognito credential provider is discussed briefly in the various mobile service
topics, and at length in :doc:`cognito-auth-aws-identity-for-ios`.

.. toctree::
   :maxdepth: 2
   :titlesonly:

   Welcome
   getting-started-ios
   s3-simple-storage-service-for-ios
   dynamodb-nosql-database-for-ios
   lambda-serverless-business-logic-in-the-cloud-for-ios
   cognito-sync-data-across-devices-for-ios
   kinesis-data-stream-processing-for-ios
   lex-natural-language-interface-for-ios
   polly-convert-text-to-speech-for-ios
   pinpoint-mobile-analytics-and-user-engagement-for-ios
   machine-learning-for-ios
   analytics



Additional Resources
====================

- For more information about the AWS SDK for iOS, including a complete list of
  supported AWS products, see the `AWS Mobile SDK product page <http://aws.amazon.com/mobile/sdk>`_.

- The SDK reference documentation includes the ability to browse and search code
  included with the SDK. It provides thorough documentation and usage examples. You can
  find it at `AWS SDK for iOS API Reference <http://docs.aws.amazon.com/AWSiOSSDK/latest/>`_.

- Post questions and feedback at the `Mobile Developer Forum <https://forums.aws.amazon.com/forum.jspa?forumID=88>`_.

- Source code and sample applications are available at `AWS SDK for iOS repository <https://github.com/aws/aws-sdk-ios-v2>`_. Source code for Amazon Cognito is available at
  the `Amazon Cognito repository <https://github.com/aws/amazon-cognito-ios>`_.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon S3 TransferManager for iOS
##################################

On this page:

.. contents::
   :local:
   :depth: 1

:guilabel:`Amazon Simple Storage Service (S3)`

`Amazon Simple Storage Service (S3) <http://aws.amazon.com/s3/>`_ provides secure,
durable, highly-scalable object storage in the cloud. Using the AWS Mobile SDK for iOS, you can
directly access Amazon S3 from your mobile app. For information about Amazon S3 regional availability,
see  `AWS Service Region Availability <http://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/>`_.

:guilabel:`TransferManager Features`

Amazon S3 TransferManager class makes it easy   to upload files to and download files from Amazon S3
while optimizing for performance and reliability. It hides the complexity of transferring
files behind a simple API.

Whenever possible, uploads are broken into multiple pieces, so that several pieces are sent in
parallel to provide better throughput. This approach enables more robust transfers, since an I/O error
in an individual piece result in the SDK retransmitting only the faulty piece, not the
entire transfer. ``TransferManager`` provides simple APIs to pause, resume, and cancel file transfers.

The following sections provide a step-by-step guide for getting started with Amazon S3 using the ``TransferManager``.

You can also try out the
`Amazon S3 sample <https://github.com/awslabs/aws-sdk-ios-samples/tree/master/S3TransferManager-Sample>`_ available in the AWSLabs GitHub repository.

.. admonition:: Should I Use ``TransferManager`` or ``TransferUtility``?

    To choose which API best suits your needs, see :ref:`manager-or-utility`.


Setup
=====

To set your project up to use the ``TransferManager`` class, take the steps below.

1. Setup the SDK, Credentials and Services
------------------------------------------

    Follow the steps in :doc:`s3-setup-for-ios` install the AWS Mobile SDK for iOS and configure
    AWS credentials and permissions.

2. Import the SDK Amazon S3 APIs
--------------------------------

    Add the following import statements to your Xcode project.

        .. container:: option

            Swift
                .. code-block:: swift

                    import AWSS3

            Objective-C
                .. code-block:: objc

                    #import <AWSS3/AWSS3.h>

3. Create the ``TransferManager`` Client
----------------------------------------

    Add the following code to create an `AWSS3TransferManager` client.

        .. container:: option

            Swift
                .. code-block:: swift

                    let transferManager = AWSS3TransferManager.default()

            Objective-C
                .. code-block:: objc

                    AWSS3TransferManager *transferManager = [AWSS3TransferManager defaultS3TransferManager];

    The `AWSS3TransferManager` class is an entry point to this SDK's high-level Amazon S3 APIs.

Transfer an Object
==================

In this section:

.. contents::
   :local:
   :depth: 1

Downloading a file from and uploading a file to a bucket, use the same coding pattern. An important
difference is that `download:` does not succeed until the download is complete, blocking any flow that
depends on that success. Upload returns immediately and can therefore be safely called on the
main thread.

The steps to call ``TransferManager`` for a transfer are as follows.

1. Create an ``AWSS3TransferManagerDownloadRequest``
----------------------------------------------------

    The following code illustrates the three actions needed to create a download request:

        - Create a destination/source location for the file. In this example, this is
          called ``downloadingFileURL`` / ``uploadingFileURL``.

        - Construct a request object using ``AWSS3TransferManagerDownloadRequest``.

        - Set three properties of the request object: the bucket name; the key (the name of
          the object in the bucket); and the download destination / upload source
          ``downloadingFileURL`` / ``uploadingFileURL``.

        :guilabel:`Download`

        .. container:: option

            Swift
                .. code-block:: swift

                    let downloadingFileURL = URL(fileURLWithPath: NSTemporaryDirectory()).appendingPathComponent("myImage.jpg")

                    let downloadRequest = AWSS3TransferManagerDownloadRequest()

                    downloadRequest.bucket = "myBucket"
                    downloadRequest.key = "myImage.jpg"
                    downloadRequest.downloadingFileURL = downloadingFileURL

            Objective-C
                .. code-block:: objc

                    NSString *downloadingFilePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"myImage.jpg"];
                    NSURL *downloadingFileURL = [NSURL fileURLWithPath:downloadingFilePath];

                    AWSS3TransferManagerDownloadRequest *downloadRequest = [AWSS3TransferManagerDownloadRequest new];

                    downloadRequest.bucket = @"myBucket";
                    downloadRequest.key = @"myImage.jpg";
                    downloadRequest.downloadingFileURL = downloadingFileURL;


        :guilabel:`Upload`

        .. container:: option

            Swift
                .. code-block:: swift

                    let uploadingFileURL = URL(fileURLWithPath: "your/file/path/myTestFile.txt")

                    let uploadRequest = AWSS3TransferManagerUploadRequest()

                    uploadRequest.bucket = "myBucket"
                    uploadRequest.key = "myTestFile.txt"
                    uploadRequest.body = uploadingFileURL

            Objective-C
                .. code-block:: objc

                    NSURL *uploadingFileURL = [NSURL fileURLWithPath: @"your/file/path/myTestFile.txt"];

                    AWSS3TransferManagerUploadRequest *uploadRequest = [AWSS3TransferManagerUploadRequest new];

                    uploadRequest.bucket = @"myBucket";
                    uploadRequest.key = @"myTestFile.txt";
                    uploadRequest.body = uploadingFileURL;


2. Pass the Request to the `download:` Method
---------------------------------------------

    Use the following code to pass the request to the `download:` / `upload:" method of the
    ``TransferManager`` client. The methods are asynchronous and returns an `AWSTask` object. Use a
    `continueWith` block to handle the method result.  For more information about `AWSTask`,
    see :doc:`awstask`.

        :guilabel:`Download`

        .. container:: option

            Swift
                .. code-block:: swift

                    transferManager.download(downloadRequest).continueWith(executor: AWSExecutor.mainThread(), block: { (task:AWSTask<AnyObject>) -> Any? in

                        if let error = task.error as? NSError {
                            if error.domain == AWSS3TransferManagerErrorDomain, let code = AWSS3TransferManagerErrorType(rawValue: error.code) {
                                switch code {
                                case .cancelled, .paused:
                                    break
                                default:
                                    print("Error downloading: \(downloadRequest.key) Error: \(error)")
                                }
                            } else {
                                print("Error downloading: \(downloadRequest.key) Error: \(error)")
                            }
                            return nil
                        }
                        print("Download complete for: \(downloadRequest.key)")
                        let downloadOutput = task.result
                        return nil
                    })

            Objective-C
                .. code-block:: objc

                    [[transferManager download:downloadRequest ] continueWithExecutor:[AWSExecutor mainThreadExecutor]
                        withBlock:^id(AWSTask *task) {
                        if (task.error){
                            if ([task.error.domain isEqualToString:AWSS3TransferManagerErrorDomain]) {
                                switch (task.error.code) {
                                    case AWSS3TransferManagerErrorCancelled:
                                    case AWSS3TransferManagerErrorPaused:
                                    break;

                                    default:
                                        NSLog(@"Error: %@", task.error);
                                        break;
                                }

                            } else {
                                NSLog(@"Error: %@", task.error);
                            }
                        }

                        if (task.result) {
                            AWSS3TransferManagerDownloadOutput *downloadOutput = task.result;
                        }
                        return nil;
                    }];

        :guilabel:`Upload`

        .. container:: option

            Swift
                .. code-block:: swift

                    transferManager.upload(uploadRequest).continueWith(executor: AWSExecutor.mainThread(), block: { (task:AWSTask<AnyObject>) -> Any? in

                        if let error = task.error as? NSError {
                            if error.domain == AWSS3TransferManagerErrorDomain, let code = AWSS3TransferManagerErrorType(rawValue: error.code) {
                                switch code {
                                case .cancelled, .paused:
                                    break
                                default:
                                    print("Error uploading: \(uploadRequest.key) Error: \(error)")
                                }
                            } else {
                                print("Error uploading: \(uploadRequest.key) Error: \(error)")
                            }
                            return nil
                        }

                        let uploadOutput = task.result
                        print("Upload complete for: \(uploadRequest.key)")
                        return nil
                    })

            Objective-C
                .. code-block:: objc

                    [[transferManager upload:uploadRequest] continueWithExecutor:[AWSExecutor mainThreadExecutor]
                                withBlock:^id(AWSTask *task) {
                    if (task.error) {
                        if ([task.error.domain isEqualToString:AWSS3TransferManagerErrorDomain]) {
                            switch (task.error.code) {
                                case AWSS3TransferManagerErrorCancelled:
                                case AWSS3TransferManagerErrorPaused:
                                    break;

                                default:
                                    NSLog(@"Error: %@", task.error);
                                    break;
                            }
                        } else {
                            // Unknown error.
                            NSLog(@"Error: %@", task.error);
                        }
                    }

                    if (task.result) {
                        AWSS3TransferManagerUploadOutput *uploadOutput = task.result;
                        // The file uploaded successfully.
                    }
                    return nil;
                }];


3. Displaying a Downloaded Image in an UIImageView
--------------------------------------------------

    The use of `download:` in this example is executed on the main thread. The following code illustrates
    displaying such an image in a `UIImageView` configured in your project .

    Note that it can only succeed after download of the file it displays has completed.

        .. container:: option

            Swift
                .. code-block:: swift

                    self.imageView.image = UIImage(contentsOfFile: downloadingFileURL.path)


            Objective-C
                .. code-block:: objc

                    self.imageView.image = [UIImage imageWithContentsOfFile:downloadingFilePath];



Pause, Resume, and Cancel Object Transfers
==========================================

In this section:

.. contents::
   :local:
   :depth: 1

The ``TransferManager`` supports pause, resume, and cancel operations for both
uploads and downloads. The `pause`, `cancel`, `resumeAll`, `cancelAll`, `pauseAll`,
`upload:`, and `download:` operations all return instances of `AWSTask`. Use these methods with a
`continueWith` `block:` to handle the returns of these operations.

Use continueWith Block to Handle Results
----------------------------------------

The following code illustrates using `continueWith` `block:` when calling the `pause` method.

    .. container:: option

        Swift
            .. code-block:: swift

                uploadRequest.pause().continueWith(block: { (task:AWSTask<AnyObject>) -> Any? in
                    if let error = task.error as? NSError {
                        print("Error: \(error)")
                        return nil
                    }

                    // Upload has been paused.
                    return nil
                })


        Objective-C
            .. code-block:: objc

                [[self.uploadRequest pause] continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"Error: %@",task.error);
                    } else {

                    }

                    // Upload has been paused.
                    return nil;
                }];

For brevity, the following examples omit the `continueWithBlock`.

Pause a Transfer
----------------

To pause an object transfer, call `pause` on the request object.

    .. container:: option

        Swift
            .. code-block:: swift

                uploadRequest.pause()
                downloadRequest.pause()


        Objective-C
            .. code-block:: objc

                [uploadRequest pause];
                [downloadRequest pause];

Resume a Transfer
-----------------

To resume a transfer, call `upload` or `download` and pass in
the paused request object.

    .. container:: option

        Swift
            .. code-block:: swift

                transferManager.upload(uploadRequest)
                transferManager.download(downloadRequest)


        Objective-C
            .. code-block:: objc

                [transferManager upload:uploadRequest];
                [transferManager download:downloadRequest];

Cancel a Transfer
-----------------

To cancel a transfer, call `cancel` on the upload or download request.

    .. container:: option

        Swift
            .. code-block:: swift

                uploadRequest.cancel()
                downloadRequest.cancel()


        Objective-C
            .. code-block:: objc

                [uploadRequest cancel];
                [downloadRequest cancel];

Pause All Transfers
-------------------

To pause all of the current upload and download requests, call `pauseAll` on the ``TransferManager``.

    .. container:: option

        Swift
            .. code-block:: swift

                transferManager.pauseAll()

        Objective-C
            .. code-block:: objc

                [transferManager pauseAll];

Resume All Transfers
--------------------

To resume all of the current upload and download requests, call `resumeAll` on the ``TransferManager``
passing an `AWSS3``TransferManager``ResumeAllBlock`, which is a closure that takes `AWSRequest` as a parameter, and
can be used to reset the progress blocks for the requests.

    .. container:: option

        Swift
            .. code-block:: swift

                transferManager.resumeAll({ (request:AWSRequest?) in
                   // All paused requests have resumed.
                })


        Objective-C
            .. code-block:: objc

                [transferManager resumeAll:^(AWSRequest *request) {
                    // All paused requests have resumed.
                }];

Cancel All Transfers
--------------------

To cancel all upload and download requests, call `cancelAll` on the TransferManager.

    .. container:: option

        Swift
            .. code-block:: swift

                transferManager.cancelAll()

        Objective-C
            .. code-block:: objc

                [transferManager cancelAll];

Track Progress
==============

Using the `uploadProgress` and `downloadProgress` blocks, you can track the progress of
object transfers. These blocks work in conjunction with the Grand Central Dispatch `dispatch_async` function,
as shown in the following examples.

    Upload Progress
    ---------------

    Track the progress of an upload.

        .. container:: option

            Swift
                .. code-block:: swift

                        uploadRequest.uploadProgress = {(bytesSent: Int64, totalBytesSent: Int64, totalBytesExpectedToSend: Int64) -> Void in
                            DispatchQueue.main.async(execute: {() -> Void in
                                //Update progress
                            })
                        }

            Objective-C
                .. code-block:: objc

                    uploadRequest.uploadProgress =  ^(int64_t bytesSent, int64_t totalBytesSent, int64_t totalBytesExpectedToSend){
                        dispatch_async(dispatch_get_main_queue(), ^{
                         //Update progress
                    });

    Download Progress
    -----------------

    Track the progress of a download.

        .. container:: option

            Swift
                .. code-block:: swift

                    downloadRequest.downloadProgress = {(bytesSent: Int64, totalBytesSent: Int64, totalBytesExpectedToSend: Int64) -> Void in
                        DispatchQueue.main.async(execute: {() -> Void in
                            //Update progress
                        })
                    }

            Objective-C
                .. code-block:: objc

                    downloadRequest.downloadProgress = ^(int64_t bytesWritten, int64_t totalBytesWritten, int64_t totalBytesExpectedToWrite){
                    dispatch_async(dispatch_get_main_queue(), ^{
                            //Update progress
                    });

Multipart Upload
================

Amazon S3 provides a multipart upload feature to upload a single object as a set of parts.
Each part is a contiguous portion of the object's data. The object parts are uploaded
independently and in any order. If transmission of any part fails, you can retransmit that part
without affecting other parts. After all parts of the object are uploaded, Amazon S3 assembles
these parts and creates the object.

In the AWS Mobile SDK for iOS, the ``TransferManager`` handles multipart upload for you. The
minimum part size for a multipart upload is 5MB.

Additional Resources
====================

* `Amazon Simple Storage Service Getting Started Guide <http://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html>`_
* `Amazon Simple Storage Service API Reference <http://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html>`_
* `Amazon Simple Storage Service Developer Guide <http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html>`_

.. _Identity and Access Management Console: https://console.aws.amazon.com/iam/home
.. _Granting Access to an Amazon S3 Bucket: http://blogs.aws.amazon.com/security/post/Tx3VRSWZ6B3SHAV/Writing-IAM-Policies-How-to-grant-access-to-an-Amazon-S3-bucket



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

.. highlight:: java

#######################################
Amazon Polly: Text to Speech Conversion
#######################################

What is Amazon Polly?
=====================

Amazon Polly is a service that turns text into lifelike speech, making it easy to develop mobile applications that use high-quality speech to increase engagement and accessibility. With Amazon Polly you can  quickly build speech-enabled apps that work in multiple geographies.

Using the following resources, you can integrate Amazon Polly with your iOS app to add text to speech transformation. No deep knowledge of either AWS services or natural language computing is needed.

For information on Amazon Polly concepts and service configuration, see `How it Works <http://docs.aws.amazon.com/polly/latest/dg/how-text-to-speech-works.html>`_ in the Amazon Polly Developer Guide.

For instructions on how to integrate Amazon Polly into your iOS application, see the `Application Examples <http://docs.aws.amazon.com/polly/latest/dg/examples-for-using-polly.html>`_ section of the |POL-dg|.

For end to end sample apps using Amazon Polly see the `AWS SDK for iOS samples <https://github.com/awslabs/aws-sdk-ios-samples/>`_.



.. Copyright 2010-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.

   This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
   International License (the "License"). You may not use this file except in compliance with the
   License. A copy of the License is located at http://creativecommons.org/licenses/by-nc-sa/4.0/.

   This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   either express or implied. See the License for the specific language governing permissions and
   limitations under the License.

Amazon DynamoDB Object Mapper API
#################################


On this page:

.. contents::
   :local:
   :depth: 1

:guilabel:`Amazon DynamoDB`

`Amazon DynamoDB <http://aws.amazon.com/dynamodb/>`_ is a fast, highly scalable,
highly available, cost-effective, non-relational database service. Amazon DynamoDB removes traditional
scalability limitations on data storage while maintaining low latency and predictable
performance.

The AWS Mobile SDK for iOS provides both low-level and high-level libraries for working with
Amazon DynamoDB.

The high-level library described in this section provides Amazon DynamoDB object mapper which lets you map client-side classes to tables. Working within the data model defined on your client you can write simple, readable code that stores and retrieves objects in the cloud.

The :doc:`dynamodb-low-level-client` provides useful ways to perform operations
like conditional writes and batch operations.

Setup
=====

To set your project up to use the AWS SDK for iOS TransferUtility, take the following steps.

1. Setup the SDK, Credentials, and Services
-------------------------------------------

    Follow the steps described in :doc:`dynamodb-setup-for-ios` to install the AWS Mobile SDK for iOS and configure AWS services, credentials, and permissions.


Instantiating the Object Mapper API
===================================

In this section:

.. contents::
   :local:
   :depth: 1

Import the AWSDynamoDB APIs
---------------------------

Add the following import statement to your project.

    .. container:: option

        Swift
            .. code-block:: swift

                import AWSDynamoDB


        Objective-C
            .. code-block:: objc

                #import <AWSDynamoDB/AWSDynamoDB.h>

Create Amazon DynamoDB Object Mapper Client
-------------------------------------------

Use the `AWSDynamoDBObjectMapper <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSDynamoDBObjectMapper.html>`_ to map a client-side class to your database. The object mapper supports high-level operations like creating, getting, querying, updating, and deleting records. Create an object mapper as follows.

    .. container:: option

        Swift
            .. code-block:: swift

                dynamoDBObjectMapper = AWSDynamoDBObjectMapper.default()


        Objective-C
            .. code-block:: objc

                AWSDynamoDBObjectMapper *dynamoDBObjectMapper = [AWSDynamoDBObjectMapper defaultDynamoDBObjectMapper];

Object mapper methods return an ``AWSTask`` object. for more information, see :ref:`awstask`.

Define a Mapping Class
----------------------

An Amazon DynamoDB database is a collection of tables, and a table can be described as follows:

* A table is a collection of items.
* Each item is a collection of attributes.
* Each attribute has a name and a value.

For the bookstore app, each item in the table represents a book, and each item has
four attributes: :dfn:`Title`, :dfn:`Author`, :dfn:`Price`, and :dfn:`ISBN`.

Each item (Book) in the table has a :guilabel:`Primary key`, in this case, the primary key is ``ISBN``.

To directly manipulate database items through their object representation, map each item in the
Book table to a ``Book`` object in the client-side code, as shown in the following code. Attribute names are case sensitive.


    .. container:: option

        Swift
            .. code-block:: swift

                import AWSDynamoDB

                class Book : AWSDynamoDBObjectModel, AWSDynamoDBModeling  {
                    var Title:String?
                    var Author:String?
                    var Price:String?
                    var ISBN:String?

                    class Amazon DynamoDBTableName() -> String {
                        return "Books"
                    }

                    class func hashKeyAttribute() -> String {
                        return "ISBN"
                    }
                }

        Objective-C
            .. code-block:: objc

                #import <AWSDynamoDB/AWSDynamoDB.h>
                #import "Book.h"

                @interface Book : AWSDynamoDBObjectModel <AWSDynamoDBModeling>

                @property (nonatomic, strong) NSString *Title;
                @property (nonatomic, strong) NSString *Author;
                @property (nonatomic, strong) NSNumber *Price;
                @property (nonatomic, strong) NSString *ISBN;

                @end


                @implementation Book

                + (NSString *)dynamoDBTableName {
                    return @"Books";
                }

                + (NSString *)hashKeyAttribute {
                    return @"ISBN";
                }

                @end


.. note::

   As of SDK version 2.0.16, the ``AWSDynamoDBModel`` mapping class is deprecated and replaced by ``AWSDynamoDBObjectModel``. For information on migrating your legacy code, see :ref:`awsdynamodb-model`.


To conform to the ``AWSDynamoDBModeling`` protocol, implement ``dynamoDBTableName``, which returns the name of the table, and ``hashKeyAttribute``, which returns the name of the primary key. If the table has a range key, implement ``+ (NSString *)rangeKeyAttribute``.

CRUD Operations
===============
In this section:

.. contents::
   :local:
   :depth: 1

The Amazon DynamoDB table, mapping class, and object mapper client enable your app to interact with objects in the cloud.

Save an Item
------------

The `save: <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSDynamoDBObjectMapper.html#//api/name/save:>`_ method saves an object to Amazon DynamoDB, using the default configuration. As a parameter, ``save:`` takes a an object that inherits from ``AWSDynamoDBObjectModel`` and conforms to the ``AWSDynamoDBModeling`` protocol. The properties of this object will be mapped to attributes in Amazon DynamoDB table.

To create the object to be saved take the following steps.

#. Define the object and it's properties to match your table model.

    .. container:: option

        Swift
            .. code-block:: swift

                let myBook = Book()
                myBook?.ISBN = "3456789012"
                myBook?.Title = "The Scarlet Letter"
                myBook?.Author = "Nathaniel Hawthorne"
                myBook?.Price = 899 as NSNumber?


        Objective-C
            .. code-block:: objc

                Book *myBook = [Book new];
                myBook.ISBN = @"3456789012";
                myBook.Title = @"The Scarlet Letter";
                myBook.Author = @"Nathaniel Hawthorne";
                myBook.Price = [NSNumber numberWithInt:899];

#. Pass the object to the ``save:`` method.

    .. container:: option

        Swift
            .. code-block:: swift

               dynamoDBObjectMapper.save(myBook).continueWith(block: { (task:AWSTask<AnyObject>!) -> Any? in
                    if let error = task.error as? NSError {
                        print("The request failed. Error: \(error)")
                    } else {
                        // Do something with task.result or perform other operations.
                    }
                })


        Objective-C
            .. code-block:: objc

                [[dynamoDBObjectMapper save:myBook]
                continueWithBlock:^id(AWSTask *task) {
                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else {
                         //Do something with task.result or perform other operations.
                     }
                     return nil;
                 }];

Save Behavior Options
^^^^^^^^^^^^^^^^^^^^^

The AWS Mobile SDK for iOS supports the following save behavior options:

* ``AWSDynamoDBObjectMapperSaveBehaviorUpdate``

  This option does not affect unmodeled attributes on a save operation. Passing a nil value for the modeled attribute removes the attribute from the corresponding item in Amazon DynamoDB. By default, the object mapper uses this behavior.

* ``AWSDynamoDBObjectMapperSaveBehaviorUpdateSkipNullAttributes``

  This option is similar to the default update behavior, except that it ignores any null value attribute(s) and does not remove them from an item in Amazon DynamoDB.

* ``AWSDynamoDBObjectMapperSaveBehaviorAppendSet``

  This option treats scalar attributes (String, Number, Binary) the same as the ``AWSDynamoDBObjectMapperSaveBehaviorUpdateSkipNullAttributes`` option. However, for set attributes, this option  appends to the existing attribute value instead of overriding it. The caller must ensure that the modeled attribute type matches the existing set type; otherwise, a service exception occurs.

* ``AWSDynamoDBObjectMapperSaveBehaviorClobber``

  This option clears and replaces all attributes, including unmodeled ones, on save. Versioned field constraints are be disregarded.

The following code provides an example of setting a default save behavior on the object mapper.

    .. container:: option

        Swift
            .. code-block:: swift

                let updateMapperConfig = AWSDynamoDBObjectMapperConfiguration()
                updateMapperConfig.saveBehavior = .updateSkipNullAttributes

        Objective-C
            .. code-block:: objc

                AWSDynamoDBObjectMapperConfiguration *updateMapperConfig = [AWSDynamoDBObjectMapperConfiguration new];
                updateMapperConfig.saveBehavior = AWSDynamoDBObjectMapperSaveBehaviorUpdateSkipNullAttributes;

Use ``updateMapperConfig`` as an argument when calling `save:configuration: <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSDynamoDBObjectMapper.html#//api/name/save:configuration:>`_.

Retrieve an Item
----------------

Using an object's primary key, in this case, ``ISBN``, we can load the corresponding item from the database. The following code returns the Book item with an ISBN of ``6543210987``.

    .. container:: option

        Swift
            .. code-block:: swift

               dynamoDBObjectMapper.load(Book.self, hashKey: "6543210987" rangeKey:nil).continueWith(block: { (task:AWSTask<AnyObject>!) -> Any? in
                    if let error = task.error as? NSError {
                        print("The request failed. Error: \(error)")
                    } else if let resultBook = task.result as? Book {
                        // Do something with task.result.
                    }
                    return nil
                })


        Objective-C
            .. code-block:: objc

                [[dynamoDBObjectMapper load:[Book class] hashKey:@"6543210987" rangeKey:nil]
                continueWithBlock:^id(AWSTask *task) {
                    if (task.error) {
                        NSLog(@"The request failed. Error: [%@]", task.error);
                    } else {
                        //Do something with task.result.
                    }
                    return nil;
                }];


The object mapper creates a mapping between the ``Book`` item returned from the database and the ``Book`` object on the client (here, ``resultBook``). Access the title at ``resultBook.Title``.

Since the Books database does not have a range key, ``nil`` was passed to the ``rangeKey`` parameter.

Update an Item
--------------

To update an item in the database, just set new attributes and save the objects. The primary
key of an existing item, ``myBook.ISBN`` in the ``Book`` object mapper example, cannot be changed. If you save
an existing object with a new primary key, a new item with the same attributes and the new primary key are created.

Delete an Item
--------------

To delete a table row, use the `remove:` method.

    .. container:: option

        Swift
            .. code-block:: swift

                let bookToDelete = Book()
                bookToDelete?.ISBN = "4456789012";

               dynamoDBObjectMapper.remove(bookToDelete).continueWith(block: { (task:AWSTask<AnyObject>!) -> Any? in
                    if let error = task.error as? NSError {
                        print("The request failed. Error: \(error)")
                    } else {
                        // Item deleted.
                    }
                })


        Objective-C
            .. code-block:: objc

                Book *bookToDelete = [Book new];
                bookToDelete.ISBN = @"4456789012";

                [[dynamoDBObjectMapper remove:bookToDelete]
                 continueWithBlock:^id(AWSTask *task) {

                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else {
                         //Item deleted.
                     }
                     return nil;
                 }];

Perform a Scan
==============

A scan operation retrieves in an undetermined order.

The ``scan:expression:`` method takes two parameters: the class of the resulting object and an instance of ``AWSDynamoDBScanExpression``, which provides options for filtering results.

The following example shows how to create an ``AWSDynamoDBScanExpression`` object, set its ``limit`` property, and then pass the ``Book`` class and the expression object to ``scan:expression:``.

    .. container:: option

        Swift
            .. code-block:: swift

                let scanExpression = AWSDynamoDBScanExpression()
                scanExpression.limit = 20

               dynamoDBObjectMapper.scan(Book.self, expression: scanExpression).continueWith(block: { (task:AWSTask<AnyObject>!) -> Any? in
                    if let error = task.error as? NSError {
                        print("The request failed. Error: \(error)")
                    } else if let paginatedOutput = task.result {
                        for book in paginatedOutput.items as! Book {
                            // Do something with book.
                        }
                    }
                })


        Objective-C
            .. code-block:: objc

                AWSDynamoDBScanExpression *scanExpression = [AWSDynamoDBScanExpression new];
                scanExpression.limit = @10;

                [[dynamoDBObjectMapper scan:[Book class]
                        expression:scanExpression]
                continueWithBlock:^id(AWSTask *task) {
                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else {
                         AWSDynamoDBPaginatedOutput *paginatedOutput = task.result;
                         for (Book *book in paginatedOutput.items) {
                             //Do something with book.
                         }
                     }
                     return nil;
                }];

Filter a Scan
-------------

The output of a scan is returned as an ``AWSDynamoDBPaginatedOutput`` object. The array of returned items is in the ``items`` property.

The ``scanExpression` method provides several optional parameters. Use ``filterExpression``
and ``expressionAttributeValues`` to specify a scan result for the attribute names and conditions
you define. For more information about the parameters and the API, see
`AWSDynamoDBScanExpression <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSDynamoDBScanExpression.html>`_.

The following code scans the Books table to find books with a price less than 50.

    .. container:: option

        Swift
            .. code-block:: swift

                let scanExpression = AWSDynamoDBScanExpression()
                scanExpression.limit = 10
                scanExpression.filterExpression = "Price < :val"
                scanExpression.expressionAttributeValues = [":val": 50]

               dynamoDBObjectMapper.scan(Book.self, expression: scanExpression).continueWith(block: { (task:AWSTask<AnyObject>!) -> Any? in
                  if let error = task.error as? NSError {
                      print("The request failed. Error: \(error)")
                  } else if let paginatedOutput = task.result {
                      for book in paginatedOutput.items as! Book {
                          // Do something with book.
                      }
                  }
                })

        Objective-C
            .. code-block:: objc

                AWSDynamoDBScanExpression *scanExpression = [AWSDynamoDBScanExpression new];
                scanExpression.limit = @10;
                scanExpression.filterExpression = @"Price < :val";
                scanExpression.expressionAttributeValues = @{@":val":@50};

                [[dynamoDBObjectMapper scan:[Book class]
                             expression:scanExpression]
                continueWithBlock:^id(AWSTask *task) {
                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else {
                         AWSDynamoDBPaginatedOutput *paginatedOutput = task.result;
                         for (Book *book in paginatedOutput.items) {
                             //Do something with book.
                         }
                     }
                     return nil;
                 }];

You can also use the ``projectionExpression` property to specify the attributes to retrieve from the ``Books`` table. For example adding ``scanExpression.projectionExpression = @"ISBN, Title, Price";``  in the previous code snippet retrieves only those three properties in the book object. The ``Author`` property in the book object will always be nil.

Perform a Query
===============

The query API enables you to query a table or a secondary index. The ``query:expression:`` method takes two parameters: the class of the resulting object and an instance of ``AWSDynamoDBQueryExpression``.

To query an index, you must also specify the ``indexName``. You must specify the ``hashKeyAttribute`` if you query a global secondary with a different ``hashKey``. If the table or index has a range key, you can optionally refine the results by providing a range key value and a condition.

The following example illustrates querying the `Books` index table to find all books whose author is "John Smith", with a price less than 50.

    .. container:: option

        Swift
            .. code-block:: swift

                let queryExpression = AWSDynamoDBQueryExpression()
                queryExpression.indexName = "Author-Price-index"

                queryExpression.keyConditionExpression = @"Author = :authorName AND Price < :val";
                queryExpression.expressionAttributeValues = @{@":authorName": @"John Smith", @":val": @50};

               dynamoDBObjectMapper.query(Book.self, expression: queryExpression).continueWith(block: { (task:AWSTask<AnyObject>!) -> Any? in
                    if let error = task.error as? NSError {
                          print("The request failed. Error: \(error)")
                    } else if let paginatedOutput = task.result {
                        for book in paginateOutput.items as! Book {
                            // Do something with book.
                        }
                    }
                    return nil
                })

        Objective-C
            .. code-block:: objc

                AWSDynamoDBQueryExpression *queryExpression = [AWSDynamoDBQueryExpression new];

                queryExpression.indexName = @"Author-Price-index";

                queryExpression.keyConditionExpression = @"Author = :authorName AND Price < :val";

                queryExpression.expressionAttributeValues = @{@":authorName": @"John Smith", @":val":@50};

                [[dynamoDBObjectMapper query:[Book class]
                        expression:queryExpression]
                continueWithBlock:^id(AWSTask *task) {
                     if (task.error) {
                         NSLog(@"The request failed. Error: [%@]", task.error);
                     } else {
                         AWSDynamoDBPaginatedOutput *paginatedOutput = task.result;
                         for (Book *book in paginatedOutput.items) {
                             //Do something with book.
                         }
                     }
                     return nil;
                 }];

In the preceding example, ``indexName`` is specified to demonstrate querying an index.
The query expression is specified using ``keyConditionExpression`` and the values used in the
expression using ``expressionAttributeValues``.

You can also provide ``filterExpression`` and ``projectionExpression`` in ``AWSDynamoDBQueryExpression``. The syntax is the same as that used in a scan operation.

For more information, see `AWSDynamoDBQueryExpression <http://docs.aws.amazon.com/AWSiOSSDK/latest/Classes/AWSDynamoDBQueryExpression.html>`_.

.. _awsdynamodb-model:

:guilabel:`Migrating AWSDynamoDBModel to AWSDynamoDBObjectModel`

As of SDK version 2.0.16, the ``AWSDynamoDBModel`` mapping class is deprecated and replaced by ``AWSDynamoDBObjectModel``.The deprecated ``AWSDynamoDBModel`` used `NSArray` to represent
multi-valued types (``String Set``, ``Number Set``, and ``Binary Set``); it did not support
``Boolean``, ``Map``, or ``List`` types. The new ``AWSDynamoDBObjectModel`` uses ``NSSet`` for
multi-valued types and supports ``Boolean``, ``Map``, and ``List``. For the ``Boolean`` type,
you create an ``NSNumber`` using ``[NSNumber numberWithBool:YES]`` or using the shortcuts
``@YES`` and ``@NO``. For the Map type, create using ``NSDictionary``. For the List type, create
using ``NSArray``.

Additional Resources
====================

* `Amazon DynamoDB Developer Guide <http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/>`_
* `Amazon DynamoDB API Reference <http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/>`_




